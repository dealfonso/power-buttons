{"version":3,"file":"powerbuttons.min.js.map","sources":["powerbuttons.js"],"sourcesContent":["/**\n   Copyright 2023 Carlos A. (https://github.com/dealfonso)\n\n   Licensed under the Apache License, Version 2.0 (the \"License\");\n   you may not use this file except in compliance with the License.\n   You may obtain a copy of the License at\n\n       http://www.apache.org/licenses/LICENSE-2.0\n\n   Unless required by applicable law or agreed to in writing, software\n   distributed under the License is distributed on an \"AS IS\" BASIS,\n   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   See the License for the specific language governing permissions and\n   limitations under the License.\n*/\n\n(function (exports) {\n\t\"use strict\";\n\tif (typeof exports === \"undefined\") {\n\t\tvar exports = window;\n\t}\n\texports.powerButtons = function (param1, param2 = null, param3 = null) {\n\t\tlet pluginName = null;\n\t\tlet els = [];\n\t\tlet options = {};\n\n\t\tfunction registeredPlugin(pluginName) {\n\t\t\tfor (let actionName in PowerButtons.actionsRegistered) {\n\t\t\t\tif (pluginName.toLocaleLowerCase() === actionName.toLocaleLowerCase()) {\n\t\t\t\t\treturn actionName;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn null;\n\t\t}\n\t\tif (typeof param1 === \"string\") {\n\t\t\tpluginName = registeredPlugin(param1);\n\t\t\tif (pluginName === null) {\n\t\t\t\tels = document.querySelectorAll(param1);\n\t\t\t\tif (els.length === 0) {\n\t\t\t\t\tconsole.error(`Parameter ${param1} is neither the name of a registered plugin nor a valid selector`);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (arguments.length > 2) {\n\t\t\t\t\tconsole.warn(`Ignoring extra parameters`);\n\t\t\t\t}\n\t\t\t\toptions = param2;\n\t\t\t} else {\n\t\t\t\tlet valid = false;\n\t\t\t\tif (typeof param2 === \"string\") {\n\t\t\t\t\tels = document.querySelectorAll(param2);\n\t\t\t\t\tvalid = true;\n\t\t\t\t} else if (param2 instanceof HTMLElement) {\n\t\t\t\t\tels = [param2];\n\t\t\t\t\tvalid = true;\n\t\t\t\t} else if (param2.length !== undefined) {\n\t\t\t\t\tvalid = true;\n\t\t\t\t\tfor (let e in param2) {\n\t\t\t\t\t\tif (!(param2[e] instanceof HTMLElement)) {\n\t\t\t\t\t\t\tvalid = false;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (valid) {\n\t\t\t\t\t\tels = param2;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (!valid) {\n\t\t\t\t\tconsole.error(`Parameter ${param2} is neither a valid selector, a list of elements or an HTMLElement`);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\toptions = param3;\n\t\t\t}\n\t\t} else if (param1 instanceof HTMLElement) {\n\t\t\tels = [param1];\n\t\t} else if (param1.length !== undefined) {\n\t\t\tfor (let e in param1) {\n\t\t\t\tif (!(param1[e] instanceof HTMLElement)) {\n\t\t\t\t\tconsole.error(`Parameter ${param1} is neither a valid selector, a list of elements or an HTMLElement`);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\tels = param1;\n\t\t} else {\n\t\t\tconsole.error(`Parameter ${param1} is neither a valid selector, a list of elements or an HTMLElement`);\n\t\t\treturn;\n\t\t}\n\t\tif (options === null) {\n\t\t\toptions = {};\n\t\t}\n\t\tif (typeof options !== \"object\") {\n\t\t\tconsole.error(`Options parameter must be an object`);\n\t\t\treturn;\n\t\t}\n\t\tif (pluginName !== null) {\n\t\t\tlet plugin = PowerButtons.actionsRegistered[pluginName];\n\t\t\tfor (let el of els) {\n\t\t\t\tplugin.initialize(el, options);\n\t\t\t}\n\t\t} else {\n\t\t\tPowerButtons.discover(els, options);\n\t\t}\n\t};\n\texports.powerButtons.version = \"2.2.2\";\n\texports.powerButtons.plugins = function () {\n\t\treturn Object.keys(PowerButtons.actionsRegistered);\n\t};\n\texports.powerButtons.discoverAll = function () {\n\t\tPowerButtons.discoverAll();\n\t};\n\texports.powerButtons.discover = function (els, options) {\n\t\tPowerButtons.discover(els, options);\n\t};\n\tif (document.addEventListener !== undefined) {\n\t\tdocument.addEventListener(\"DOMContentLoaded\", function (e) {\n\t\t\tPowerButtons.discoverAll();\n\t\t});\n\t}\n\tif (exports.$ !== undefined) {\n\t\texports.$.fn.powerButtons = function (pluginName, options = {}) {\n\t\t\texports.powerButtons(pluginName, this, options);\n\t\t\treturn this;\n\t\t};\n\t\texports.$.fn.powerButtons.version = exports.powerButtons.version;\n\t\texports.$.fn.powerButtons.plugins = exports.powerButtons.plugins;\n\t}\n\n\tfunction pascalToSnake(str) {\n\t\treturn str.replace(/[A-Z]/g, letter => `_${letter.toLowerCase()}`).replace(/^_*/, \"\");\n\t}\n\n\tfunction pascalToKebab(str) {\n\t\treturn str.replace(/[A-Z]/g, letter => `-${letter.toLowerCase()}`).replace(/^-*/, \"\");\n\t}\n\n\tfunction snakeCaseToCamel(str) {\n\t\treturn str.replace(/-([a-z])/g, g => g[1].toUpperCase());\n\t}\n\n\tfunction pascalToCamel(str) {\n\t\treturn str.charAt(0).toLowerCase() + str.slice(1);\n\t}\n\n\tfunction CamelToCamel(str) {\n\t\treturn str.charAt(0).toUpperCase() + str.slice(1);\n\t}\n\n\tfunction isElement(el) {\n\t\treturn el instanceof Element || el instanceof HTMLDocument;\n\t}\n\n\tfunction parseBoolean(value) {\n\t\tif (typeof value === \"boolean\") {\n\t\t\treturn value;\n\t\t}\n\t\tif (typeof value === \"string\") {\n\t\t\tvalue = value.toLowerCase();\n\t\t\tif (value === \"true\" || value === \"yes\" || value === \"1\") {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\t\treturn !!value;\n\t}\n\n\tfunction createTag(tag, props = {}, html = null) {\n\t\tlet parts_id = tag.split(\"#\");\n\t\tlet id = null;\n\t\tif (parts_id.length == 1) {\n\t\t\ttag = parts_id[0];\n\t\t} else {\n\t\t\tparts_id[1] = parts_id[1].split(\".\");\n\t\t\tid = parts_id[1][0];\n\t\t\ttag = [parts_id[0], ...parts_id[1].slice(1)].join(\".\");\n\t\t}\n\t\tlet parts = tag.split(\".\");\n\t\ttag = parts[0];\n\t\tif (tag === \"\") {\n\t\t\ttag = \"div\";\n\t\t}\n\t\tif (typeof props === \"string\") {\n\t\t\thtml = props;\n\t\t\tprops = {};\n\t\t}\n\t\tif (html !== null) {\n\t\t\tprops.innerHTML = html;\n\t\t}\n\t\tif (id !== null) {\n\t\t\tprops.id = id;\n\t\t}\n\t\tprops.className = [props.className, ...parts.slice(1)].filter(function (e) {\n\t\t\treturn `${e}`.trim() !== \"\";\n\t\t}).join(\" \");\n\t\tlet el = document.createElement(tag);\n\t\tfor (let prop in props) {\n\t\t\tif (el[prop] !== undefined) {\n\t\t\t\tel[prop] = props[prop];\n\t\t\t} else {\n\t\t\t\tel.setAttribute(prop, props[prop]);\n\t\t\t}\n\t\t}\n\t\treturn el;\n\t}\n\n\tfunction appendToElement(el, ...args) {\n\t\tlet filtered = args.filter(e => e !== null && e !== undefined);\n\t\tel.append(...filtered);\n\t\treturn el;\n\t}\n\n\tfunction searchForm(formName) {\n\t\tlet formObject = null;\n\t\tif (formName !== null) {\n\t\t\tformObject = document.forms[formName];\n\t\t\tif (formObject === undefined) {\n\t\t\t\tformObject = document.querySelector(formName);\n\t\t\t\tif (formObject === null) {\n\t\t\t\t\tconsole.warn(`form ${formName} not found`);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (formObject !== null) {\n\t\t\tif (formObject.tagName.toLowerCase() !== \"form\") {\n\t\t\t\tconsole.warn(`form ${formName} is not a form`);\n\t\t\t}\n\t\t}\n\t\treturn formObject;\n\t}\n\n\tfunction getValueWithJavascriptSupport(value, context = null) {\n\t\tif (typeof value === \"function\") {\n\t\t\treturn value.bind(context);\n\t\t}\n\t\tif (typeof value === \"string\") {\n\t\t\tlet internalValue = value.trim();\n\t\t\tif (internalValue.startsWith(\"javascript:\")) {\n\t\t\t\ttry {\n\t\t\t\t\tlet f = internalValue.substring(11);\n\t\t\t\t\tvalue = function () {\n\t\t\t\t\t\treturn eval(f);\n\t\t\t\t\t}.bind(context);\n\t\t\t\t} catch (e) {\n\t\t\t\t\tconsole.error(`Error executing javascript code ${internalValue.substring(11)}, error: ${e}`);\n\t\t\t\t\tvalue = null;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn value;\n\t}\n\n\tfunction promiseForEvent(el, event) {\n\t\tif (el === null || el === undefined) {\n\t\t\treturn Promise.resolve();\n\t\t}\n\t\tlet resolveFunction = null;\n\t\tlet promise = new Promise(resolve => {\n\t\t\tresolveFunction = resolve;\n\t\t});\n\t\tlet handler = function () {\n\t\t\tel.removeEventListener(event, handler);\n\t\t\tresolveFunction();\n\t\t};\n\t\tel.addEventListener(event, handler);\n\t\treturn promise;\n\t}\n\n\tfunction isEmpty(obj) {\n\t\tif (obj === null || obj === undefined) {\n\t\t\treturn true;\n\t\t}\n\t\tif (obj instanceof Array) {\n\t\t\treturn obj.length === 0;\n\t\t}\n\t\tif (obj instanceof Object) {\n\t\t\treturn Object.keys(obj).length === 0;\n\t\t}\n\t\tif (typeof obj === \"string\") {\n\t\t\treturn obj.trim() === \"\";\n\t\t}\n\t\treturn false;\n\t}\n\tclass DialogLegacy {\n\t\tDEFAULTS = {\n\t\t\tmessage: \"Main message\",\n\t\t\tbuttonCount: 2\n\t\t};\n\t\tconstructor(options = {}, onButton = null, onHidden = null) {\n\t\t\tthis.options = {\n\t\t\t\t...this.DEFAULTS,\n\t\t\t\t...options\n\t\t\t};\n\t\t\tthis.buttonCount = this.options.buttons.length;\n\t\t\tthis.options.buttons = [\"Accept\", \"Cancel\"];\n\t\t\tthis.result = null;\n\t\t\tthis.onButton = onButton;\n\t\t\tthis.onHidden = onHidden;\n\t\t}\n\t\tdispose() {}\n\t\tshow(onButton = null, onHidden = null) {\n\t\t\tif (onButton !== null) {\n\t\t\t\tthis.onButton = onButton;\n\t\t\t}\n\t\t\tif (onHidden !== null) {\n\t\t\t\tthis.onHidden = onHidden;\n\t\t\t}\n\t\t\tswitch (this.buttonCount) {\n\t\t\tcase 0:\n\t\t\tcase 1:\n\t\t\t\talert(this.message);\n\t\t\t\tthis.result = 0;\n\t\t\t\tbreak;\n\t\t\tcase 2:\n\t\t\t\tthis.result = confirm(this.options.message) ? 0 : 1;\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tthrow `Unsupported button count ${this.buttonCount}`;\n\t\t\t}\n\t\t\tif (this.onButton !== null) {\n\t\t\t\tthis.onButton(this.result, {\n\t\t\t\t\tbutton: this.result,\n\t\t\t\t\ttext: this.options.buttons[this.result]\n\t\t\t\t}, null);\n\t\t\t}\n\t\t\tif (this.onHidden !== null) {\n\t\t\t\tthis.onHidden(this.result, {\n\t\t\t\t\tbutton: this.result,\n\t\t\t\t\ttext: this.options.buttons[this.result]\n\t\t\t\t}, null);\n\t\t\t}\n\t\t}\n\t}\n\tclass Dialog {\n\t\tstatic create(options = {}, onButton = null, onHidden = null) {\n\t\t\tif (exports.bootstrap === undefined || exports.bootstrap.Modal === undefined) {\n\t\t\t\treturn new DialogLegacy(options, onButton, onHidden);\n\t\t\t}\n\t\t\tif (options.selector !== undefined && options.selector !== null || options.dialogFunction !== undefined && options.dialogFunction !== null) {\n\t\t\t\tthrow new Error(\"not implemented, yet\");\n\t\t\t}\n\t\t\treturn new Dialog(options, onButton, onHidden);\n\t\t}\n\t\tDEFAULTS = {\n\t\t\ttitle: \"Title\",\n\t\t\tmessage: \"Main message\",\n\t\t\tcustomContent: null,\n\t\t\tbuttons: [\"Accept\"],\n\t\t\tbuttonClasses: [\"btn-primary\", \"btn-secondary\"],\n\t\t\tbuttonPanelClasses: [\"text-end\"],\n\t\t\tescapeKeyCancels: true,\n\t\t\theader: true,\n\t\t\tfooter: true,\n\t\t\tbody: true,\n\t\t\tclose: true,\n\t\t\tdialogClass: \"fade\",\n\t\t\tfocus: \"\",\n\t\t\tonDialogCreated: htmlElement => {}\n\t\t};\n\t\tdialog = null;\n\t\toptions = null;\n\t\tmodal = null;\n\t\tresult = null;\n\t\tonHidden = null;\n\t\tonButton = null;\n\t\tbuttons = [];\n\t\tconstructor(options = {}, onButton = null, onHidden = null) {\n\t\t\tif (exports.bootstrap === undefined || exports.bootstrap.Modal === undefined) {\n\t\t\t\tthrow new Error(\"Bootstrap is required to use this class\");\n\t\t\t}\n\t\t\tthis.options = {\n\t\t\t\t...this.DEFAULTS,\n\t\t\t\t...options\n\t\t\t};\n\t\t\tlet parsedButtons = [];\n\t\t\tfor (let i = 0; i < this.options.buttons.length; i++) {\n\t\t\t\tlet button = this.options.buttons[i];\n\t\t\t\tif (typeof button === \"string\") {\n\t\t\t\t\tbutton = {\n\t\t\t\t\t\ttext: button\n\t\t\t\t\t};\n\t\t\t\t} else {\n\t\t\t\t\tif (button.text === undefined) {\n\t\t\t\t\t\tbutton.text = `Button ${i}`;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (button.class === undefined) {\n\t\t\t\t\tbutton.class = this.options.buttonClasses[Math.min(i, this.options.buttonClasses.length - 1)];\n\t\t\t\t}\n\t\t\t\tparsedButtons.push(button);\n\t\t\t}\n\t\t\tthis.options.buttons = parsedButtons;\n\t\t\tthis.dialog = null;\n\t\t\tthis.buttons = [];\n\t\t\tthis.modal = null;\n\t\t\tthis.result = null;\n\t\t\tthis.onButton = onButton;\n\t\t\tthis.onHidden = onHidden;\n\t\t\tthis._hiddenHandler = this._hiddenHandler.bind(this);\n\t\t\tthis._hideHandler = this._hideHandler.bind(this);\n\t\t}\n\t\t_hiddenHandler() {\n\t\t\tthis.dialog.removeEventListener(\"hidden.bs.modal\", this._hiddenHandler);\n\t\t\tif (this.onHidden !== null) {\n\t\t\t\tif (this.result !== null && this.result >= 0) {\n\t\t\t\t\tthis.onHidden(this.result, {\n\t\t\t\t\t\tbutton: this.result,\n\t\t\t\t\t\ttext: this.options.buttons[this.result]\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tthis.onHidden(this.result, null);\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.dispose();\n\t\t}\n\t\t_hideHandler() {\n\t\t\tthis.dialog.removeEventListener(\"hide.bs.modal\", this._hideHandler);\n\t\t\tif (document.activeElement) {\n\t\t\t\tdocument.activeElement.blur();\n\t\t\t}\n\t\t}\n\t\tdispose() {\n\t\t\tif (this.modal !== null) {\n\t\t\t\tthis.modal.dispose();\n\t\t\t\tthis.modal = null;\n\t\t\t}\n\t\t\tthis.dialog.remove();\n\t\t\tthis.dialog = null;\n\t\t\tthis.buttons = [];\n\t\t}\n\t\tshow(onButton = null, onHidden = null) {\n\t\t\tif (this.dialog === null) {\n\t\t\t\tlet dialog = this._build_dialog(this.options);\n\t\t\t\tthis.dialog = dialog.dialog;\n\t\t\t\tthis.buttons = dialog.buttons;\n\t\t\t\tdocument.body.append(this.dialog);\n\t\t\t\tif (this.options.onDialogCreated !== null) {\n\t\t\t\t\tif (typeof this.options.onDialogCreated === \"function\") {\n\t\t\t\t\t\tthis.options.onDialogCreated(this.dialog);\n\t\t\t\t\t} else if (typeof this.options.onDialogCreated === \"string\") {\n\t\t\t\t\t\teval(this.options.onDialogCreated);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (this.modal === null) {\n\t\t\t\tthis.modal = new bootstrap.Modal(this.dialog, {\n\t\t\t\t\tbackdrop: this.options.escapeKeyCancels ? true : \"static\",\n\t\t\t\t\tkeyboard: this.options.escapeKeyCancels\n\t\t\t\t});\n\t\t\t}\n\t\t\tthis.dialog.addEventListener(\"hidden.bs.modal\", this._hiddenHandler);\n\t\t\tthis.dialog.addEventListener(\"hide.bs.modal\", this._hideHandler);\n\t\t\tthis.result = null;\n\t\t\tif (onButton !== null) {\n\t\t\t\tthis.onButton = onButton;\n\t\t\t}\n\t\t\tif (onHidden !== null) {\n\t\t\t\tthis.onHidden = onHidden;\n\t\t\t}\n\t\t\tthis.modal.show();\n\t\t\treturn promiseForEvent(this.dialog, \"shown.bs.modal\").then(() => {\n\t\t\t\tif (this.options.focus !== \"\") {\n\t\t\t\t\tthis.dialog.querySelector(this.options.focus)?.focus();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\thide() {\n\t\t\tif (this.modal === null) {\n\t\t\t\treturn new Promise(resolve => {\n\t\t\t\t\tresolve();\n\t\t\t\t});\n\t\t\t}\n\t\t\tthis.modal.hide();\n\t\t\treturn promiseForEvent(this.dialog, \"hidden.bs.modal\");\n\t\t}\n\t\t_handleButton(index, button, buttonObject) {\n\t\t\tthis.result = index;\n\t\t\tlet autoHide = true;\n\t\t\tif (this.onButton !== null) {\n\t\t\t\tautoHide = !(this.onButton(index, button, buttonObject) === false);\n\t\t\t}\n\t\t\tif (autoHide) {\n\t\t\t\tthis.hide();\n\t\t\t}\n\t\t}\n\t\t_build_dialog(options = {}) {\n\t\t\tlet header = null;\n\t\t\tlet closeButton = null;\n\t\t\tif (parseBoolean(options.close)) {\n\t\t\t\tcloseButton = createTag(\"button.close.btn-close\", {\n\t\t\t\t\ttabindex: \"-1\",\n\t\t\t\t\ttype: \"button\",\n\t\t\t\t\t\"aria-label\": \"Close\"\n\t\t\t\t});\n\t\t\t\tcloseButton.addEventListener(\"click\", () => this._handleButton(-1, null, closeButton));\n\t\t\t}\n\t\t\tif (parseBoolean(options.header)) {\n\t\t\t\theader = createTag(\".modal-header\");\n\t\t\t\tif (options.title !== null) {\n\t\t\t\t\theader.append(appendToElement(createTag(\".modal-title\"), appendToElement(createTag(\"h5\", options.title))));\n\t\t\t\t}\n\t\t\t\tif (parseBoolean(options.close)) {\n\t\t\t\t\theader.append(closeButton);\n\t\t\t\t}\n\t\t\t}\n\t\t\tlet buttons = [];\n\t\t\tif (options.buttons !== null) {\n\t\t\t\tfor (let i = 0; i < options.buttons.length; i++) {\n\t\t\t\t\tlet button = options.buttons[i];\n\t\t\t\t\tlet buttonClass = button.class.split(\" \").map(e => e.trim()).filter(e => e !== \"\").join(\".\");\n\t\t\t\t\tif (options.footer === false) {\n\t\t\t\t\t\tbuttonClass += \".mx-1\";\n\t\t\t\t\t}\n\t\t\t\t\tif (buttonClass !== \"\") {\n\t\t\t\t\t\tbuttonClass = \".\" + buttonClass;\n\t\t\t\t\t}\n\t\t\t\t\tlet buttonObject = createTag(\"button.btn\" + buttonClass + \".button\" + i, {\n\t\t\t\t\t\ttype: \"button\",\n\t\t\t\t\t\ttabindex: i + 1\n\t\t\t\t\t}, button.text);\n\t\t\t\t\tbuttonObject.addEventListener(\"click\", function () {\n\t\t\t\t\t\tthis._handleButton(i, button, buttonObject);\n\t\t\t\t\t\tif (button.handler !== undefined && button.handler !== null) {\n\t\t\t\t\t\t\tbutton.handler(i, button, buttonObject);\n\t\t\t\t\t\t}\n\t\t\t\t\t}.bind(this));\n\t\t\t\t\tbuttons.push(buttonObject);\n\t\t\t\t}\n\t\t\t}\n\t\t\tlet footer = null;\n\t\t\tif (parseBoolean(options.footer)) {\n\t\t\t\tfooter = appendToElement(createTag(\".modal-footer\"), ...buttons);\n\t\t\t}\n\t\t\tlet body = null;\n\t\t\tif (parseBoolean(options.body)) {\n\t\t\t\tbody = createTag(\".modal-body\");\n\t\t\t\tif (header === null) {\n\t\t\t\t\tif (parseBoolean(options.close)) {\n\t\t\t\t\t\tbody.append(appendToElement(createTag(\".text-end\"), closeButton));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (options.message !== null) {\n\t\t\t\t\tbody.append(createTag(\"p.message.text-center\", options.message));\n\t\t\t\t}\n\t\t\t\tif (options.customContent !== null) {\n\t\t\t\t\tbody.append(createTag(\".custom-content.mx-auto\", options.customContent));\n\t\t\t\t}\n\t\t\t\tif (footer === null) {\n\t\t\t\t\tlet buttonPanelClasses = options.buttonPanelClasses.map(e => e.trim()).filter(e => e !== \"\").join(\".\");\n\t\t\t\t\tif (buttonPanelClasses !== \"\") {\n\t\t\t\t\t\tbuttonPanelClasses = \".\" + buttonPanelClasses;\n\t\t\t\t\t}\n\t\t\t\t\tappendToElement(body, appendToElement(createTag(\".buttons\" + buttonPanelClasses), ...buttons));\n\t\t\t\t}\n\t\t\t}\n\t\t\tlet dialogClasses = options.dialogClass.split(\" \").map(e => e.trim()).filter(e => e !== \"\").join(\".\");\n\t\t\tif (dialogClasses !== \"\") {\n\t\t\t\tdialogClasses = \".\" + dialogClasses;\n\t\t\t}\n\t\t\tlet dialog = appendToElement(createTag(dialogClasses + \".modal.draggable\", {\n\t\t\t\ttabindex: \"-1\",\n\t\t\t\trole: \"dialog\",\n\t\t\t\t\"aria-hidden\": \"true\",\n\t\t\t\t\"data-keyboard\": \"false\"\n\t\t\t}), appendToElement(createTag(\".modal-dialog.modal-dialog-centered\", {\n\t\t\t\trole: \"document\"\n\t\t\t}), appendToElement(createTag(\".modal-content\"), header, body, footer)));\n\t\t\treturn {\n\t\t\t\tdialog: dialog,\n\t\t\t\tbuttons: buttons\n\t\t\t};\n\t\t}\n\t}\n\n\tfunction confirmDialog(message, title = \"this action needs confirmation\", onConfirm = null, onCancel = null, cancellable = true) {\n\t\tlet dialog = new Dialog({\n\t\t\ttitle: title,\n\t\t\tmessage: message,\n\t\t\tbuttons: [{\n\t\t\t\ttext: \"Cancel\",\n\t\t\t\tclass: \"btn-secondary\",\n\t\t\t\thandler: onCancel\n\t\t\t}, {\n\t\t\t\ttext: \"Confirm\",\n\t\t\t\tclass: \"btn-primary\",\n\t\t\t\thandler: onConfirm\n\t\t\t}],\n\t\t\tescapeKeyCancels: cancellable\n\t\t});\n\t\tdialog.show();\n\t\treturn dialog;\n\t}\n\n\tfunction alertDialog(message, title = \"Alert\", onAccept = null) {\n\t\tlet dialog = new Dialog({\n\t\t\ttitle: title,\n\t\t\tmessage: message,\n\t\t\tbuttons: [{\n\t\t\t\ttext: \"Accept\",\n\t\t\t\tclass: \"btn-primary\",\n\t\t\t\thandler: onAccept\n\t\t\t}],\n\t\t\tescapeKeyCancels: true\n\t\t});\n\t\tdialog.show();\n\t\treturn dialog;\n\t}\n\n\tfunction loadingDialog(message, customContent = null, canCancel = null) {\n\t\tif (typeof customContent === \"function\") {\n\t\t\tcanCancel = customContent;\n\t\t\tcustomContent = null;\n\t\t}\n\t\tlet dialog = new Dialog({\n\t\t\ttitle: null,\n\t\t\tmessage: message,\n\t\t\tbuttons: [{\n\t\t\t\ttext: \"Cancel\",\n\t\t\t\tclass: \"btn-primary\"\n\t\t\t}],\n\t\t\tcustomContent: customContent,\n\t\t\tescapeKeyCancels: false,\n\t\t\tclose: false,\n\t\t\theader: false,\n\t\t\tfooter: false\n\t\t}, canCancel);\n\t\tdialog.show();\n\t\treturn dialog;\n\t}\n\tif (exports.powerButtons.utils === undefined) {\n\t\texports.powerButtons.utils = {};\n\t}\n\tObject.assign(exports.powerButtons.utils, {\n\t\tconfirmDialog: confirmDialog,\n\t\talertDialog: alertDialog,\n\t\tloadingDialog: loadingDialog,\n\t\tDialog: Dialog\n\t});\n\tclass PowerButtons {\n\t\tstatic actionsRegistered = {};\n\t\tstatic registerAction(action) {\n\t\t\tthis.actionsRegistered[action.NAME.toLowerCase()] = action;\n\t\t\tif (exports.powerButtons === undefined) {\n\t\t\t\texports.powerButtons = {};\n\t\t\t}\n\t\t\tif (exports.powerButtons.defaults === undefined) {\n\t\t\t\texports.powerButtons.defaults = {};\n\t\t\t}\n\t\t\texports.powerButtons.defaults[action.NAME.toLowerCase()] = Object.assign({}, action.DEFAULTS);\n\t\t}\n\t\tstatic getActionSettings(action, options) {\n\t\t\tif (this.actionsRegistered[action.NAME.toLowerCase()] === undefined) {\n\t\t\t\tconsole.error(`The action ${action.NAME} is not registered`);\n\t\t\t\treturn {};\n\t\t\t}\n\t\t\tlet defaultsWindow = {};\n\t\t\tif (exports.powerButtons !== undefined && exports.powerButtons.defaults !== undefined && exports.powerButtons.defaults[action.NAME.toLowerCase()] !== undefined) {\n\t\t\t\tdefaultsWindow = exports.powerButtons.defaults[action.NAME.toLowerCase()];\n\t\t\t}\n\t\t\treturn Object.assign({}, action.DEFAULTS, defaultsWindow, options);\n\t\t}\n\t\tstatic addAction(el, options = {}) {\n\t\t\tlet powerButton = PowerButtons.addActionSupport(el);\n\t\t\tpowerButton.appendAction(options);\n\t\t}\n\t\tstatic addActionSupport(el) {\n\t\t\tif (el._powerButtons === undefined) {\n\t\t\t\tel._powerButtons = new PowerButtons(el);\n\t\t\t} else {\n\t\t\t\tel._powerButtons.reset();\n\t\t\t}\n\t\t\treturn el._powerButtons;\n\t\t}\n\t\tel = null;\n\t\tcurrent_action = 0;\n\t\tactions = [];\n\t\tback_onclick = null;\n\t\tconstructor(el) {\n\t\t\tel._powerButtons = this;\n\t\t\tthis.el = el;\n\t\t\tthis.current_action = 0;\n\t\t\tthis.actions = [];\n\t\t\tthis.back_onclick = null;\n\t\t\tif (el.onclick !== undefined && el.onclick !== null) {\n\t\t\t\tthis.back_onclick = el.onclick;\n\t\t\t\tel.onclick = null;\n\t\t\t}\n\t\t\tel.addEventListener(\"click\", this.handlerClick.bind(this));\n\t\t}\n\t\tappendAction(options = {}) {\n\t\t\tif (options.type === undefined) {\n\t\t\t\tthrow \"The type of the action is mandatory\";\n\t\t\t}\n\t\t\tthis.actions.push(options);\n\t\t}\n\t\thandlerClick(e) {\n\t\t\tif (this.current_action >= this.actions.length) {\n\t\t\t\tthis.current_action = 0;\n\t\t\t\tif (typeof this.back_onclick === \"function\") {\n\t\t\t\t\tif (!this.back_onclick()) {\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tlet currentActionSettings = this.actions[this.current_action];\n\t\t\te.preventDefault();\n\t\t\te.stopImmediatePropagation();\n\t\t\tlet onNextAction = function (override = false) {\n\t\t\t\tif (override) {\n\t\t\t\t\tthis.current_action = this.actions.length;\n\t\t\t\t} else {\n\t\t\t\t\tthis.current_action++;\n\t\t\t\t}\n\t\t\t\tif (this.current_action >= this.actions.length) {\n\t\t\t\t\tif (this.el.click !== undefined) {\n\t\t\t\t\t\tthis.el.click();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.el.dispatchEvent(new Event(e.type, e));\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tthis.el.dispatchEvent(new Event(e.type, e));\n\t\t\t\t}\n\t\t\t}.bind(this);\n\t\t\tlet action = this.constructor.actionsRegistered[currentActionSettings.type];\n\t\t\tif (action === undefined) {\n\t\t\t\tthrow `The action ${currentActionSettings.type} is not registered`;\n\t\t\t}\n\t\t\taction.execute(this.el, currentActionSettings, onNextAction, () => this.reset());\n\t\t}\n\t\treset() {\n\t\t\tthis.current_action = 0;\n\t\t}\n\t\tstatic discoverAll() {\n\t\t\tObject.entries(this.actionsRegistered).forEach(([key, action]) => {\n\t\t\t\taction.discoverAll();\n\t\t\t});\n\t\t}\n\t\tstatic discover(els, options = {}) {\n\t\t\tObject.entries(this.actionsRegistered).forEach(([key, action]) => {\n\t\t\t\taction.discover(els, options);\n\t\t\t});\n\t\t}\n\t}\n\tclass Action {\n\t\tstatic NAME = null;\n\t\tstatic register() {\n\t\t\tPowerButtons.registerAction(this);\n\t\t}\n\t\tstatic DEFAULTS = {};\n\t\tstatic extractOptions(el, prefix = null, map = null) {\n\t\t\tif (prefix === null) {\n\t\t\t\tprefix = this.NAME.toLowerCase();\n\t\t\t}\n\t\t\tif (map === null) {\n\t\t\t\tmap = {};\n\t\t\t\tmap[prefix] = prefix;\n\t\t\t}\n\t\t\tlet options = {};\n\t\t\tfor (let key in this.DEFAULTS) {\n\t\t\t\tlet targetKey = key;\n\t\t\t\tif (map[targetKey] !== undefined) {\n\t\t\t\t\ttargetKey = map[targetKey];\n\t\t\t\t} else {\n\t\t\t\t\ttargetKey = prefix + CamelToCamel(targetKey);\n\t\t\t\t}\n\t\t\t\tif (el.dataset[targetKey] !== undefined) {\n\t\t\t\t\toptions[key] = el.dataset[targetKey];\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn options;\n\t\t}\n\t\tstatic initialize(el, values = {}) {\n\t\t\tPowerButtons.addAction(el, Object.assign({\n\t\t\t\ttype: this.NAME.toLowerCase()\n\t\t\t}, values));\n\t\t}\n\t\tstatic discoverAll() {\n\t\t\tlet prefix = this.NAME.toLowerCase();\n\t\t\tthis.discover(document.querySelectorAll(`[data-${prefix}]`));\n\t\t}\n\t\tstatic discover(els, options = {}, skipInitialized = true) {\n\t\t\tif (els.length === undefined) {\n\t\t\t\tels = [els];\n\t\t\t}\n\t\t\tlet prefix = this.NAME.toLowerCase();\n\t\t\tfor (let el of els) {\n\t\t\t\tif (skipInitialized && el._powerButtons !== undefined && el._powerButtons._discover !== undefined && el._powerButtons._discover.indexOf(prefix) !== -1) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tif (el.dataset[prefix] === undefined) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tlet currentOptions = Object.assign(this.extractOptions(el, prefix), options);\n\t\t\t\tthis.initialize(el, currentOptions);\n\t\t\t\tif (el._powerButtons !== undefined) {\n\t\t\t\t\tif (el._powerButtons._discover === undefined) {\n\t\t\t\t\t\tel._powerButtons._discover = [];\n\t\t\t\t\t}\n\t\t\t\t\tif (!el._powerButtons._discover.includes(prefix)) {\n\t\t\t\t\t\tel._powerButtons._discover.push(prefix);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tstatic execute(el, options, onNextAction, onCancelActions) {\n\t\t\tthrow new Error(\"The execute method must be implemented by the derived class\");\n\t\t}\n\t}\n\tclass ActionOverride extends Action {\n\t\tstatic NAME = \"Override\";\n\t\tstatic DEFAULTS = {\n\t\t\toverride: null,\n\t\t\tform: null,\n\t\t\toverridden: null,\n\t\t\tcustomContent: null,\n\t\t\ttitle: null,\n\t\t\tbuttonAccept: \"Accept\",\n\t\t\tescapeKey: true,\n\t\t\tdialogClass: \"fade\",\n\t\t\tfocus: \"\",\n\t\t\tonDialogCreated: htmlElement => {}\n\t\t};\n\t\tstatic execute(el, options, onNextAction, onCancelActions) {\n\t\t\tlet settings = PowerButtons.getActionSettings(this, options);\n\t\t\tlet result = null;\n\t\t\tlet bindObject = searchForm(settings.form);\n\t\t\tif (bindObject === null) {\n\t\t\t\tbindObject = document;\n\t\t\t}\n\t\t\ttry {\n\t\t\t\tif (typeof settings.override === \"function\") {\n\t\t\t\t\tresult = settings.override.bind(bindObject)();\n\t\t\t\t} else if (typeof settings.override === \"string\") {\n\t\t\t\t\tresult = function () {\n\t\t\t\t\t\treturn eval(settings.override);\n\t\t\t\t\t}.bind(bindObject)();\n\t\t\t\t} else {\n\t\t\t\t\tresult = parseBoolean(settings.override);\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\tconsole.error(\"Error executing override function\", e);\n\t\t\t\tresult = false;\n\t\t\t}\n\t\t\tif (result) {\n\t\t\t\tif (settings.overridden !== null || settings.customContent !== null || settings.title !== null) {\n\t\t\t\t\tlet dialog = null;\n\t\t\t\t\tdialog = Dialog.create({\n\t\t\t\t\t\ttitle: settings.title,\n\t\t\t\t\t\tmessage: settings.overridden,\n\t\t\t\t\t\tcustomContent: settings.customContent,\n\t\t\t\t\t\tbuttons: [settings.buttonAccept],\n\t\t\t\t\t\tescapeKeyCancels: settings.escapeKey,\n\t\t\t\t\t\tclose: settings.buttonClose,\n\t\t\t\t\t\tdialogClass: settings.dialogClass,\n\t\t\t\t\t\tfocus: settings.focus,\n\t\t\t\t\t\tonDialogCreated: settings.onDialogCreated\n\t\t\t\t\t}, null, function (result) {\n\t\t\t\t\t\tonNextAction(true);\n\t\t\t\t\t});\n\t\t\t\t\tdialog.show();\n\t\t\t\t} else {\n\t\t\t\t\tonNextAction(true);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tonNextAction();\n\t\t\t}\n\t\t}\n\t}\n\tActionOverride.register();\n\tclass ActionVerify extends Action {\n\t\tstatic NAME = \"Verify\";\n\t\tstatic DEFAULTS = {\n\t\t\tverify: null,\n\t\t\tform: null,\n\t\t\tverified: null,\n\t\t\tnotVerified: \"The condition for this action is not met\",\n\t\t\tcustomContentVerified: null,\n\t\t\tcustomContentNotVerified: null,\n\t\t\ttitleNotVerified: \"The action requires verification\",\n\t\t\ttitleVerified: null,\n\t\t\tbuttonAccept: \"Accept\",\n\t\t\tbuttonClose: false,\n\t\t\tescapeKey: true,\n\t\t\tdialogClass: \"fade\",\n\t\t\tfocus: \"\",\n\t\t\tonDialogCreated: htmlElement => {}\n\t\t};\n\t\tstatic execute(el, options, onNextAction, onCancelActions) {\n\t\t\tlet settings = PowerButtons.getActionSettings(this, options);\n\t\t\tlet result = null;\n\t\t\tlet bindObject = searchForm(settings.form);\n\t\t\tif (bindObject === null) {\n\t\t\t\tbindObject = document;\n\t\t\t}\n\t\t\ttry {\n\t\t\t\tif (typeof settings.verify === \"function\") {\n\t\t\t\t\tresult = settings.verify.bind(bindObject)();\n\t\t\t\t} else if (typeof settings.verify === \"string\") {\n\t\t\t\t\tresult = function () {\n\t\t\t\t\t\treturn eval(settings.verify);\n\t\t\t\t\t}.bind(bindObject)();\n\t\t\t\t} else {\n\t\t\t\t\tresult = parseBoolean(settings.verify);\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\tconsole.error(\"Error executing verification function\", e);\n\t\t\t\tresult = false;\n\t\t\t}\n\t\t\tlet dialog = null;\n\t\t\tlet onVerificationSuccess = onNextAction;\n\t\t\tlet onVerificationFailure = onCancelActions;\n\t\t\tif (result) {\n\t\t\t\tif (settings.verified !== null || settings.customContentVerified !== null || settings.titleVerified !== null) {\n\t\t\t\t\tdialog = Dialog.create({\n\t\t\t\t\t\ttitle: settings.titleVerified,\n\t\t\t\t\t\tmessage: settings.verified,\n\t\t\t\t\t\tcustomContent: settings.customContentVerified,\n\t\t\t\t\t\tbuttons: [settings.buttonAccept],\n\t\t\t\t\t\tescapeKeyCancels: settings.escapeKey,\n\t\t\t\t\t\tclose: settings.buttonClose,\n\t\t\t\t\t\tdialogClass: settings.dialogClass,\n\t\t\t\t\t\tfocus: settings.focus,\n\t\t\t\t\t\tonDialogCreated: settings.onDialogCreated\n\t\t\t\t\t}, null, function (result) {\n\t\t\t\t\t\tif (onVerificationSuccess !== null) {\n\t\t\t\t\t\t\tonVerificationSuccess();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (settings.notVerified !== null || settings.customContentNotVerified !== null || settings.titleNotVerified !== null) {\n\t\t\t\t\tdialog = Dialog.create({\n\t\t\t\t\t\ttitle: settings.titleNotVerified,\n\t\t\t\t\t\tmessage: settings.notVerified,\n\t\t\t\t\t\tcustomContent: settings.customContentNotVerified,\n\t\t\t\t\t\tbuttons: [settings.buttonAccept],\n\t\t\t\t\t\tescapeKeyCancels: settings.escapeKey,\n\t\t\t\t\t\tclose: settings.buttonClose,\n\t\t\t\t\t\tdialogClass: settings.dialogClass,\n\t\t\t\t\t\tfocus: settings.focus,\n\t\t\t\t\t\tonDialogCreated: settings.onDialogCreated\n\t\t\t\t\t}, null, function (result) {\n\t\t\t\t\t\tif (onVerificationFailure !== null) {\n\t\t\t\t\t\t\tonVerificationFailure();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (dialog !== null) {\n\t\t\t\tdialog.show();\n\t\t\t} else {\n\t\t\t\tif (result) {\n\t\t\t\t\tif (onVerificationSuccess !== null) {\n\t\t\t\t\t\tonVerificationSuccess();\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif (onVerificationFailure !== null) {\n\t\t\t\t\t\tonVerificationFailure();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tActionVerify.register();\n\tclass ActionConfirm extends Action {\n\t\tstatic NAME = \"Confirm\";\n\t\tstatic DEFAULTS = {\n\t\t\tconfirm: \"Please confirm this action\",\n\t\t\tcustomContent: null,\n\t\t\ttitle: \"The action requires confirmation\",\n\t\t\tbuttonConfirm: \"Confirm\",\n\t\t\tbuttonCancel: \"Cancel\",\n\t\t\tbuttonClose: true,\n\t\t\tonConfirm: null,\n\t\t\tescapeKey: true,\n\t\t\tdialogClass: \"fade\",\n\t\t\tfocus: \"\",\n\t\t\tonDialogCreated: htmlElement => {}\n\t\t};\n\t\tstatic extractOptions(el, prefix = null, map = null) {\n\t\t\tlet options = super.extractOptions(el, prefix, map);\n\t\t\tif (options.confirm.trim() == \"\") {\n\t\t\t\tdelete options.confirm;\n\t\t\t}\n\t\t\treturn options;\n\t\t}\n\t\tstatic execute(el, options, onNextAction, onCancelActions) {\n\t\t\tlet settings = PowerButtons.getActionSettings(this, options);\n\t\t\tlet dialog = Dialog.create({\n\t\t\t\ttitle: settings.title,\n\t\t\t\tmessage: settings.confirm,\n\t\t\t\tcustomContent: settings.customContent,\n\t\t\t\tbuttons: [settings.buttonConfirm, settings.buttonCancel],\n\t\t\t\tescapeKeyCancels: settings.escapeKey,\n\t\t\t\tclose: settings.buttonClose,\n\t\t\t\tdialogClass: settings.dialogClass,\n\t\t\t\tfocus: settings.focus,\n\t\t\t\tonDialogCreated: settings.onDialogCreated\n\t\t\t}, null, function (result) {\n\t\t\t\tif (result === 0) {\n\t\t\t\t\tif (settings.onConfirm !== null) {\n\t\t\t\t\t\tlet result = null;\n\t\t\t\t\t\tif (typeof settings.onConfirm === \"function\") {\n\t\t\t\t\t\t\tresult = settings.onConfirm.bind(document)();\n\t\t\t\t\t\t} else if (typeof settings.onConfirm === \"string\") {\n\t\t\t\t\t\t\tresult = function () {\n\t\t\t\t\t\t\t\treturn eval(settings.onConfirm);\n\t\t\t\t\t\t\t}.bind(document)();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (onNextAction !== null) {\n\t\t\t\t\t\tonNextAction();\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif (onCancelActions !== null) {\n\t\t\t\t\t\tonCancelActions();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t\tdialog.show();\n\t\t}\n\t}\n\tActionConfirm.register();\n\tclass ActionAsyncTask extends Action {\n\t\tstatic NAME = \"AsyncTask\";\n\t\tstatic DEFAULTS = {\n\t\t\ttask: null,\n\t\t\tmessage: \"Please wait...\",\n\t\t\tcustomContent: null,\n\t\t\ttitle: null,\n\t\t\tbuttonCancel: \"Cancel\",\n\t\t\tcancel: null,\n\t\t\theader: true,\n\t\t\tfooter: true,\n\t\t\tdialogClass: \"fade\",\n\t\t\tfocus: \"\",\n\t\t\tonDialogCreated: htmlElement => {}\n\t\t};\n\t\tstatic extractOptions(el, prefix = null, map = null) {\n\t\t\treturn super.extractOptions(el, prefix, {\n\t\t\t\ttask: \"asynctask\"\n\t\t\t});\n\t\t}\n\t\tstatic execute(el, options, onNextAction, onCancelActions) {\n\t\t\tlet settings = PowerButtons.getActionSettings(this, options);\n\t\t\tif (settings.task === null) {\n\t\t\t\tconsole.error(\"The task to execute cannot be null\");\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tlet task = null;\n\t\t\tif (typeof settings.task === \"string\") {\n\t\t\t\ttask = async function () {\n\t\t\t\t\treturn await eval(settings.task);\n\t\t\t\t};\n\t\t\t} else if (typeof settings.task === \"function\") {\n\t\t\t\ttask = settings.task;\n\t\t\t} else {\n\t\t\t\tconsole.error(\"The task to execute must be either a string or a function\");\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tlet buttons = [];\n\t\t\tlet cancelHandler = null;\n\t\t\tif (settings.cancel !== null) {\n\t\t\t\tbuttons = [settings.buttonCancel];\n\t\t\t\tif (typeof settings.cancel === \"string\") {\n\t\t\t\t\tcancelHandler = function () {\n\t\t\t\t\t\teval(settings.cancel);\n\t\t\t\t\t};\n\t\t\t\t} else if (typeof settings.cancel === \"function\") {\n\t\t\t\t\tcancelHandler = settings.cancel;\n\t\t\t\t} else {\n\t\t\t\t\tconsole.error(\"The cancel handler must be either a string or a function\");\n\t\t\t\t}\n\t\t\t}\n\t\t\tlet dialog = Dialog.create({\n\t\t\t\ttitle: settings.title,\n\t\t\t\tmessage: settings.message,\n\t\t\t\tcustomContent: settings.customContent,\n\t\t\t\tbuttons: buttons,\n\t\t\t\tescapeKeyCancels: false,\n\t\t\t\tclose: false,\n\t\t\t\theader: options.header !== undefined ? settings.header : settings.title !== null && settings.title != \"\",\n\t\t\t\tfooter: options.footer !== undefined ? settings.footer : cancelHandler !== null,\n\t\t\t\tdialogClass: settings.dialogClass,\n\t\t\t\tfocus: settings.focus,\n\t\t\t\tonDialogCreated: settings.onDialogCreated\n\t\t\t}, function () {\n\t\t\t\tcancelHandler();\n\t\t\t\tonCancelActions();\n\t\t\t}, function (result) {\n\t\t\t\tif (onNextAction !== null) {\n\t\t\t\t\tonNextAction();\n\t\t\t\t}\n\t\t\t});\n\t\t\tdialog.show().then(function () {\n\t\t\t\ttask().finally(function () {\n\t\t\t\t\tdialog.hide();\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t}\n\tActionAsyncTask.register();\n\tclass ActionShowMessage extends Action {\n\t\tstatic NAME = \"ShowMessage\";\n\t\tstatic DEFAULTS = {\n\t\t\tshowmessage: \"This is a message\",\n\t\t\tcustomContent: null,\n\t\t\ttitle: null,\n\t\t\tbuttonAccept: \"Accept\",\n\t\t\tescapeKey: true,\n\t\t\tbuttonClose: true,\n\t\t\theader: true,\n\t\t\tfooter: true,\n\t\t\tdialogClass: \"fade\",\n\t\t\tfocus: \"\",\n\t\t\tonDialogCreated: htmlElement => {}\n\t\t};\n\t\tstatic execute(el, options, onNextAction, onCancelActions) {\n\t\t\tlet settings = PowerButtons.getActionSettings(this, options);\n\t\t\tlet dialog = Dialog.create({\n\t\t\t\ttitle: settings.title,\n\t\t\t\tmessage: settings.showmessage,\n\t\t\t\tcustomContent: settings.customContent,\n\t\t\t\tbuttons: [settings.buttonAccept],\n\t\t\t\tescapeKeyCancels: settings.escapeKey,\n\t\t\t\tclose: settings.buttonClose,\n\t\t\t\theader: options.header !== undefined ? settings.header : settings.title !== null && settings.title != \"\",\n\t\t\t\tfooter: options.footer !== undefined ? settings.footer : settings.buttonAccept !== null && settings.buttonAccept != \"\",\n\t\t\t\tdialogClass: settings.dialogClass,\n\t\t\t\tfocus: settings.focus,\n\t\t\t\tonDialogCreated: settings.onDialogCreated\n\t\t\t}, null, function (result) {\n\t\t\t\tif (onNextAction !== null) {\n\t\t\t\t\tonNextAction();\n\t\t\t\t}\n\t\t\t});\n\t\t\tdialog.show();\n\t\t}\n\t}\n\tActionShowMessage.register();\n\tclass ActionFormset extends Action {\n\t\tstatic NAME = \"Formset\";\n\t\tstatic DEFAULTS = {\n\t\t\tform: null,\n\t\t\tfields: {}\n\t\t};\n\t\tstatic extractOptions(el, prefix = null, map = null) {\n\t\t\tlet options = super.extractOptions(el, prefix, {\n\t\t\t\tform: \"formset\"\n\t\t\t});\n\t\t\tlet fields = {};\n\t\t\tfor (let key in el.dataset) {\n\t\t\t\tif (key.startsWith(prefix)) {\n\t\t\t\t\tlet fieldname = key.substring(prefix.length);\n\t\t\t\t\tif (fieldname === \"\") {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tif (fieldname[0] !== fieldname[0].toUpperCase()) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tfieldname = fieldname.toLocaleLowerCase();\n\t\t\t\t\tfields[fieldname] = el.dataset[key];\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (options.fields === undefined) {\n\t\t\t\toptions.fields = {};\n\t\t\t}\n\t\t\tObject.assign(options.fields, fields);\n\t\t\treturn options;\n\t\t}\n\t\tstatic execute(el, options, onNextAction, onCancelActions) {\n\t\t\tlet settings = PowerButtons.getActionSettings(this, options);\n\t\t\tlet formToSet = null;\n\t\t\tlet inputFields = [];\n\t\t\tlet elements = [];\n\t\t\tif (settings.form == \"\") {\n\t\t\t\tif (el.form !== null) {\n\t\t\t\t\tformToSet = el.form;\n\t\t\t\t} else {\n\t\t\t\t\telements = Array.from(document.querySelectorAll(\"input\")).filter(input => input.form === null);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tformToSet = searchForm(settings.form);\n\t\t\t\tif (formToSet === null) {\n\t\t\t\t\tconsole.error(`Form not found ${settings.form}`);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (formToSet !== null) {\n\t\t\t\telements = Array.from(formToSet.elements);\n\t\t\t}\n\t\t\telements.forEach(element => {\n\t\t\t\tif (element.name !== \"\") {\n\t\t\t\t\tinputFields[element.name.toLocaleLowerCase()] = element;\n\t\t\t\t}\n\t\t\t\tif (element.id !== \"\") {\n\t\t\t\t\tinputFields[element.id.toLocaleLowerCase()] = element;\n\t\t\t\t}\n\t\t\t});\n\t\t\tfor (let field in settings.fields) {\n\t\t\t\tif (inputFields[field] !== undefined) {\n\t\t\t\t\tlet value = settings.fields[field];\n\t\t\t\t\tlet result = getValueWithJavascriptSupport(value, formToSet !== null ? formToSet : inputFields);\n\t\t\t\t\tif (typeof result === \"function\") {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tresult = result();\n\t\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\t\tconsole.error(`Error executing ${value}`, e);\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tinputFields[field].value = result;\n\t\t\t\t}\n\t\t\t}\n\t\t\tonNextAction();\n\t\t}\n\t}\n\tActionFormset.register();\n\tclass ActionFormButton extends Action {\n\t\tstatic NAME = \"FormButton\";\n\t\tstatic DEFAULTS = {\n\t\t\tformbutton: null,\n\t\t\tmethod: \"post\",\n\t\t\tformClass: \"formbutton\",\n\t\t\tconvertCase: \"none\",\n\t\t\tformId: null,\n\t\t\tfields: {}\n\t\t};\n\t\tstatic extractOptions(el, prefix = null, map = null) {\n\t\t\tlet options = super.extractOptions(el, prefix, map);\n\t\t\tlet fields = {};\n\t\t\tprefix = prefix + \"Field\";\n\t\t\tfor (let key in el.dataset) {\n\t\t\t\tif (key.startsWith(prefix)) {\n\t\t\t\t\tlet fieldname = key.substring(prefix.length);\n\t\t\t\t\tif (fieldname === \"\") {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tif (fieldname[0] !== fieldname[0].toUpperCase()) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tswitch (options.convertCase) {\n\t\t\t\t\tcase \"kebab\":\n\t\t\t\t\t\tfieldname = pascalToKebab(fieldname);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"snake\":\n\t\t\t\t\t\tfieldname = pascalToSnake(fieldname);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"camel\":\n\t\t\t\t\t\tfieldname = pascalToCamel(fieldname);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"pascal\":\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tfields[fieldname] = el.dataset[key];\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (options.fields === undefined) {\n\t\t\t\toptions.fields = {};\n\t\t\t}\n\t\t\tObject.assign(options.fields, fields);\n\t\t\treturn options;\n\t\t}\n\t\tstatic initialize(el, values = {}) {\n\t\t\tlet settings = PowerButtons.getActionSettings(this, values);\n\t\t\tlet form = document.createElement(\"form\");\n\t\t\tform.method = settings.method;\n\t\t\tif (!isEmpty(settings.formbutton)) {\n\t\t\t\tform.action = settings.formbutton;\n\t\t\t}\n\t\t\tif (settings.formId !== null) {\n\t\t\t\tform.id = settings.formId;\n\t\t\t}\n\t\t\tlet cssClasses = settings.formClass.split(\" \");\n\t\t\tfor (var i = 0; i < cssClasses.length; i++) {\n\t\t\t\tif (!isEmpty(cssClasses[i])) {\n\t\t\t\t\tform.classList.add(cssClasses[i]);\n\t\t\t\t}\n\t\t\t}\n\t\t\tel.type = \"submit\";\n\t\t\tlet fields = {};\n\t\t\tfor (let fieldName in settings.fields) {\n\t\t\t\tfields[fieldName] = getValueWithJavascriptSupport(settings.fields[fieldName], form);\n\t\t\t}\n\t\t\tlet pendingFields = {};\n\t\t\tfor (let fieldName in fields) {\n\t\t\t\tlet input = document.createElement(\"input\");\n\t\t\t\tinput.type = \"hidden\";\n\t\t\t\tinput.name = fieldName;\n\t\t\t\tif (typeof fields[fieldName] === \"function\") {\n\t\t\t\t\tinput.value = \"\";\n\t\t\t\t\tpendingFields[fieldName] = fields[fieldName];\n\t\t\t\t} else {\n\t\t\t\t\tinput.value = fields[fieldName];\n\t\t\t\t}\n\t\t\t\tform.appendChild(input);\n\t\t\t}\n\t\t\tel.parentNode.replaceChild(form, el);\n\t\t\tform.appendChild(el);\n\t\t\tif (Object.keys(pendingFields).length > 0) {\n\t\t\t\tsettings.fields = pendingFields;\n\t\t\t\tsettings._formObject = form;\n\t\t\t\tsuper.initialize(el, settings);\n\t\t\t}\n\t\t}\n\t\tstatic execute(el, options, onNextAction, onCancelActions) {\n\t\t\tlet settings = PowerButtons.getActionSettings(this, options);\n\t\t\tlet error = false;\n\t\t\tfor (let fieldName in settings.fields) {\n\t\t\t\ttry {\n\t\t\t\t\tlet value = settings.fields[fieldName]();\n\t\t\t\t\tsettings._formObject[fieldName].value = value;\n\t\t\t\t} catch (e) {\n\t\t\t\t\tconsole.error(`Error obtaining value for field ${fieldName}: ${e}`);\n\t\t\t\t\terror = true;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (error) {\n\t\t\t\tonCancelActions();\n\t\t\t} else {\n\t\t\t\tonNextAction();\n\t\t\t}\n\t\t}\n\t}\n\tActionFormButton.register();\n})(window);\n"],"names":["exports","window","powerButtons","param1","param2","param3","let","pluginName","els","options","registeredPlugin","actionName","PowerButtons","actionsRegistered","toLocaleLowerCase","document","querySelectorAll","length","console","error","arguments","warn","valid","HTMLElement","undefined","e","plugin","el","initialize","discover","version","plugins","Object","keys","discoverAll","addEventListener","$","fn","this","pascalToSnake","str","replace","letter","toLowerCase","pascalToKebab","snakeCaseToCamel","g","toUpperCase","pascalToCamel","charAt","slice","CamelToCamel","isElement","Element","HTMLDocument","parseBoolean","value","createTag","tag","props","html","parts_id","split","id","join","parts","innerHTML","className","filter","trim","createElement","prop","setAttribute","appendToElement","args","filtered","append","searchForm","formName","formObject","forms","querySelector","tagName","getValueWithJavascriptSupport","context","bind","internalValue","startsWith","f","substring","eval","promiseForEvent","event","Promise","resolve","resolveFunction","promise","handler","removeEventListener","isEmpty","obj","Array","DialogLegacy","DEFAULTS","message","buttonCount","constructor","onButton","onHidden","buttons","result","dispose","show","alert","confirm","button","text","Dialog","create","bootstrap","Modal","selector","dialogFunction","Error","title","customContent","buttonClasses","buttonPanelClasses","escapeKeyCancels","header","footer","body","close","dialogClass","focus","onDialogCreated","htmlElement","dialog","modal","parsedButtons","i","class","Math","min","push","_hiddenHandler","_hideHandler","activeElement","blur","remove","_build_dialog","backdrop","keyboard","then","hide","_handleButton","index","buttonObject","autoHide","closeButton","tabindex","type","aria-label","buttonClass","map","dialogClasses","role","aria-hidden","data-keyboard","confirmDialog","onConfirm","onCancel","cancellable","alertDialog","onAccept","loadingDialog","canCancel","utils","assign","registerAction","action","NAME","defaults","getActionSettings","defaultsWindow","addAction","powerButton","addActionSupport","appendAction","_powerButtons","reset","current_action","actions","back_onclick","onclick","handlerClick","preventDefault","currentActionSettings","stopImmediatePropagation","onNextAction","override","click","dispatchEvent","Event","execute","entries","forEach","key","Action","register","extractOptions","prefix","targetKey","dataset","values","skipInitialized","_discover","indexOf","currentOptions","includes","onCancelActions","ActionOverride","form","overridden","buttonAccept","escapeKey","settings","bindObject","buttonClose","ActionVerify","verify","verified","notVerified","customContentVerified","customContentNotVerified","titleNotVerified","titleVerified","onVerificationSuccess","onVerificationFailure","ActionConfirm","buttonConfirm","buttonCancel","super","ActionAsyncTask","task","cancel","async","await","cancelHandler","finally","ActionShowMessage","showmessage","ActionFormset","fields","fieldname","formToSet","inputFields","elements","from","input","element","name","field","ActionFormButton","formbutton","method","formClass","convertCase","formId","cssClasses","classList","add","fieldName","pendingFields","appendChild","parentNode","replaceChild","_formObject"],"mappings":"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"}