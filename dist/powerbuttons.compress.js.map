{"version":3,"file":"powerbuttons.compress.js.map","sources":["powerbuttons.js"],"sourcesContent":["/**\n   Copyright 2023 Carlos A. (https://github.com/dealfonso)\n\n   Licensed under the Apache License, Version 2.0 (the \"License\");\n   you may not use this file except in compliance with the License.\n   You may obtain a copy of the License at\n\n       http://www.apache.org/licenses/LICENSE-2.0\n\n   Unless required by applicable law or agreed to in writing, software\n   distributed under the License is distributed on an \"AS IS\" BASIS,\n   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   See the License for the specific language governing permissions and\n   limitations under the License.\n*/\n\n(function (exports) {\n\t\"use strict\";\n\tif (typeof exports === \"undefined\") {\n\t\tvar exports = window;\n\t}\n\texports.powerButtons = function (param1, param2 = null, param3 = null) {\n\t\tlet pluginName = null;\n\t\tlet els = [];\n\t\tlet options = {};\n\n\t\tfunction registeredPlugin(pluginName) {\n\t\t\tfor (let actionName in PowerButtons.actionsRegistered) {\n\t\t\t\tif (pluginName.toLocaleLowerCase() === actionName.toLocaleLowerCase()) {\n\t\t\t\t\treturn actionName;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn null;\n\t\t}\n\t\tif (typeof param1 === \"string\") {\n\t\t\tpluginName = registeredPlugin(param1);\n\t\t\tif (pluginName === null) {\n\t\t\t\tels = document.querySelectorAll(param1);\n\t\t\t\tif (els.length === 0) {\n\t\t\t\t\tconsole.error(`Parameter ${param1} is neither the name of a registered plugin nor a valid selector`);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (arguments.length > 2) {\n\t\t\t\t\tconsole.warn(`Ignoring extra parameters`);\n\t\t\t\t}\n\t\t\t\toptions = param2;\n\t\t\t} else {\n\t\t\t\tlet valid = false;\n\t\t\t\tif (typeof param2 === \"string\") {\n\t\t\t\t\tels = document.querySelectorAll(param2);\n\t\t\t\t\tvalid = true;\n\t\t\t\t} else if (param2 instanceof HTMLElement) {\n\t\t\t\t\tels = [param2];\n\t\t\t\t\tvalid = true;\n\t\t\t\t} else if (param2.length !== undefined) {\n\t\t\t\t\tvalid = true;\n\t\t\t\t\tfor (let e in param2) {\n\t\t\t\t\t\tif (!(param2[e] instanceof HTMLElement)) {\n\t\t\t\t\t\t\tvalid = false;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (valid) {\n\t\t\t\t\t\tels = param2;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (!valid) {\n\t\t\t\t\tconsole.error(`Parameter ${param2} is neither a valid selector, a list of elements or an HTMLElement`);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\toptions = param3;\n\t\t\t}\n\t\t} else if (param1 instanceof HTMLElement) {\n\t\t\tels = [param1];\n\t\t} else if (param1.length !== undefined) {\n\t\t\tfor (let e in param1) {\n\t\t\t\tif (!(param1[e] instanceof HTMLElement)) {\n\t\t\t\t\tconsole.error(`Parameter ${param1} is neither a valid selector, a list of elements or an HTMLElement`);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\tels = param1;\n\t\t} else {\n\t\t\tconsole.error(`Parameter ${param1} is neither a valid selector, a list of elements or an HTMLElement`);\n\t\t\treturn;\n\t\t}\n\t\tif (options === null) {\n\t\t\toptions = {};\n\t\t}\n\t\tif (typeof options !== \"object\") {\n\t\t\tconsole.error(`Options parameter must be an object`);\n\t\t\treturn;\n\t\t}\n\t\tif (pluginName !== null) {\n\t\t\tlet plugin = PowerButtons.actionsRegistered[pluginName];\n\t\t\tfor (let el of els) {\n\t\t\t\tplugin.initialize(el, options);\n\t\t\t}\n\t\t} else {\n\t\t\tPowerButtons.discover(els, options);\n\t\t}\n\t};\n\texports.powerButtons.version = \"2.2.1\";\n\texports.powerButtons.plugins = function () {\n\t\treturn Object.keys(PowerButtons.actionsRegistered);\n\t};\n\texports.powerButtons.discoverAll = function () {\n\t\tPowerButtons.discoverAll();\n\t};\n\texports.powerButtons.discover = function (els, options) {\n\t\tPowerButtons.discover(els, options);\n\t};\n\tif (document.addEventListener !== undefined) {\n\t\tdocument.addEventListener(\"DOMContentLoaded\", function (e) {\n\t\t\tPowerButtons.discoverAll();\n\t\t});\n\t}\n\tif (exports.$ !== undefined) {\n\t\texports.$.fn.powerButtons = function (pluginName, options = {}) {\n\t\t\texports.powerButtons(pluginName, this, options);\n\t\t\treturn this;\n\t\t};\n\t\texports.$.fn.powerButtons.version = exports.powerButtons.version;\n\t\texports.$.fn.powerButtons.plugins = exports.powerButtons.plugins;\n\t}\n\n\tfunction pascalToSnake(str) {\n\t\treturn str.replace(/[A-Z]/g, letter => `_${letter.toLowerCase()}`).replace(/^_*/, \"\");\n\t}\n\n\tfunction pascalToKebab(str) {\n\t\treturn str.replace(/[A-Z]/g, letter => `-${letter.toLowerCase()}`).replace(/^-*/, \"\");\n\t}\n\n\tfunction snakeCaseToCamel(str) {\n\t\treturn str.replace(/-([a-z])/g, g => g[1].toUpperCase());\n\t}\n\n\tfunction pascalToCamel(str) {\n\t\treturn str.charAt(0).toLowerCase() + str.slice(1);\n\t}\n\n\tfunction CamelToCamel(str) {\n\t\treturn str.charAt(0).toUpperCase() + str.slice(1);\n\t}\n\n\tfunction isElement(el) {\n\t\treturn el instanceof Element || el instanceof HTMLDocument;\n\t}\n\n\tfunction parseBoolean(value) {\n\t\tif (typeof value === \"boolean\") {\n\t\t\treturn value;\n\t\t}\n\t\tif (typeof value === \"string\") {\n\t\t\tvalue = value.toLowerCase();\n\t\t\tif (value === \"true\" || value === \"yes\" || value === \"1\") {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\t\treturn !!value;\n\t}\n\n\tfunction createTag(tag, props = {}, html = null) {\n\t\tlet parts_id = tag.split(\"#\");\n\t\tlet id = null;\n\t\tif (parts_id.length == 1) {\n\t\t\ttag = parts_id[0];\n\t\t} else {\n\t\t\tparts_id[1] = parts_id[1].split(\".\");\n\t\t\tid = parts_id[1][0];\n\t\t\ttag = [parts_id[0], ...parts_id[1].slice(1)].join(\".\");\n\t\t}\n\t\tlet parts = tag.split(\".\");\n\t\ttag = parts[0];\n\t\tif (tag === \"\") {\n\t\t\ttag = \"div\";\n\t\t}\n\t\tif (typeof props === \"string\") {\n\t\t\thtml = props;\n\t\t\tprops = {};\n\t\t}\n\t\tif (html !== null) {\n\t\t\tprops.innerHTML = html;\n\t\t}\n\t\tif (id !== null) {\n\t\t\tprops.id = id;\n\t\t}\n\t\tprops.className = [props.className, ...parts.slice(1)].filter(function (e) {\n\t\t\treturn `${e}`.trim() !== \"\";\n\t\t}).join(\" \");\n\t\tlet el = document.createElement(tag);\n\t\tfor (let prop in props) {\n\t\t\tif (el[prop] !== undefined) {\n\t\t\t\tel[prop] = props[prop];\n\t\t\t} else {\n\t\t\t\tel.setAttribute(prop, props[prop]);\n\t\t\t}\n\t\t}\n\t\treturn el;\n\t}\n\n\tfunction appendToElement(el, ...args) {\n\t\tlet filtered = args.filter(e => e !== null && e !== undefined);\n\t\tel.append(...filtered);\n\t\treturn el;\n\t}\n\n\tfunction searchForm(formName) {\n\t\tlet formObject = null;\n\t\tif (formName !== null) {\n\t\t\tformObject = document.forms[formName];\n\t\t\tif (formObject === undefined) {\n\t\t\t\tformObject = document.querySelector(formName);\n\t\t\t\tif (formObject === null) {\n\t\t\t\t\tconsole.warn(`form ${formName} not found`);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (formObject !== null) {\n\t\t\tif (formObject.tagName.toLowerCase() !== \"form\") {\n\t\t\t\tconsole.warn(`form ${formName} is not a form`);\n\t\t\t}\n\t\t}\n\t\treturn formObject;\n\t}\n\n\tfunction getValueWithJavascriptSupport(value, context = null) {\n\t\tif (typeof value === \"function\") {\n\t\t\treturn value.bind(context);\n\t\t}\n\t\tif (typeof value === \"string\") {\n\t\t\tlet internalValue = value.trim();\n\t\t\tif (internalValue.startsWith(\"javascript:\")) {\n\t\t\t\ttry {\n\t\t\t\t\tlet f = internalValue.substring(11);\n\t\t\t\t\tvalue = function () {\n\t\t\t\t\t\treturn eval(f);\n\t\t\t\t\t}.bind(context);\n\t\t\t\t} catch (e) {\n\t\t\t\t\tconsole.error(`Error executing javascript code ${internalValue.substring(11)}, error: ${e}`);\n\t\t\t\t\tvalue = null;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn value;\n\t}\n\n\tfunction promiseForEvent(el, event) {\n\t\tlet resolveFunction = null;\n\t\tlet promise = new Promise(resolve => {\n\t\t\tresolveFunction = resolve;\n\t\t});\n\t\tlet handler = function () {\n\t\t\tel.removeEventListener(event, handler);\n\t\t\tresolveFunction();\n\t\t};\n\t\tel.addEventListener(event, handler);\n\t\treturn promise;\n\t}\n\n\tfunction isEmpty(obj) {\n\t\tif (obj === null || obj === undefined) {\n\t\t\treturn true;\n\t\t}\n\t\tif (obj instanceof Array) {\n\t\t\treturn obj.length === 0;\n\t\t}\n\t\tif (obj instanceof Object) {\n\t\t\treturn Object.keys(obj).length === 0;\n\t\t}\n\t\tif (typeof obj === \"string\") {\n\t\t\treturn obj.trim() === \"\";\n\t\t}\n\t\treturn false;\n\t}\n\tclass DialogLegacy {\n\t\tDEFAULTS = {\n\t\t\tmessage: \"Main message\",\n\t\t\tbuttonCount: 2\n\t\t};\n\t\tconstructor(options = {}, onButton = null, onHidden = null) {\n\t\t\tthis.options = {\n\t\t\t\t...this.DEFAULTS,\n\t\t\t\t...options\n\t\t\t};\n\t\t\tthis.buttonCount = this.options.buttons.length;\n\t\t\tthis.options.buttons = [\"Accept\", \"Cancel\"];\n\t\t\tthis.result = null;\n\t\t\tthis.onButton = onButton;\n\t\t\tthis.onHidden = onHidden;\n\t\t}\n\t\tdispose() {}\n\t\tshow(onButton = null, onHidden = null) {\n\t\t\tif (onButton !== null) {\n\t\t\t\tthis.onButton = onButton;\n\t\t\t}\n\t\t\tif (onHidden !== null) {\n\t\t\t\tthis.onHidden = onHidden;\n\t\t\t}\n\t\t\tswitch (this.buttonCount) {\n\t\t\tcase 0:\n\t\t\tcase 1:\n\t\t\t\talert(this.message);\n\t\t\t\tthis.result = 0;\n\t\t\t\tbreak;\n\t\t\tcase 2:\n\t\t\t\tthis.result = confirm(this.options.message) ? 0 : 1;\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tthrow `Unsupported button count ${this.buttonCount}`;\n\t\t\t}\n\t\t\tif (this.onButton !== null) {\n\t\t\t\tthis.onButton(this.result, {\n\t\t\t\t\tbutton: this.result,\n\t\t\t\t\ttext: this.options.buttons[this.result]\n\t\t\t\t}, null);\n\t\t\t}\n\t\t\tif (this.onHidden !== null) {\n\t\t\t\tthis.onHidden(this.result, {\n\t\t\t\t\tbutton: this.result,\n\t\t\t\t\ttext: this.options.buttons[this.result]\n\t\t\t\t}, null);\n\t\t\t}\n\t\t}\n\t}\n\tclass Dialog {\n\t\tstatic create(options = {}, onButton = null, onHidden = null) {\n\t\t\tif (exports.bootstrap === undefined || exports.bootstrap.Modal === undefined) {\n\t\t\t\treturn new DialogLegacy(options, onButton, onHidden);\n\t\t\t}\n\t\t\tif (options.selector !== undefined && options.selector !== null || options.dialogFunction !== undefined && options.dialogFunction !== null) {\n\t\t\t\tthrow new Error(\"not implemented, yet\");\n\t\t\t}\n\t\t\treturn new Dialog(options, onButton, onHidden);\n\t\t}\n\t\tDEFAULTS = {\n\t\t\ttitle: \"Title\",\n\t\t\tmessage: \"Main message\",\n\t\t\tcustomContent: null,\n\t\t\tbuttons: [\"Accept\"],\n\t\t\tbuttonClasses: [\"btn-primary\", \"btn-secondary\"],\n\t\t\tbuttonPanelClasses: [\"text-end\"],\n\t\t\tescapeKeyCancels: true,\n\t\t\theader: true,\n\t\t\tfooter: true,\n\t\t\tbody: true,\n\t\t\tclose: true,\n\t\t\tdialogClass: \"\",\n\t\t\tfocus: \"\"\n\t\t};\n\t\tdialog = null;\n\t\toptions = null;\n\t\tmodal = null;\n\t\tonButton = null;\n\t\tresult = null;\n\t\tonHidden = null;\n\t\tonButton = null;\n\t\tconstructor(options = {}, onButton = null, onHidden = null) {\n\t\t\tif (exports.bootstrap === undefined || exports.bootstrap.Modal === undefined) {\n\t\t\t\tthrow new Error(\"Bootstrap is required to use this class\");\n\t\t\t}\n\t\t\tthis.options = {\n\t\t\t\t...this.DEFAULTS,\n\t\t\t\t...options\n\t\t\t};\n\t\t\tlet parsedButtons = [];\n\t\t\tfor (let i = 0; i < this.options.buttons.length; i++) {\n\t\t\t\tlet button = this.options.buttons[i];\n\t\t\t\tif (typeof button === \"string\") {\n\t\t\t\t\tbutton = {\n\t\t\t\t\t\ttext: button\n\t\t\t\t\t};\n\t\t\t\t} else {\n\t\t\t\t\tif (button.text === undefined) {\n\t\t\t\t\t\tbutton.text = `Button ${i}`;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (button.class === undefined) {\n\t\t\t\t\tbutton.class = this.options.buttonClasses[Math.min(i, this.options.buttonClasses.length - 1)];\n\t\t\t\t}\n\t\t\t\tparsedButtons.push(button);\n\t\t\t}\n\t\t\tthis.options.buttons = parsedButtons;\n\t\t\tthis.dialog = null;\n\t\t\tthis.modal = null;\n\t\t\tthis.result = null;\n\t\t\tthis.onButton = onButton;\n\t\t\tthis.onHidden = onHidden;\n\t\t\tthis._hiddenHandler = this._hiddenHandler.bind(this);\n\t\t\tthis._hideHandler = this._hideHandler.bind(this);\n\t\t}\n\t\t_hiddenHandler() {\n\t\t\tthis.dialog.removeEventListener(\"hidden.bs.modal\", this._hiddenHandler);\n\t\t\tif (this.onHidden !== null) {\n\t\t\t\tif (this.result !== null && this.result >= 0) {\n\t\t\t\t\tthis.onHidden(this.result, {\n\t\t\t\t\t\tbutton: this.result,\n\t\t\t\t\t\ttext: this.options.buttons[this.result]\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tthis.onHidden(this.result, null);\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.dispose();\n\t\t}\n\t\t_hideHandler() {\n\t\t\tthis.dialog.removeEventListener(\"hide.bs.modal\", this._hideHandler);\n\t\t\tif (document.activeElement) {\n\t\t\t\tdocument.activeElement.blur();\n\t\t\t}\n\t\t}\n\t\tdispose() {\n\t\t\tif (this.modal !== null) {\n\t\t\t\tthis.modal.dispose();\n\t\t\t\tthis.modal = null;\n\t\t\t}\n\t\t\tthis.dialog.remove();\n\t\t\tthis.dialog = null;\n\t\t}\n\t\tshow(onButton = null, onHidden = null) {\n\t\t\tif (this.dialog === null) {\n\t\t\t\tthis.dialog = this._build_dialog(this.options);\n\t\t\t}\n\t\t\tif (this.modal === null) {\n\t\t\t\tthis.modal = new bootstrap.Modal(this.dialog, {\n\t\t\t\t\tbackdrop: this.options.escapeKeyCancels ? true : \"static\",\n\t\t\t\t\tkeyboard: this.options.escapeKeyCancels\n\t\t\t\t});\n\t\t\t}\n\t\t\tthis.dialog.addEventListener(\"hidden.bs.modal\", this._hiddenHandler);\n\t\t\tthis.dialog.addEventListener(\"hide.bs.modal\", this._hideHandler);\n\t\t\tthis.result = null;\n\t\t\tif (onButton !== null) {\n\t\t\t\tthis.onButton = onButton;\n\t\t\t}\n\t\t\tif (onHidden !== null) {\n\t\t\t\tthis.onHidden = onHidden;\n\t\t\t}\n\t\t\tthis.modal.show();\n\t\t\treturn promiseForEvent(this.dialog, \"shown.bs.modal\").then(() => {\n\t\t\t\tif (this.options.focus !== \"\") {\n\t\t\t\t\tthis.dialog.querySelector(this.options.focus)?.focus();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\thide() {\n\t\t\tthis.modal.hide();\n\t\t\treturn promiseForEvent(this.dialog, \"hidden.bs.modal\");\n\t\t}\n\t\t_handleButton(index, button, buttonObject) {\n\t\t\tthis.result = index;\n\t\t\tlet autoHide = true;\n\t\t\tif (this.onButton !== null) {\n\t\t\t\tautoHide = !(this.onButton(index, button, buttonObject) === false);\n\t\t\t}\n\t\t\tif (autoHide) {\n\t\t\t\tthis.hide();\n\t\t\t}\n\t\t}\n\t\t_build_dialog(options = {}) {\n\t\t\tlet header = null;\n\t\t\tlet closeButton = null;\n\t\t\tif (parseBoolean(options.close)) {\n\t\t\t\tcloseButton = createTag(\"button.close.btn-close\", {\n\t\t\t\t\ttabindex: \"-1\",\n\t\t\t\t\ttype: \"button\",\n\t\t\t\t\t\"aria-label\": \"Close\"\n\t\t\t\t});\n\t\t\t\tcloseButton.addEventListener(\"click\", () => this._handleButton(-1, null, closeButton));\n\t\t\t}\n\t\t\tif (parseBoolean(options.header)) {\n\t\t\t\theader = createTag(\".modal-header\");\n\t\t\t\tif (options.title !== null) {\n\t\t\t\t\theader.append(appendToElement(createTag(\".modal-title\"), appendToElement(createTag(\"h5\", options.title))));\n\t\t\t\t}\n\t\t\t\tif (parseBoolean(options.close)) {\n\t\t\t\t\theader.append(closeButton);\n\t\t\t\t}\n\t\t\t}\n\t\t\tlet buttons = [];\n\t\t\tif (options.buttons !== null) {\n\t\t\t\tfor (let i = 0; i < options.buttons.length; i++) {\n\t\t\t\t\tlet button = options.buttons[i];\n\t\t\t\t\tlet buttonClass = button.class.split(\" \").map(e => e.trim()).filter(e => e !== \"\").join(\".\");\n\t\t\t\t\tif (options.footer === false) {\n\t\t\t\t\t\tbuttonClass += \".mx-1\";\n\t\t\t\t\t}\n\t\t\t\t\tif (buttonClass !== \"\") {\n\t\t\t\t\t\tbuttonClass = \".\" + buttonClass;\n\t\t\t\t\t}\n\t\t\t\t\tlet buttonObject = createTag(\"button.btn\" + buttonClass + \".button\" + i, {\n\t\t\t\t\t\ttype: \"button\",\n\t\t\t\t\t\ttabindex: i + 1\n\t\t\t\t\t}, button.text);\n\t\t\t\t\tbuttonObject.addEventListener(\"click\", function () {\n\t\t\t\t\t\tthis._handleButton(i, button, buttonObject);\n\t\t\t\t\t\tif (button.handler !== undefined && button.handler !== null) {\n\t\t\t\t\t\t\tbutton.handler(i, button, buttonObject);\n\t\t\t\t\t\t}\n\t\t\t\t\t}.bind(this));\n\t\t\t\t\tbuttons.push(buttonObject);\n\t\t\t\t}\n\t\t\t}\n\t\t\tlet footer = null;\n\t\t\tif (parseBoolean(options.footer)) {\n\t\t\t\tfooter = appendToElement(createTag(\".modal-footer\"), ...buttons);\n\t\t\t}\n\t\t\tlet body = null;\n\t\t\tif (parseBoolean(options.body)) {\n\t\t\t\tbody = createTag(\".modal-body\");\n\t\t\t\tif (header === null) {\n\t\t\t\t\tif (parseBoolean(options.close)) {\n\t\t\t\t\t\tbody.append(appendToElement(createTag(\".text-end\"), closeButton));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (options.message !== null) {\n\t\t\t\t\tbody.append(createTag(\"p.message.text-center\", options.message));\n\t\t\t\t}\n\t\t\t\tif (options.customContent !== null) {\n\t\t\t\t\tbody.append(createTag(\".custom-content.mx-auto\", options.customContent));\n\t\t\t\t}\n\t\t\t\tif (footer === null) {\n\t\t\t\t\tlet buttonPanelClasses = options.buttonPanelClasses.map(e => e.trim()).filter(e => e !== \"\").join(\".\");\n\t\t\t\t\tif (buttonPanelClasses !== \"\") {\n\t\t\t\t\t\tbuttonPanelClasses = \".\" + buttonPanelClasses;\n\t\t\t\t\t}\n\t\t\t\t\tappendToElement(body, appendToElement(createTag(\".buttons\" + buttonPanelClasses), ...buttons));\n\t\t\t\t}\n\t\t\t}\n\t\t\tlet dialogClasses = options.dialogClass.split(\" \").map(e => e.trim()).filter(e => e !== \"\").join(\".\");\n\t\t\tif (dialogClasses !== \"\") {\n\t\t\t\tdialogClasses = \".\" + dialogClasses;\n\t\t\t}\n\t\t\tlet dialog = appendToElement(createTag(dialogClasses + \".modal.draggable.fade\", {\n\t\t\t\ttabindex: \"-1\",\n\t\t\t\trole: \"dialog\",\n\t\t\t\t\"aria-hidden\": \"true\",\n\t\t\t\t\"data-keyboard\": \"false\"\n\t\t\t}), appendToElement(createTag(\".modal-dialog.modal-dialog-centered\", {\n\t\t\t\trole: \"document\"\n\t\t\t}), appendToElement(createTag(\".modal-content\"), header, body, footer)));\n\t\t\treturn dialog;\n\t\t}\n\t}\n\n\tfunction confirmDialog(message, title = \"this action needs confirmation\", onConfirm = null, onCancel = null, cancellable = true) {\n\t\tlet dialog = new Dialog({\n\t\t\ttitle: title,\n\t\t\tmessage: message,\n\t\t\tbuttons: [{\n\t\t\t\ttext: \"Cancel\",\n\t\t\t\tclass: \"btn-secondary\",\n\t\t\t\thandler: onCancel\n\t\t\t}, {\n\t\t\t\ttext: \"Confirm\",\n\t\t\t\tclass: \"btn-primary\",\n\t\t\t\thandler: onConfirm\n\t\t\t}],\n\t\t\tescapeKeyCancels: cancellable\n\t\t});\n\t\tdialog.show();\n\t\treturn dialog;\n\t}\n\n\tfunction alertDialog(message, title = \"Alert\", onAccept = null) {\n\t\tlet dialog = new Dialog({\n\t\t\ttitle: title,\n\t\t\tmessage: message,\n\t\t\tbuttons: [{\n\t\t\t\ttext: \"Accept\",\n\t\t\t\tclass: \"btn-primary\",\n\t\t\t\thandler: onAccept\n\t\t\t}],\n\t\t\tescapeKeyCancels: true\n\t\t});\n\t\tdialog.show();\n\t\treturn dialog;\n\t}\n\n\tfunction loadingDialog(message, customContent = null, canCancel = null) {\n\t\tif (typeof customContent === \"function\") {\n\t\t\tcanCancel = customContent;\n\t\t\tcustomContent = null;\n\t\t}\n\t\tlet dialog = new Dialog({\n\t\t\ttitle: null,\n\t\t\tmessage: message,\n\t\t\tbuttons: [{\n\t\t\t\ttext: \"Cancel\",\n\t\t\t\tclass: \"btn-primary\"\n\t\t\t}],\n\t\t\tcustomContent: customContent,\n\t\t\tescapeKeyCancels: false,\n\t\t\tclose: false,\n\t\t\theader: false,\n\t\t\tfooter: false\n\t\t}, canCancel);\n\t\tdialog.show();\n\t\treturn dialog;\n\t}\n\tif (exports.powerButtons.utils === undefined) {\n\t\texports.powerButtons.utils = {};\n\t}\n\tObject.assign(exports.powerButtons.utils, {\n\t\tconfirmDialog: confirmDialog,\n\t\talertDialog: alertDialog,\n\t\tloadingDialog: loadingDialog\n\t});\n\tclass PowerButtons {\n\t\tstatic actionsRegistered = {};\n\t\tstatic registerAction(action) {\n\t\t\tthis.actionsRegistered[action.NAME.toLowerCase()] = action;\n\t\t\tif (exports.powerButtons === undefined) {\n\t\t\t\texports.powerButtons = {};\n\t\t\t}\n\t\t\tif (exports.powerButtons.defaults === undefined) {\n\t\t\t\texports.powerButtons.defaults = {};\n\t\t\t}\n\t\t\texports.powerButtons.defaults[action.NAME.toLowerCase()] = Object.assign({}, action.DEFAULTS);\n\t\t}\n\t\tstatic getActionSettings(action, options) {\n\t\t\tif (this.actionsRegistered[action.NAME.toLowerCase()] === undefined) {\n\t\t\t\tconsole.error(`The action ${action.NAME} is not registered`);\n\t\t\t\treturn {};\n\t\t\t}\n\t\t\tlet defaultsWindow = {};\n\t\t\tif (exports.powerButtons !== undefined && exports.powerButtons.defaults !== undefined && exports.powerButtons.defaults[action.NAME.toLowerCase()] !== undefined) {\n\t\t\t\tdefaultsWindow = exports.powerButtons.defaults[action.NAME.toLowerCase()];\n\t\t\t}\n\t\t\treturn Object.assign({}, action.DEFAULTS, defaultsWindow, options);\n\t\t}\n\t\tstatic addAction(el, options = {}) {\n\t\t\tlet powerButton = PowerButtons.addActionSupport(el);\n\t\t\tpowerButton.appendAction(options);\n\t\t}\n\t\tstatic addActionSupport(el) {\n\t\t\tif (el._powerButtons === undefined) {\n\t\t\t\tel._powerButtons = new PowerButtons(el);\n\t\t\t} else {\n\t\t\t\tel._powerButtons.reset();\n\t\t\t}\n\t\t\treturn el._powerButtons;\n\t\t}\n\t\tel = null;\n\t\tcurrent_action = 0;\n\t\tactions = [];\n\t\tback_onclick = null;\n\t\tconstructor(el) {\n\t\t\tel._powerButtons = this;\n\t\t\tthis.el = el;\n\t\t\tthis.current_action = 0;\n\t\t\tthis.actions = [];\n\t\t\tthis.back_onclick = null;\n\t\t\tif (el.onclick !== undefined && el.onclick !== null) {\n\t\t\t\tthis.back_onclick = el.onclick;\n\t\t\t\tel.onclick = null;\n\t\t\t}\n\t\t\tel.addEventListener(\"click\", this.handlerClick.bind(this));\n\t\t}\n\t\tappendAction(options = {}) {\n\t\t\tif (options.type === undefined) {\n\t\t\t\tthrow \"The type of the action is mandatory\";\n\t\t\t}\n\t\t\tthis.actions.push(options);\n\t\t}\n\t\thandlerClick(e) {\n\t\t\tif (this.current_action >= this.actions.length) {\n\t\t\t\tthis.current_action = 0;\n\t\t\t\tif (typeof this.back_onclick === \"function\") {\n\t\t\t\t\tif (!this.back_onclick()) {\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tlet currentActionSettings = this.actions[this.current_action];\n\t\t\te.preventDefault();\n\t\t\te.stopImmediatePropagation();\n\t\t\tlet onNextAction = function (override = false) {\n\t\t\t\tif (override) {\n\t\t\t\t\tthis.current_action = this.actions.length;\n\t\t\t\t} else {\n\t\t\t\t\tthis.current_action++;\n\t\t\t\t}\n\t\t\t\tif (this.current_action >= this.actions.length) {\n\t\t\t\t\tif (this.el.click !== undefined) {\n\t\t\t\t\t\tthis.el.click();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.el.dispatchEvent(new Event(e.type, e));\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tthis.el.dispatchEvent(new Event(e.type, e));\n\t\t\t\t}\n\t\t\t}.bind(this);\n\t\t\tlet action = this.constructor.actionsRegistered[currentActionSettings.type];\n\t\t\tif (action === undefined) {\n\t\t\t\tthrow `The action ${currentActionSettings.type} is not registered`;\n\t\t\t}\n\t\t\taction.execute(this.el, currentActionSettings, onNextAction, () => this.reset());\n\t\t}\n\t\treset() {\n\t\t\tthis.current_action = 0;\n\t\t}\n\t\tstatic discoverAll() {\n\t\t\tObject.entries(this.actionsRegistered).forEach(([key, action]) => {\n\t\t\t\taction.discoverAll();\n\t\t\t});\n\t\t}\n\t\tstatic discover(els, options = {}) {\n\t\t\tObject.entries(this.actionsRegistered).forEach(([key, action]) => {\n\t\t\t\taction.discover(els, options);\n\t\t\t});\n\t\t}\n\t}\n\tclass Action {\n\t\tstatic NAME = null;\n\t\tstatic register() {\n\t\t\tPowerButtons.registerAction(this);\n\t\t}\n\t\tstatic DEFAULTS = {};\n\t\tstatic extractOptions(el, prefix = null, map = null) {\n\t\t\tif (prefix === null) {\n\t\t\t\tprefix = this.NAME.toLowerCase();\n\t\t\t}\n\t\t\tif (map === null) {\n\t\t\t\tmap = {};\n\t\t\t\tmap[prefix] = prefix;\n\t\t\t}\n\t\t\tlet options = {};\n\t\t\tfor (let key in this.DEFAULTS) {\n\t\t\t\tlet targetKey = key;\n\t\t\t\tif (map[targetKey] !== undefined) {\n\t\t\t\t\ttargetKey = map[targetKey];\n\t\t\t\t} else {\n\t\t\t\t\ttargetKey = prefix + CamelToCamel(targetKey);\n\t\t\t\t}\n\t\t\t\tif (el.dataset[targetKey] !== undefined) {\n\t\t\t\t\toptions[key] = el.dataset[targetKey];\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn options;\n\t\t}\n\t\tstatic initialize(el, values = {}) {\n\t\t\tPowerButtons.addAction(el, Object.assign({\n\t\t\t\ttype: this.NAME.toLowerCase()\n\t\t\t}, values));\n\t\t}\n\t\tstatic discoverAll() {\n\t\t\tlet prefix = this.NAME.toLowerCase();\n\t\t\tthis.discover(document.querySelectorAll(`[data-${prefix}]`));\n\t\t}\n\t\tstatic discover(els, options = {}, skipInitialized = true) {\n\t\t\tif (els.length === undefined) {\n\t\t\t\tels = [els];\n\t\t\t}\n\t\t\tlet prefix = this.NAME.toLowerCase();\n\t\t\tfor (let el of els) {\n\t\t\t\tif (skipInitialized && el._powerButtons !== undefined && el._powerButtons._discover !== undefined && el._powerButtons._discover.indexOf(prefix) !== -1) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tif (el.dataset[prefix] === undefined) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tlet currentOptions = Object.assign(this.extractOptions(el, prefix), options);\n\t\t\t\tthis.initialize(el, currentOptions);\n\t\t\t\tif (el._powerButtons !== undefined) {\n\t\t\t\t\tif (el._powerButtons._discover === undefined) {\n\t\t\t\t\t\tel._powerButtons._discover = [];\n\t\t\t\t\t}\n\t\t\t\t\tif (!el._powerButtons._discover.includes(prefix)) {\n\t\t\t\t\t\tel._powerButtons._discover.push(prefix);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tstatic execute(el, options, onNextAction, onCancelActions) {\n\t\t\tthrow new Error(\"The execute method must be implemented by the derived class\");\n\t\t}\n\t}\n\tclass ActionOverride extends Action {\n\t\tstatic NAME = \"Override\";\n\t\tstatic DEFAULTS = {\n\t\t\toverride: null,\n\t\t\tform: null,\n\t\t\toverridden: null,\n\t\t\tcustomContent: null,\n\t\t\ttitle: null,\n\t\t\tbuttonAccept: \"Accept\",\n\t\t\tescapeKey: true,\n\t\t\tdialogClass: \"\",\n\t\t\tfocus: \"\"\n\t\t};\n\t\tstatic execute(el, options, onNextAction, onCancelActions) {\n\t\t\tlet settings = PowerButtons.getActionSettings(this, options);\n\t\t\tlet result = null;\n\t\t\tlet bindObject = searchForm(settings.form);\n\t\t\tif (bindObject === null) {\n\t\t\t\tbindObject = document;\n\t\t\t}\n\t\t\ttry {\n\t\t\t\tif (typeof settings.override === \"function\") {\n\t\t\t\t\tresult = settings.override.bind(bindObject)();\n\t\t\t\t} else if (typeof settings.override === \"string\") {\n\t\t\t\t\tresult = function () {\n\t\t\t\t\t\treturn eval(settings.override);\n\t\t\t\t\t}.bind(bindObject)();\n\t\t\t\t} else {\n\t\t\t\t\tresult = parseBoolean(settings.override);\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\tconsole.error(\"Error executing override function\", e);\n\t\t\t\tresult = false;\n\t\t\t}\n\t\t\tif (result) {\n\t\t\t\tif (settings.overridden !== null || settings.customContent !== null || settings.title !== null) {\n\t\t\t\t\tlet dialog = null;\n\t\t\t\t\tdialog = Dialog.create({\n\t\t\t\t\t\ttitle: settings.title,\n\t\t\t\t\t\tmessage: settings.overridden,\n\t\t\t\t\t\tcustomContent: settings.customContent,\n\t\t\t\t\t\tbuttons: [settings.buttonAccept],\n\t\t\t\t\t\tescapeKeyCancels: settings.escapeKey,\n\t\t\t\t\t\tclose: settings.buttonClose,\n\t\t\t\t\t\tdialogClass: settings.dialogClass,\n\t\t\t\t\t\tfocus: settings.focus\n\t\t\t\t\t}, null, function (result) {\n\t\t\t\t\t\tonNextAction(true);\n\t\t\t\t\t});\n\t\t\t\t\tdialog.show();\n\t\t\t\t} else {\n\t\t\t\t\tonNextAction(true);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tonNextAction();\n\t\t\t}\n\t\t}\n\t}\n\tActionOverride.register();\n\tclass ActionVerify extends Action {\n\t\tstatic NAME = \"Verify\";\n\t\tstatic DEFAULTS = {\n\t\t\tverify: null,\n\t\t\tform: null,\n\t\t\tverified: null,\n\t\t\tnotVerified: \"The condition for this action is not met\",\n\t\t\tcustomContentVerified: null,\n\t\t\tcustomContentNotVerified: null,\n\t\t\ttitleNotVerified: \"The action requires verification\",\n\t\t\ttitleVerified: null,\n\t\t\tbuttonAccept: \"Accept\",\n\t\t\tbuttonClose: false,\n\t\t\tescapeKey: true,\n\t\t\tdialogClass: \"\",\n\t\t\tfocus: \"\"\n\t\t};\n\t\tstatic execute(el, options, onNextAction, onCancelActions) {\n\t\t\tlet settings = PowerButtons.getActionSettings(this, options);\n\t\t\tlet result = null;\n\t\t\tlet bindObject = searchForm(settings.form);\n\t\t\tif (bindObject === null) {\n\t\t\t\tbindObject = document;\n\t\t\t}\n\t\t\ttry {\n\t\t\t\tif (typeof settings.verify === \"function\") {\n\t\t\t\t\tresult = settings.verify.bind(bindObject)();\n\t\t\t\t} else if (typeof settings.verify === \"string\") {\n\t\t\t\t\tresult = function () {\n\t\t\t\t\t\treturn eval(settings.verify);\n\t\t\t\t\t}.bind(bindObject)();\n\t\t\t\t} else {\n\t\t\t\t\tresult = parseBoolean(settings.verify);\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\tconsole.error(\"Error executing verification function\", e);\n\t\t\t\tresult = false;\n\t\t\t}\n\t\t\tlet dialog = null;\n\t\t\tlet onVerificationSuccess = onNextAction;\n\t\t\tlet onVerificationFailure = onCancelActions;\n\t\t\tif (result) {\n\t\t\t\tif (settings.verified !== null || settings.customContentVerified !== null || settings.titleVerified !== null) {\n\t\t\t\t\tdialog = Dialog.create({\n\t\t\t\t\t\ttitle: settings.titleVerified,\n\t\t\t\t\t\tmessage: settings.verified,\n\t\t\t\t\t\tcustomContent: settings.customContentVerified,\n\t\t\t\t\t\tbuttons: [settings.buttonAccept],\n\t\t\t\t\t\tescapeKeyCancels: settings.escapeKey,\n\t\t\t\t\t\tclose: settings.buttonClose,\n\t\t\t\t\t\tdialogClass: settings.dialogClass,\n\t\t\t\t\t\tfocus: settings.focus\n\t\t\t\t\t}, null, function (result) {\n\t\t\t\t\t\tif (onVerificationSuccess !== null) {\n\t\t\t\t\t\t\tonVerificationSuccess();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (settings.notVerified !== null || settings.customContentNotVerified !== null || settings.titleNotVerified !== null) {\n\t\t\t\t\tdialog = Dialog.create({\n\t\t\t\t\t\ttitle: settings.titleNotVerified,\n\t\t\t\t\t\tmessage: settings.notVerified,\n\t\t\t\t\t\tcustomContent: settings.customContentNotVerified,\n\t\t\t\t\t\tbuttons: [settings.buttonAccept],\n\t\t\t\t\t\tescapeKeyCancels: settings.escapeKey,\n\t\t\t\t\t\tclose: settings.buttonClose,\n\t\t\t\t\t\tdialogClass: settings.dialogClass,\n\t\t\t\t\t\tfocus: settings.focus\n\t\t\t\t\t}, null, function (result) {\n\t\t\t\t\t\tif (onVerificationFailure !== null) {\n\t\t\t\t\t\t\tonVerificationFailure();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (dialog !== null) {\n\t\t\t\tdialog.show();\n\t\t\t} else {\n\t\t\t\tif (result) {\n\t\t\t\t\tif (onVerificationSuccess !== null) {\n\t\t\t\t\t\tonVerificationSuccess();\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif (onVerificationFailure !== null) {\n\t\t\t\t\t\tonVerificationFailure();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tActionVerify.register();\n\tclass ActionConfirm extends Action {\n\t\tstatic NAME = \"Confirm\";\n\t\tstatic DEFAULTS = {\n\t\t\tconfirm: \"Please confirm this action\",\n\t\t\tcustomContent: null,\n\t\t\ttitle: \"The action requires confirmation\",\n\t\t\tbuttonConfirm: \"Confirm\",\n\t\t\tbuttonCancel: \"Cancel\",\n\t\t\tbuttonClose: true,\n\t\t\tonConfirm: null,\n\t\t\tescapeKey: true,\n\t\t\tdialogClass: \"\",\n\t\t\tfocus: \"\"\n\t\t};\n\t\tstatic extractOptions(el, prefix = null, map = null) {\n\t\t\tlet options = super.extractOptions(el, prefix, map);\n\t\t\tif (options.confirm.trim() == \"\") {\n\t\t\t\tdelete options.confirm;\n\t\t\t}\n\t\t\treturn options;\n\t\t}\n\t\tstatic execute(el, options, onNextAction, onCancelActions) {\n\t\t\tlet settings = PowerButtons.getActionSettings(this, options);\n\t\t\tlet dialog = Dialog.create({\n\t\t\t\ttitle: settings.title,\n\t\t\t\tmessage: settings.confirm,\n\t\t\t\tcustomContent: settings.customContent,\n\t\t\t\tbuttons: [settings.buttonConfirm, settings.buttonCancel],\n\t\t\t\tescapeKeyCancels: settings.escapeKey,\n\t\t\t\tclose: settings.buttonClose,\n\t\t\t\tdialogClass: settings.dialogClass,\n\t\t\t\tfocus: settings.focus\n\t\t\t}, null, function (result) {\n\t\t\t\tif (result === 0) {\n\t\t\t\t\tif (settings.onConfirm !== null) {\n\t\t\t\t\t\tlet result = null;\n\t\t\t\t\t\tif (typeof settings.onConfirm === \"function\") {\n\t\t\t\t\t\t\tresult = settings.onConfirm.bind(document)();\n\t\t\t\t\t\t} else if (typeof settings.onConfirm === \"string\") {\n\t\t\t\t\t\t\tresult = function () {\n\t\t\t\t\t\t\t\treturn eval(settings.onConfirm);\n\t\t\t\t\t\t\t}.bind(document)();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (onNextAction !== null) {\n\t\t\t\t\t\tonNextAction();\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif (onCancelActions !== null) {\n\t\t\t\t\t\tonCancelActions();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t\tdialog.show();\n\t\t}\n\t}\n\tActionConfirm.register();\n\tclass ActionAsyncTask extends Action {\n\t\tstatic NAME = \"AsyncTask\";\n\t\tstatic DEFAULTS = {\n\t\t\ttask: null,\n\t\t\tmessage: \"Please wait...\",\n\t\t\tcustomContent: null,\n\t\t\ttitle: null,\n\t\t\tbuttonCancel: \"Cancel\",\n\t\t\tcancel: null,\n\t\t\theader: true,\n\t\t\tfooter: true,\n\t\t\tdialogClass: \"\",\n\t\t\tfocus: \"\"\n\t\t};\n\t\tstatic extractOptions(el, prefix = null, map = null) {\n\t\t\treturn super.extractOptions(el, prefix, {\n\t\t\t\ttask: \"asynctask\"\n\t\t\t});\n\t\t}\n\t\tstatic execute(el, options, onNextAction, onCancelActions) {\n\t\t\tlet settings = PowerButtons.getActionSettings(this, options);\n\t\t\tif (settings.task === null) {\n\t\t\t\tconsole.error(\"The task to execute cannot be null\");\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tlet task = null;\n\t\t\tif (typeof settings.task === \"string\") {\n\t\t\t\ttask = async function () {\n\t\t\t\t\treturn await eval(settings.task);\n\t\t\t\t};\n\t\t\t} else if (typeof settings.task === \"function\") {\n\t\t\t\ttask = settings.task;\n\t\t\t} else {\n\t\t\t\tconsole.error(\"The task to execute must be either a string or a function\");\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tlet buttons = [];\n\t\t\tlet cancelHandler = null;\n\t\t\tif (settings.cancel !== null) {\n\t\t\t\tbuttons = [settings.buttonCancel];\n\t\t\t\tif (typeof settings.cancel === \"string\") {\n\t\t\t\t\tcancelHandler = function () {\n\t\t\t\t\t\teval(settings.cancel);\n\t\t\t\t\t};\n\t\t\t\t} else if (typeof settings.cancel === \"function\") {\n\t\t\t\t\tcancelHandler = settings.cancel;\n\t\t\t\t} else {\n\t\t\t\t\tconsole.error(\"The cancel handler must be either a string or a function\");\n\t\t\t\t}\n\t\t\t}\n\t\t\tlet dialog = Dialog.create({\n\t\t\t\ttitle: settings.title,\n\t\t\t\tmessage: settings.message,\n\t\t\t\tcustomContent: settings.customContent,\n\t\t\t\tbuttons: buttons,\n\t\t\t\tescapeKeyCancels: false,\n\t\t\t\tclose: false,\n\t\t\t\theader: options.header !== undefined ? settings.header : settings.title !== null && settings.title != \"\",\n\t\t\t\tfooter: options.footer !== undefined ? settings.footer : cancelHandler !== null,\n\t\t\t\tdialogClass: settings.dialogClass,\n\t\t\t\tfocus: settings.focus\n\t\t\t}, function () {\n\t\t\t\tcancelHandler();\n\t\t\t\tonCancelActions();\n\t\t\t}, function (result) {\n\t\t\t\tif (onNextAction !== null) {\n\t\t\t\t\tonNextAction();\n\t\t\t\t}\n\t\t\t});\n\t\t\tdialog.show().then(function () {\n\t\t\t\ttask().finally(function () {\n\t\t\t\t\tdialog.hide();\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t}\n\tActionAsyncTask.register();\n\tclass ActionShowMessage extends Action {\n\t\tstatic NAME = \"ShowMessage\";\n\t\tstatic DEFAULTS = {\n\t\t\tshowmessage: \"This is a message\",\n\t\t\tcustomContent: null,\n\t\t\ttitle: null,\n\t\t\tbuttonAccept: \"Accept\",\n\t\t\tescapeKey: true,\n\t\t\tbuttonClose: true,\n\t\t\theader: true,\n\t\t\tfooter: true,\n\t\t\tdialogClass: \"\",\n\t\t\tfocus: \"\"\n\t\t};\n\t\tstatic execute(el, options, onNextAction, onCancelActions) {\n\t\t\tlet settings = PowerButtons.getActionSettings(this, options);\n\t\t\tlet dialog = Dialog.create({\n\t\t\t\ttitle: settings.title,\n\t\t\t\tmessage: settings.showmessage,\n\t\t\t\tcustomContent: settings.customContent,\n\t\t\t\tbuttons: [settings.buttonAccept],\n\t\t\t\tescapeKeyCancels: settings.escapeKey,\n\t\t\t\tclose: settings.buttonClose,\n\t\t\t\theader: options.header !== undefined ? settings.header : settings.title !== null && settings.title != \"\",\n\t\t\t\tfooter: options.footer !== undefined ? settings.footer : settings.buttonAccept !== null && settings.buttonAccept != \"\",\n\t\t\t\tdialogClass: settings.dialogClass,\n\t\t\t\tfocus: settings.focus\n\t\t\t}, null, function (result) {\n\t\t\t\tif (onNextAction !== null) {\n\t\t\t\t\tonNextAction();\n\t\t\t\t}\n\t\t\t});\n\t\t\tdialog.show();\n\t\t}\n\t}\n\tActionShowMessage.register();\n\tclass ActionFormset extends Action {\n\t\tstatic NAME = \"Formset\";\n\t\tstatic DEFAULTS = {\n\t\t\tform: null,\n\t\t\tfields: {}\n\t\t};\n\t\tstatic extractOptions(el, prefix = null, map = null) {\n\t\t\tlet options = super.extractOptions(el, prefix, {\n\t\t\t\tform: \"formset\"\n\t\t\t});\n\t\t\tlet fields = {};\n\t\t\tfor (let key in el.dataset) {\n\t\t\t\tif (key.startsWith(prefix)) {\n\t\t\t\t\tlet fieldname = key.substring(prefix.length);\n\t\t\t\t\tif (fieldname === \"\") {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tif (fieldname[0] !== fieldname[0].toUpperCase()) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tfieldname = fieldname.toLocaleLowerCase();\n\t\t\t\t\tfields[fieldname] = el.dataset[key];\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (options.fields === undefined) {\n\t\t\t\toptions.fields = {};\n\t\t\t}\n\t\t\tObject.assign(options.fields, fields);\n\t\t\treturn options;\n\t\t}\n\t\tstatic execute(el, options, onNextAction, onCancelActions) {\n\t\t\tlet settings = PowerButtons.getActionSettings(this, options);\n\t\t\tlet formToSet = null;\n\t\t\tlet inputFields = [];\n\t\t\tlet elements = [];\n\t\t\tif (settings.form == \"\") {\n\t\t\t\tif (el.form !== null) {\n\t\t\t\t\tformToSet = el.form;\n\t\t\t\t} else {\n\t\t\t\t\telements = Array.from(document.querySelectorAll(\"input\")).filter(input => input.form === null);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tformToSet = searchForm(settings.form);\n\t\t\t\tif (formToSet === null) {\n\t\t\t\t\tconsole.error(`Form not found ${settings.form}`);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (formToSet !== null) {\n\t\t\t\telements = Array.from(formToSet.elements);\n\t\t\t}\n\t\t\telements.forEach(element => {\n\t\t\t\tif (element.name !== \"\") {\n\t\t\t\t\tinputFields[element.name.toLocaleLowerCase()] = element;\n\t\t\t\t}\n\t\t\t\tif (element.id !== \"\") {\n\t\t\t\t\tinputFields[element.id.toLocaleLowerCase()] = element;\n\t\t\t\t}\n\t\t\t});\n\t\t\tfor (let field in settings.fields) {\n\t\t\t\tif (inputFields[field] !== undefined) {\n\t\t\t\t\tlet value = settings.fields[field];\n\t\t\t\t\tlet result = getValueWithJavascriptSupport(value, formToSet !== null ? formToSet : inputFields);\n\t\t\t\t\tif (typeof result === \"function\") {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tresult = result();\n\t\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\t\tconsole.error(`Error executing ${value}`, e);\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tinputFields[field].value = result;\n\t\t\t\t}\n\t\t\t}\n\t\t\tonNextAction();\n\t\t}\n\t}\n\tActionFormset.register();\n\tclass ActionFormButton extends Action {\n\t\tstatic NAME = \"FormButton\";\n\t\tstatic DEFAULTS = {\n\t\t\tformbutton: null,\n\t\t\tmethod: \"post\",\n\t\t\tformClass: \"formbutton\",\n\t\t\tconvertCase: \"none\",\n\t\t\tformId: null,\n\t\t\tfields: {}\n\t\t};\n\t\tstatic extractOptions(el, prefix = null, map = null) {\n\t\t\tlet options = super.extractOptions(el, prefix, map);\n\t\t\tlet fields = {};\n\t\t\tprefix = prefix + \"Field\";\n\t\t\tfor (let key in el.dataset) {\n\t\t\t\tif (key.startsWith(prefix)) {\n\t\t\t\t\tlet fieldname = key.substring(prefix.length);\n\t\t\t\t\tif (fieldname === \"\") {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tif (fieldname[0] !== fieldname[0].toUpperCase()) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tswitch (options.convertCase) {\n\t\t\t\t\tcase \"kebab\":\n\t\t\t\t\t\tfieldname = pascalToKebab(fieldname);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"snake\":\n\t\t\t\t\t\tfieldname = pascalToSnake(fieldname);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"camel\":\n\t\t\t\t\t\tfieldname = pascalToCamel(fieldname);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"pascal\":\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tfields[fieldname] = el.dataset[key];\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (options.fields === undefined) {\n\t\t\t\toptions.fields = {};\n\t\t\t}\n\t\t\tObject.assign(options.fields, fields);\n\t\t\treturn options;\n\t\t}\n\t\tstatic initialize(el, values = {}) {\n\t\t\tlet settings = PowerButtons.getActionSettings(this, values);\n\t\t\tlet form = document.createElement(\"form\");\n\t\t\tform.method = settings.method;\n\t\t\tif (!isEmpty(settings.formbutton)) {\n\t\t\t\tform.action = settings.formbutton;\n\t\t\t}\n\t\t\tif (settings.formId !== null) {\n\t\t\t\tform.id = settings.formId;\n\t\t\t}\n\t\t\tlet cssClasses = settings.formClass.split(\" \");\n\t\t\tfor (var i = 0; i < cssClasses.length; i++) {\n\t\t\t\tif (!isEmpty(cssClasses[i])) {\n\t\t\t\t\tform.classList.add(cssClasses[i]);\n\t\t\t\t}\n\t\t\t}\n\t\t\tel.type = \"submit\";\n\t\t\tlet fields = {};\n\t\t\tfor (let fieldName in settings.fields) {\n\t\t\t\tfields[fieldName] = getValueWithJavascriptSupport(settings.fields[fieldName], form);\n\t\t\t}\n\t\t\tlet pendingFields = {};\n\t\t\tfor (let fieldName in fields) {\n\t\t\t\tlet input = document.createElement(\"input\");\n\t\t\t\tinput.type = \"hidden\";\n\t\t\t\tinput.name = fieldName;\n\t\t\t\tif (typeof fields[fieldName] === \"function\") {\n\t\t\t\t\tinput.value = \"\";\n\t\t\t\t\tpendingFields[fieldName] = fields[fieldName];\n\t\t\t\t} else {\n\t\t\t\t\tinput.value = fields[fieldName];\n\t\t\t\t}\n\t\t\t\tform.appendChild(input);\n\t\t\t}\n\t\t\tel.parentNode.replaceChild(form, el);\n\t\t\tform.appendChild(el);\n\t\t\tif (Object.keys(pendingFields).length > 0) {\n\t\t\t\tsettings.fields = pendingFields;\n\t\t\t\tsettings._formObject = form;\n\t\t\t\tsuper.initialize(el, settings);\n\t\t\t}\n\t\t}\n\t\tstatic execute(el, options, onNextAction, onCancelActions) {\n\t\t\tlet settings = PowerButtons.getActionSettings(this, options);\n\t\t\tlet error = false;\n\t\t\tfor (let fieldName in settings.fields) {\n\t\t\t\ttry {\n\t\t\t\t\tlet value = settings.fields[fieldName]();\n\t\t\t\t\tsettings._formObject[fieldName].value = value;\n\t\t\t\t} catch (e) {\n\t\t\t\t\tconsole.error(`Error obtaining value for field ${fieldName}: ${e}`);\n\t\t\t\t\terror = true;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (error) {\n\t\t\t\tonCancelActions();\n\t\t\t} else {\n\t\t\t\tonNextAction();\n\t\t\t}\n\t\t}\n\t}\n\tActionFormButton.register();\n})(window);\n"],"names":["exports","pascalToSnake","str","replace","letter","toLowerCase","pascalToKebab","snakeCaseToCamel","g","toUpperCase","pascalToCamel","charAt","slice","CamelToCamel","isElement","el","Element","HTMLDocument","parseBoolean","value","createTag","tag","props","html","let","parts_id","split","id","prop","parts","length","join","innerHTML","className","filter","e","trim","document","createElement","undefined","setAttribute","appendToElement","args","filtered","append","searchForm","formName","formObject","forms","querySelector","console","warn","tagName","getValueWithJavascriptSupport","context","bind","internalValue","startsWith","f","substring","eval","error","promiseForEvent","event","resolveFunction","promise","Promise","resolve","addEventListener","handler","removeEventListener","isEmpty","obj","Array","Object","keys","window","powerButtons","param1","param2","param3","pluginName","els","options","actionName","PowerButtons","actionsRegistered","toLocaleLowerCase","querySelectorAll","arguments","valid","HTMLElement","plugin","initialize","discover","version","plugins","discoverAll","$","fn","this","DialogLegacy","DEFAULTS","message","buttonCount","constructor","onButton","onHidden","buttons","result","dispose","show","alert","confirm","button","text","Dialog","create","bootstrap","Modal","selector","dialogFunction","Error","title","customContent","buttonClasses","buttonPanelClasses","escapeKeyCancels","header","footer","body","close","dialogClass","focus","dialog","modal","parsedButtons","i","class","Math","min","push","_hiddenHandler","_hideHandler","activeElement","blur","remove","_build_dialog","backdrop","keyboard","then","hide","_handleButton","index","buttonObject","closeButton","tabindex","type","aria-label","buttonClass","map","dialogClasses","role","aria-hidden","data-keyboard","confirmDialog","onConfirm","onCancel","cancellable","alertDialog","onAccept","loadingDialog","canCancel","utils","assign","registerAction","action","NAME","defaults","getActionSettings","defaultsWindow","addAction","addActionSupport","appendAction","_powerButtons","reset","current_action","actions","back_onclick","onclick","handlerClick","preventDefault","currentActionSettings","onNextAction","stopImmediatePropagation","override","click","dispatchEvent","Event","execute","entries","forEach","key","Action","register","extractOptions","prefix","targetKey","dataset","values","skipInitialized","currentOptions","_discover","indexOf","includes","onCancelActions","ActionOverride","form","overridden","buttonAccept","escapeKey","settings","bindObject","buttonClose","ActionVerify","verify","verified","notVerified","customContentVerified","customContentNotVerified","titleNotVerified","titleVerified","onVerificationSuccess","onVerificationFailure","ActionConfirm","buttonConfirm","buttonCancel","super","ActionAsyncTask","task","cancel","async","cancelHandler","finally","ActionShowMessage","showmessage","ActionFormset","fields","fieldname","field","formToSet","inputFields","elements","from","input","element","name","ActionFormButton","formbutton","method","formClass","convertCase","formId","cssClasses","classList","add","fieldName","pendingFields","appendChild","parentNode","replaceChild","_formObject"],"mappings":"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"}