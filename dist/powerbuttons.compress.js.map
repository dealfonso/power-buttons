{"version":3,"file":"powerbuttons.compress.js.map","sources":["powerbuttons.js"],"sourcesContent":["/**\n   Copyright 2023 Carlos A. (https://github.com/dealfonso)\n\n   Licensed under the Apache License, Version 2.0 (the \"License\");\n   you may not use this file except in compliance with the License.\n   You may obtain a copy of the License at\n\n       http://www.apache.org/licenses/LICENSE-2.0\n\n   Unless required by applicable law or agreed to in writing, software\n   distributed under the License is distributed on an \"AS IS\" BASIS,\n   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   See the License for the specific language governing permissions and\n   limitations under the License.\n*/\n\n(function (exports) {\n\t\"use strict\";\n\tif (typeof exports === \"undefined\") {\n\t\tvar exports = window;\n\t}\n\texports.powerButtons = function (param1, param2 = null, param3 = null) {\n\t\tlet pluginName = null;\n\t\tlet els = [];\n\t\tlet options = {};\n\n\t\tfunction registeredPlugin(pluginName) {\n\t\t\tfor (let actionName in PowerButtons.actionsRegistered) {\n\t\t\t\tif (pluginName.toLocaleLowerCase() === actionName.toLocaleLowerCase()) {\n\t\t\t\t\treturn actionName;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn null;\n\t\t}\n\t\tif (typeof param1 === \"string\") {\n\t\t\tpluginName = registeredPlugin(param1);\n\t\t\tif (pluginName === null) {\n\t\t\t\tels = document.querySelectorAll(param1);\n\t\t\t\tif (els.length === 0) {\n\t\t\t\t\tconsole.error(`Parameter ${param1} is neither the name of a registered plugin nor a valid selector`);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (arguments.length > 2) {\n\t\t\t\t\tconsole.warn(`Ignoring extra parameters`);\n\t\t\t\t}\n\t\t\t\toptions = param2;\n\t\t\t} else {\n\t\t\t\tlet valid = false;\n\t\t\t\tif (typeof param2 === \"string\") {\n\t\t\t\t\tels = document.querySelectorAll(param2);\n\t\t\t\t\tvalid = true;\n\t\t\t\t} else if (param2 instanceof HTMLElement) {\n\t\t\t\t\tels = [param2];\n\t\t\t\t\tvalid = true;\n\t\t\t\t} else if (param2.length !== undefined) {\n\t\t\t\t\tvalid = true;\n\t\t\t\t\tfor (let e in param2) {\n\t\t\t\t\t\tif (!(param2[e] instanceof HTMLElement)) {\n\t\t\t\t\t\t\tvalid = false;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (valid) {\n\t\t\t\t\t\tels = param2;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (!valid) {\n\t\t\t\t\tconsole.error(`Parameter ${param2} is neither a valid selector, a list of elements or an HTMLElement`);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\toptions = param3;\n\t\t\t}\n\t\t} else if (param1 instanceof HTMLElement) {\n\t\t\tels = [param1];\n\t\t} else if (param1.length !== undefined) {\n\t\t\tfor (let e in param1) {\n\t\t\t\tif (!(param1[e] instanceof HTMLElement)) {\n\t\t\t\t\tconsole.error(`Parameter ${param1} is neither a valid selector, a list of elements or an HTMLElement`);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\tels = param1;\n\t\t} else {\n\t\t\tconsole.error(`Parameter ${param1} is neither a valid selector, a list of elements or an HTMLElement`);\n\t\t\treturn;\n\t\t}\n\t\tif (options === null) {\n\t\t\toptions = {};\n\t\t}\n\t\tif (typeof options !== \"object\") {\n\t\t\tconsole.error(`Options parameter must be an object`);\n\t\t\treturn;\n\t\t}\n\t\tif (pluginName !== null) {\n\t\t\tlet plugin = PowerButtons.actionsRegistered[pluginName];\n\t\t\tfor (let el of els) {\n\t\t\t\tplugin.initialize(el, options);\n\t\t\t}\n\t\t} else {\n\t\t\tPowerButtons.discover(els, options);\n\t\t}\n\t};\n\texports.powerButtons.version = \"2.2.0\";\n\texports.powerButtons.plugins = function () {\n\t\treturn Object.keys(PowerButtons.actionsRegistered);\n\t};\n\texports.powerButtons.discoverAll = function () {\n\t\tPowerButtons.discoverAll();\n\t};\n\texports.powerButtons.discover = function (els, options) {\n\t\tPowerButtons.discover(els, options);\n\t};\n\tif (document.addEventListener !== undefined) {\n\t\tdocument.addEventListener(\"DOMContentLoaded\", function (e) {\n\t\t\tPowerButtons.discoverAll();\n\t\t});\n\t}\n\tif (exports.$ !== undefined) {\n\t\texports.$.fn.powerButtons = function (pluginName, options = {}) {\n\t\t\texports.powerButtons(pluginName, this, options);\n\t\t\treturn this;\n\t\t};\n\t\texports.$.fn.powerButtons.version = exports.powerButtons.version;\n\t\texports.$.fn.powerButtons.plugins = exports.powerButtons.plugins;\n\t}\n\n\tfunction pascalToSnake(str) {\n\t\treturn str.replace(/[A-Z]/g, letter => `_${letter.toLowerCase()}`).replace(/^_*/, \"\");\n\t}\n\n\tfunction pascalToKebab(str) {\n\t\treturn str.replace(/[A-Z]/g, letter => `-${letter.toLowerCase()}`).replace(/^-*/, \"\");\n\t}\n\n\tfunction snakeCaseToCamel(str) {\n\t\treturn str.replace(/-([a-z])/g, g => g[1].toUpperCase());\n\t}\n\n\tfunction pascalToCamel(str) {\n\t\treturn str.charAt(0).toLowerCase() + str.slice(1);\n\t}\n\n\tfunction CamelToCamel(str) {\n\t\treturn str.charAt(0).toUpperCase() + str.slice(1);\n\t}\n\n\tfunction isElement(el) {\n\t\treturn el instanceof Element || el instanceof HTMLDocument;\n\t}\n\n\tfunction parseBoolean(value) {\n\t\tif (typeof value === \"boolean\") {\n\t\t\treturn value;\n\t\t}\n\t\tif (typeof value === \"string\") {\n\t\t\tvalue = value.toLowerCase();\n\t\t\tif (value === \"true\" || value === \"yes\" || value === \"1\") {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\t\treturn !!value;\n\t}\n\n\tfunction createTag(tag, props = {}, html = null) {\n\t\tlet parts_id = tag.split(\"#\");\n\t\tlet id = null;\n\t\tif (parts_id.length == 1) {\n\t\t\ttag = parts_id[0];\n\t\t} else {\n\t\t\tparts_id[1] = parts_id[1].split(\".\");\n\t\t\tid = parts_id[1][0];\n\t\t\ttag = [parts_id[0], ...parts_id[1].slice(1)].join(\".\");\n\t\t}\n\t\tlet parts = tag.split(\".\");\n\t\ttag = parts[0];\n\t\tif (tag === \"\") {\n\t\t\ttag = \"div\";\n\t\t}\n\t\tif (typeof props === \"string\") {\n\t\t\thtml = props;\n\t\t\tprops = {};\n\t\t}\n\t\tif (html !== null) {\n\t\t\tprops.innerHTML = html;\n\t\t}\n\t\tif (id !== null) {\n\t\t\tprops.id = id;\n\t\t}\n\t\tprops.className = [props.className, ...parts.slice(1)].filter(function (e) {\n\t\t\treturn `${e}`.trim() !== \"\";\n\t\t}).join(\" \");\n\t\tlet el = document.createElement(tag);\n\t\tfor (let prop in props) {\n\t\t\tif (el[prop] !== undefined) {\n\t\t\t\tel[prop] = props[prop];\n\t\t\t} else {\n\t\t\t\tel.setAttribute(prop, props[prop]);\n\t\t\t}\n\t\t}\n\t\treturn el;\n\t}\n\n\tfunction appendToElement(el, ...args) {\n\t\tlet filtered = args.filter(e => e !== null && e !== undefined);\n\t\tel.append(...filtered);\n\t\treturn el;\n\t}\n\n\tfunction searchForm(formName) {\n\t\tlet formObject = null;\n\t\tif (formName !== null) {\n\t\t\tformObject = document.forms[formName];\n\t\t\tif (formObject === undefined) {\n\t\t\t\tformObject = document.querySelector(formName);\n\t\t\t\tif (formObject === null) {\n\t\t\t\t\tconsole.warn(`form ${formName} not found`);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (formObject !== null) {\n\t\t\tif (formObject.tagName.toLowerCase() !== \"form\") {\n\t\t\t\tconsole.warn(`form ${formName} is not a form`);\n\t\t\t}\n\t\t}\n\t\treturn formObject;\n\t}\n\n\tfunction getValueWithJavascriptSupport(value, context = null) {\n\t\tif (typeof value === \"function\") {\n\t\t\treturn value.bind(context);\n\t\t}\n\t\tif (typeof value === \"string\") {\n\t\t\tlet internalValue = value.trim();\n\t\t\tif (internalValue.startsWith(\"javascript:\")) {\n\t\t\t\ttry {\n\t\t\t\t\tlet f = internalValue.substring(11);\n\t\t\t\t\tvalue = function () {\n\t\t\t\t\t\treturn eval(f);\n\t\t\t\t\t}.bind(context);\n\t\t\t\t} catch (e) {\n\t\t\t\t\tconsole.error(`Error executing javascript code ${internalValue.substring(11)}, error: ${e}`);\n\t\t\t\t\tvalue = null;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn value;\n\t}\n\n\tfunction promiseForEvent(el, event) {\n\t\tlet resolveFunction = null;\n\t\tlet promise = new Promise(resolve => {\n\t\t\tresolveFunction = resolve;\n\t\t});\n\t\tlet handler = function () {\n\t\t\tel.removeEventListener(event, handler);\n\t\t\tresolveFunction();\n\t\t};\n\t\tel.addEventListener(event, handler);\n\t\treturn promise;\n\t}\n\n\tfunction isEmpty(obj) {\n\t\tif (obj === null || obj === undefined) {\n\t\t\treturn true;\n\t\t}\n\t\tif (obj instanceof Array) {\n\t\t\treturn obj.length === 0;\n\t\t}\n\t\tif (obj instanceof Object) {\n\t\t\treturn Object.keys(obj).length === 0;\n\t\t}\n\t\tif (typeof obj === \"string\") {\n\t\t\treturn obj.trim() === \"\";\n\t\t}\n\t\treturn false;\n\t}\n\tclass DialogLegacy {\n\t\tDEFAULTS = {\n\t\t\tmessage: \"Main message\",\n\t\t\tbuttonCount: 2\n\t\t};\n\t\tconstructor(options = {}, onButton = null, onHidden = null) {\n\t\t\tthis.options = {\n\t\t\t\t...this.DEFAULTS,\n\t\t\t\t...options\n\t\t\t};\n\t\t\tthis.buttonCount = this.options.buttons.length;\n\t\t\tthis.options.buttons = [\"Accept\", \"Cancel\"];\n\t\t\tthis.result = null;\n\t\t\tthis.onButton = onButton;\n\t\t\tthis.onHidden = onHidden;\n\t\t}\n\t\tdispose() {}\n\t\tshow(onButton = null, onHidden = null) {\n\t\t\tif (onButton !== null) {\n\t\t\t\tthis.onButton = onButton;\n\t\t\t}\n\t\t\tif (onHidden !== null) {\n\t\t\t\tthis.onHidden = onHidden;\n\t\t\t}\n\t\t\tswitch (this.buttonCount) {\n\t\t\tcase 0:\n\t\t\tcase 1:\n\t\t\t\talert(this.message);\n\t\t\t\tthis.result = 0;\n\t\t\t\tbreak;\n\t\t\tcase 2:\n\t\t\t\tthis.result = confirm(this.options.message) ? 0 : 1;\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tthrow `Unsupported button count ${this.buttonCount}`;\n\t\t\t}\n\t\t\tif (this.onButton !== null) {\n\t\t\t\tthis.onButton(this.result, {\n\t\t\t\t\tbutton: this.result,\n\t\t\t\t\ttext: this.options.buttons[this.result]\n\t\t\t\t}, null);\n\t\t\t}\n\t\t\tif (this.onHidden !== null) {\n\t\t\t\tthis.onHidden(this.result, {\n\t\t\t\t\tbutton: this.result,\n\t\t\t\t\ttext: this.options.buttons[this.result]\n\t\t\t\t}, null);\n\t\t\t}\n\t\t}\n\t}\n\tclass Dialog {\n\t\tstatic create(options = {}, onButton = null, onHidden = null) {\n\t\t\tif (exports.bootstrap === undefined || exports.bootstrap.Modal === undefined) {\n\t\t\t\treturn new DialogLegacy(options, onButton, onHidden);\n\t\t\t}\n\t\t\tif (options.selector !== undefined && options.selector !== null || options.dialogFunction !== undefined && options.dialogFunction !== null) {\n\t\t\t\tthrow new Error(\"not implemented, yet\");\n\t\t\t}\n\t\t\treturn new Dialog(options, onButton, onHidden);\n\t\t}\n\t\tDEFAULTS = {\n\t\t\ttitle: \"Title\",\n\t\t\tmessage: \"Main message\",\n\t\t\tcustomContent: null,\n\t\t\tbuttons: [\"Accept\"],\n\t\t\tbuttonClasses: [\"btn-primary\", \"btn-secondary\"],\n\t\t\tbuttonPanelClasses: [\"text-end\"],\n\t\t\tescapeKeyCancels: true,\n\t\t\theader: true,\n\t\t\tfooter: true,\n\t\t\tbody: true,\n\t\t\tclose: true,\n\t\t\tdialogClass: \"\",\n\t\t\tfocus: \"\"\n\t\t};\n\t\tdialog = null;\n\t\toptions = null;\n\t\tmodal = null;\n\t\tonButton = null;\n\t\tresult = null;\n\t\tonHidden = null;\n\t\tonButton = null;\n\t\tconstructor(options = {}, onButton = null, onHidden = null) {\n\t\t\tif (exports.bootstrap === undefined || exports.bootstrap.Modal === undefined) {\n\t\t\t\tthrow new Error(\"Bootstrap is required to use this class\");\n\t\t\t}\n\t\t\tthis.options = {\n\t\t\t\t...this.DEFAULTS,\n\t\t\t\t...options\n\t\t\t};\n\t\t\tlet parsedButtons = [];\n\t\t\tfor (let i = 0; i < this.options.buttons.length; i++) {\n\t\t\t\tlet button = this.options.buttons[i];\n\t\t\t\tif (typeof button === \"string\") {\n\t\t\t\t\tbutton = {\n\t\t\t\t\t\ttext: button\n\t\t\t\t\t};\n\t\t\t\t} else {\n\t\t\t\t\tif (button.text === undefined) {\n\t\t\t\t\t\tbutton.text = `Button ${i}`;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (button.class === undefined) {\n\t\t\t\t\tbutton.class = this.options.buttonClasses[Math.min(i, this.options.buttonClasses.length - 1)];\n\t\t\t\t}\n\t\t\t\tparsedButtons.push(button);\n\t\t\t}\n\t\t\tthis.options.buttons = parsedButtons;\n\t\t\tthis.dialog = null;\n\t\t\tthis.modal = null;\n\t\t\tthis.result = null;\n\t\t\tthis.onButton = onButton;\n\t\t\tthis.onHidden = onHidden;\n\t\t\tthis._hiddenHandler = this._hiddenHandler.bind(this);\n\t\t}\n\t\t_hiddenHandler() {\n\t\t\tthis.dialog.removeEventListener(\"hidden.bs.modal\", this._hiddenHandler);\n\t\t\tif (this.onHidden !== null) {\n\t\t\t\tif (this.result !== null && this.result >= 0) {\n\t\t\t\t\tthis.onHidden(this.result, {\n\t\t\t\t\t\tbutton: this.result,\n\t\t\t\t\t\ttext: this.options.buttons[this.result]\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tthis.onHidden(this.result, null);\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.dispose();\n\t\t}\n\t\tdispose() {\n\t\t\tif (this.modal !== null) {\n\t\t\t\tthis.modal.dispose();\n\t\t\t\tthis.modal = null;\n\t\t\t}\n\t\t\tthis.dialog.remove();\n\t\t\tthis.dialog = null;\n\t\t}\n\t\tshow(onButton = null, onHidden = null) {\n\t\t\tif (this.dialog === null) {\n\t\t\t\tthis.dialog = this._build_dialog(this.options);\n\t\t\t}\n\t\t\tif (this.modal === null) {\n\t\t\t\tthis.modal = new bootstrap.Modal(this.dialog, {\n\t\t\t\t\tbackdrop: this.options.escapeKeyCancels ? true : \"static\",\n\t\t\t\t\tkeyboard: this.options.escapeKeyCancels\n\t\t\t\t});\n\t\t\t}\n\t\t\tthis.dialog.addEventListener(\"hidden.bs.modal\", this._hiddenHandler);\n\t\t\tthis.result = null;\n\t\t\tif (onButton !== null) {\n\t\t\t\tthis.onButton = onButton;\n\t\t\t}\n\t\t\tif (onHidden !== null) {\n\t\t\t\tthis.onHidden = onHidden;\n\t\t\t}\n\t\t\tthis.modal.show();\n\t\t\treturn promiseForEvent(this.dialog, \"shown.bs.modal\").then(() => {\n\t\t\t\tif (this.options.focus !== \"\") {\n\t\t\t\t\tthis.dialog.querySelector(this.options.focus)?.focus();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\thide() {\n\t\t\tthis.modal.hide();\n\t\t\treturn promiseForEvent(this.dialog, \"hidden.bs.modal\");\n\t\t}\n\t\t_handleButton(index, button, buttonObject) {\n\t\t\tthis.result = index;\n\t\t\tlet autoHide = true;\n\t\t\tif (this.onButton !== null) {\n\t\t\t\tautoHide = !(this.onButton(index, button, buttonObject) === false);\n\t\t\t}\n\t\t\tif (autoHide) {\n\t\t\t\tthis.hide();\n\t\t\t}\n\t\t}\n\t\t_build_dialog(options = {}) {\n\t\t\tlet header = null;\n\t\t\tlet closeButton = null;\n\t\t\tif (parseBoolean(options.close)) {\n\t\t\t\tcloseButton = createTag(\"button.close.btn-close\", {\n\t\t\t\t\ttabindex: \"-1\",\n\t\t\t\t\ttype: \"button\",\n\t\t\t\t\t\"aria-label\": \"Close\"\n\t\t\t\t});\n\t\t\t\tcloseButton.addEventListener(\"click\", () => this._handleButton(-1, null, closeButton));\n\t\t\t}\n\t\t\tif (parseBoolean(options.header)) {\n\t\t\t\theader = createTag(\".modal-header\");\n\t\t\t\tif (options.title !== null) {\n\t\t\t\t\theader.append(appendToElement(createTag(\".modal-title\"), appendToElement(createTag(\"h5\", options.title))));\n\t\t\t\t}\n\t\t\t\tif (parseBoolean(options.close)) {\n\t\t\t\t\theader.append(closeButton);\n\t\t\t\t}\n\t\t\t}\n\t\t\tlet buttons = [];\n\t\t\tif (options.buttons !== null) {\n\t\t\t\tfor (let i = 0; i < options.buttons.length; i++) {\n\t\t\t\t\tlet button = options.buttons[i];\n\t\t\t\t\tlet buttonClass = button.class.split(\" \").map(e => e.trim()).filter(e => e !== \"\").join(\".\");\n\t\t\t\t\tif (options.footer === false) {\n\t\t\t\t\t\tbuttonClass += \".mx-1\";\n\t\t\t\t\t}\n\t\t\t\t\tif (buttonClass !== \"\") {\n\t\t\t\t\t\tbuttonClass = \".\" + buttonClass;\n\t\t\t\t\t}\n\t\t\t\t\tlet buttonObject = createTag(\"button.btn\" + buttonClass + \".button\" + i, {\n\t\t\t\t\t\ttype: \"button\",\n\t\t\t\t\t\ttabindex: i + 1\n\t\t\t\t\t}, button.text);\n\t\t\t\t\tbuttonObject.addEventListener(\"click\", function () {\n\t\t\t\t\t\tthis._handleButton(i, button, buttonObject);\n\t\t\t\t\t\tif (button.handler !== undefined && button.handler !== null) {\n\t\t\t\t\t\t\tbutton.handler(i, button, buttonObject);\n\t\t\t\t\t\t}\n\t\t\t\t\t}.bind(this));\n\t\t\t\t\tbuttons.push(buttonObject);\n\t\t\t\t}\n\t\t\t}\n\t\t\tlet footer = null;\n\t\t\tif (parseBoolean(options.footer)) {\n\t\t\t\tfooter = appendToElement(createTag(\".modal-footer\"), ...buttons);\n\t\t\t}\n\t\t\tlet body = null;\n\t\t\tif (parseBoolean(options.body)) {\n\t\t\t\tbody = createTag(\".modal-body\");\n\t\t\t\tif (header === null) {\n\t\t\t\t\tif (parseBoolean(options.close)) {\n\t\t\t\t\t\tbody.append(appendToElement(createTag(\".text-end\"), closeButton));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (options.message !== null) {\n\t\t\t\t\tbody.append(createTag(\"p.message.text-center\", options.message));\n\t\t\t\t}\n\t\t\t\tif (options.customContent !== null) {\n\t\t\t\t\tbody.append(createTag(\".custom-content.mx-auto\", options.customContent));\n\t\t\t\t}\n\t\t\t\tif (footer === null) {\n\t\t\t\t\tlet buttonPanelClasses = options.buttonPanelClasses.map(e => e.trim()).filter(e => e !== \"\").join(\".\");\n\t\t\t\t\tif (buttonPanelClasses !== \"\") {\n\t\t\t\t\t\tbuttonPanelClasses = \".\" + buttonPanelClasses;\n\t\t\t\t\t}\n\t\t\t\t\tappendToElement(body, appendToElement(createTag(\".buttons\" + buttonPanelClasses), ...buttons));\n\t\t\t\t}\n\t\t\t}\n\t\t\tlet dialogClasses = options.dialogClass.split(\" \").map(e => e.trim()).filter(e => e !== \"\").join(\".\");\n\t\t\tif (dialogClasses !== \"\") {\n\t\t\t\tdialogClasses = \".\" + dialogClasses;\n\t\t\t}\n\t\t\tlet dialog = appendToElement(createTag(dialogClasses + \".modal.fade\", {\n\t\t\t\ttabindex: \"-1\",\n\t\t\t\trole: \"dialog\",\n\t\t\t\t\"aria-hidden\": \"true\",\n\t\t\t\t\"data-keyboard\": \"false\"\n\t\t\t}), appendToElement(createTag(\".modal-dialog.modal-dialog-centered\", {\n\t\t\t\trole: \"document\"\n\t\t\t}), appendToElement(createTag(\".modal-content\"), header, body, footer)));\n\t\t\treturn dialog;\n\t\t}\n\t}\n\n\tfunction confirmDialog(message, title = \"this action needs confirmation\", onConfirm = null, onCancel = null, cancellable = true) {\n\t\tlet dialog = new Dialog({\n\t\t\ttitle: title,\n\t\t\tmessage: message,\n\t\t\tbuttons: [{\n\t\t\t\ttext: \"Cancel\",\n\t\t\t\tclass: \"btn-secondary\",\n\t\t\t\thandler: onCancel\n\t\t\t}, {\n\t\t\t\ttext: \"Confirm\",\n\t\t\t\tclass: \"btn-primary\",\n\t\t\t\thandler: onConfirm\n\t\t\t}],\n\t\t\tescapeKeyCancels: cancellable\n\t\t});\n\t\tdialog.show();\n\t\treturn dialog;\n\t}\n\n\tfunction alertDialog(message, title = \"Alert\", onAccept = null) {\n\t\tlet dialog = new Dialog({\n\t\t\ttitle: title,\n\t\t\tmessage: message,\n\t\t\tbuttons: [{\n\t\t\t\ttext: \"Accept\",\n\t\t\t\tclass: \"btn-primary\",\n\t\t\t\thandler: onAccept\n\t\t\t}],\n\t\t\tescapeKeyCancels: true\n\t\t});\n\t\tdialog.show();\n\t\treturn dialog;\n\t}\n\n\tfunction loadingDialog(message, customContent = null, canCancel = null) {\n\t\tif (typeof customContent === \"function\") {\n\t\t\tcanCancel = customContent;\n\t\t\tcustomContent = null;\n\t\t}\n\t\tlet dialog = new Dialog({\n\t\t\ttitle: null,\n\t\t\tmessage: message,\n\t\t\tbuttons: [{\n\t\t\t\ttext: \"Cancel\",\n\t\t\t\tclass: \"btn-primary\"\n\t\t\t}],\n\t\t\tcustomContent: customContent,\n\t\t\tescapeKeyCancels: false,\n\t\t\tclose: false,\n\t\t\theader: false,\n\t\t\tfooter: false\n\t\t}, canCancel);\n\t\tdialog.show();\n\t\treturn dialog;\n\t}\n\tif (exports.powerButtons.utils === undefined) {\n\t\texports.powerButtons.utils = {};\n\t}\n\tObject.assign(exports.powerButtons.utils, {\n\t\tconfirmDialog: confirmDialog,\n\t\talertDialog: alertDialog,\n\t\tloadingDialog: loadingDialog\n\t});\n\tclass PowerButtons {\n\t\tstatic actionsRegistered = {};\n\t\tstatic registerAction(action) {\n\t\t\tthis.actionsRegistered[action.NAME.toLowerCase()] = action;\n\t\t\tif (exports.powerButtons === undefined) {\n\t\t\t\texports.powerButtons = {};\n\t\t\t}\n\t\t\tif (exports.powerButtons.defaults === undefined) {\n\t\t\t\texports.powerButtons.defaults = {};\n\t\t\t}\n\t\t\texports.powerButtons.defaults[action.NAME.toLowerCase()] = Object.assign({}, action.DEFAULTS);\n\t\t}\n\t\tstatic getActionSettings(action, options) {\n\t\t\tif (this.actionsRegistered[action.NAME.toLowerCase()] === undefined) {\n\t\t\t\tconsole.error(`The action ${action.NAME} is not registered`);\n\t\t\t\treturn {};\n\t\t\t}\n\t\t\tlet defaultsWindow = {};\n\t\t\tif (exports.powerButtons !== undefined && exports.powerButtons.defaults !== undefined && exports.powerButtons.defaults[action.NAME.toLowerCase()] !== undefined) {\n\t\t\t\tdefaultsWindow = exports.powerButtons.defaults[action.NAME.toLowerCase()];\n\t\t\t}\n\t\t\treturn Object.assign({}, action.DEFAULTS, defaultsWindow, options);\n\t\t}\n\t\tstatic addAction(el, options = {}) {\n\t\t\tlet powerButton = PowerButtons.addActionSupport(el);\n\t\t\tpowerButton.appendAction(options);\n\t\t}\n\t\tstatic addActionSupport(el) {\n\t\t\tif (el._powerButtons === undefined) {\n\t\t\t\tel._powerButtons = new PowerButtons(el);\n\t\t\t} else {\n\t\t\t\tel._powerButtons.reset();\n\t\t\t}\n\t\t\treturn el._powerButtons;\n\t\t}\n\t\tel = null;\n\t\tcurrent_action = 0;\n\t\tactions = [];\n\t\tback_onclick = null;\n\t\tconstructor(el) {\n\t\t\tel._powerButtons = this;\n\t\t\tthis.el = el;\n\t\t\tthis.current_action = 0;\n\t\t\tthis.actions = [];\n\t\t\tthis.back_onclick = null;\n\t\t\tif (el.onclick !== undefined && el.onclick !== null) {\n\t\t\t\tthis.back_onclick = el.onclick;\n\t\t\t\tel.onclick = null;\n\t\t\t}\n\t\t\tel.addEventListener(\"click\", this.handlerClick.bind(this));\n\t\t}\n\t\tappendAction(options = {}) {\n\t\t\tif (options.type === undefined) {\n\t\t\t\tthrow \"The type of the action is mandatory\";\n\t\t\t}\n\t\t\tthis.actions.push(options);\n\t\t}\n\t\thandlerClick(e) {\n\t\t\tif (this.current_action >= this.actions.length) {\n\t\t\t\tthis.current_action = 0;\n\t\t\t\tif (typeof this.back_onclick === \"function\") {\n\t\t\t\t\tif (!this.back_onclick()) {\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tlet currentActionSettings = this.actions[this.current_action];\n\t\t\te.preventDefault();\n\t\t\te.stopImmediatePropagation();\n\t\t\tlet onNextAction = function (override = false) {\n\t\t\t\tif (override) {\n\t\t\t\t\tthis.current_action = this.actions.length;\n\t\t\t\t} else {\n\t\t\t\t\tthis.current_action++;\n\t\t\t\t}\n\t\t\t\tif (this.current_action >= this.actions.length) {\n\t\t\t\t\tif (this.el.click !== undefined) {\n\t\t\t\t\t\tthis.el.click();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.el.dispatchEvent(new Event(e.type, e));\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tthis.el.dispatchEvent(new Event(e.type, e));\n\t\t\t\t}\n\t\t\t}.bind(this);\n\t\t\tlet action = this.constructor.actionsRegistered[currentActionSettings.type];\n\t\t\tif (action === undefined) {\n\t\t\t\tthrow `The action ${currentActionSettings.type} is not registered`;\n\t\t\t}\n\t\t\taction.execute(this.el, currentActionSettings, onNextAction, () => this.reset());\n\t\t}\n\t\treset() {\n\t\t\tthis.current_action = 0;\n\t\t}\n\t\tstatic discoverAll() {\n\t\t\tObject.entries(this.actionsRegistered).forEach(([key, action]) => {\n\t\t\t\taction.discoverAll();\n\t\t\t});\n\t\t}\n\t\tstatic discover(els, options = {}) {\n\t\t\tObject.entries(this.actionsRegistered).forEach(([key, action]) => {\n\t\t\t\taction.discover(els, options);\n\t\t\t});\n\t\t}\n\t}\n\tclass Action {\n\t\tstatic NAME = null;\n\t\tstatic register() {\n\t\t\tPowerButtons.registerAction(this);\n\t\t}\n\t\tstatic DEFAULTS = {};\n\t\tstatic extractOptions(el, prefix = null, map = null) {\n\t\t\tif (prefix === null) {\n\t\t\t\tprefix = this.NAME.toLowerCase();\n\t\t\t}\n\t\t\tif (map === null) {\n\t\t\t\tmap = {};\n\t\t\t\tmap[prefix] = prefix;\n\t\t\t}\n\t\t\tlet options = {};\n\t\t\tfor (let key in this.DEFAULTS) {\n\t\t\t\tlet targetKey = key;\n\t\t\t\tif (map[targetKey] !== undefined) {\n\t\t\t\t\ttargetKey = map[targetKey];\n\t\t\t\t} else {\n\t\t\t\t\ttargetKey = prefix + CamelToCamel(targetKey);\n\t\t\t\t}\n\t\t\t\tif (el.dataset[targetKey] !== undefined) {\n\t\t\t\t\toptions[key] = el.dataset[targetKey];\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn options;\n\t\t}\n\t\tstatic initialize(el, values = {}) {\n\t\t\tPowerButtons.addAction(el, Object.assign({\n\t\t\t\ttype: this.NAME.toLowerCase()\n\t\t\t}, values));\n\t\t}\n\t\tstatic discoverAll() {\n\t\t\tlet prefix = this.NAME.toLowerCase();\n\t\t\tthis.discover(document.querySelectorAll(`[data-${prefix}]`));\n\t\t}\n\t\tstatic discover(els, options = {}, skipInitialized = true) {\n\t\t\tif (els.length === undefined) {\n\t\t\t\tels = [els];\n\t\t\t}\n\t\t\tlet prefix = this.NAME.toLowerCase();\n\t\t\tfor (let el of els) {\n\t\t\t\tif (skipInitialized && el._powerButtons !== undefined && el._powerButtons._discover !== undefined && el._powerButtons._discover.indexOf(prefix) !== -1) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tif (el.dataset[prefix] === undefined) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tlet currentOptions = Object.assign(this.extractOptions(el, prefix), options);\n\t\t\t\tthis.initialize(el, currentOptions);\n\t\t\t\tif (el._powerButtons !== undefined) {\n\t\t\t\t\tif (el._powerButtons._discover === undefined) {\n\t\t\t\t\t\tel._powerButtons._discover = [];\n\t\t\t\t\t}\n\t\t\t\t\tif (!el._powerButtons._discover.includes(prefix)) {\n\t\t\t\t\t\tel._powerButtons._discover.push(prefix);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tstatic execute(el, options, onNextAction, onCancelActions) {\n\t\t\tthrow new Error(\"The execute method must be implemented by the derived class\");\n\t\t}\n\t}\n\tclass ActionOverride extends Action {\n\t\tstatic NAME = \"Override\";\n\t\tstatic DEFAULTS = {\n\t\t\toverride: null,\n\t\t\tform: null,\n\t\t\toverridden: null,\n\t\t\tcustomContent: null,\n\t\t\ttitle: null,\n\t\t\tbuttonAccept: \"Accept\",\n\t\t\tescapeKey: true,\n\t\t\tdialogClass: \"\",\n\t\t\tfocus: \"\"\n\t\t};\n\t\tstatic execute(el, options, onNextAction, onCancelActions) {\n\t\t\tlet settings = PowerButtons.getActionSettings(this, options);\n\t\t\tlet result = null;\n\t\t\tlet bindObject = searchForm(settings.form);\n\t\t\tif (bindObject === null) {\n\t\t\t\tbindObject = document;\n\t\t\t}\n\t\t\ttry {\n\t\t\t\tif (typeof settings.override === \"function\") {\n\t\t\t\t\tresult = settings.override.bind(bindObject)();\n\t\t\t\t} else if (typeof settings.override === \"string\") {\n\t\t\t\t\tresult = function () {\n\t\t\t\t\t\treturn eval(settings.override);\n\t\t\t\t\t}.bind(bindObject)();\n\t\t\t\t} else {\n\t\t\t\t\tresult = parseBoolean(settings.override);\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\tconsole.error(\"Error executing override function\", e);\n\t\t\t\tresult = false;\n\t\t\t}\n\t\t\tif (result) {\n\t\t\t\tif (settings.overridden !== null || settings.customContent !== null || settings.title !== null) {\n\t\t\t\t\tlet dialog = null;\n\t\t\t\t\tdialog = Dialog.create({\n\t\t\t\t\t\ttitle: settings.title,\n\t\t\t\t\t\tmessage: settings.overridden,\n\t\t\t\t\t\tcustomContent: settings.customContent,\n\t\t\t\t\t\tbuttons: [settings.buttonAccept],\n\t\t\t\t\t\tescapeKeyCancels: settings.escapeKey,\n\t\t\t\t\t\tclose: settings.buttonClose,\n\t\t\t\t\t\tdialogClass: settings.dialogClass,\n\t\t\t\t\t\tfocus: settings.focus\n\t\t\t\t\t}, null, function (result) {\n\t\t\t\t\t\tonNextAction(true);\n\t\t\t\t\t});\n\t\t\t\t\tdialog.show();\n\t\t\t\t} else {\n\t\t\t\t\tonNextAction(true);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tonNextAction();\n\t\t\t}\n\t\t}\n\t}\n\tActionOverride.register();\n\tclass ActionVerify extends Action {\n\t\tstatic NAME = \"Verify\";\n\t\tstatic DEFAULTS = {\n\t\t\tverify: null,\n\t\t\tform: null,\n\t\t\tverified: null,\n\t\t\tnotVerified: \"The condition for this action is not met\",\n\t\t\tcustomContentVerified: null,\n\t\t\tcustomContentNotVerified: null,\n\t\t\ttitleNotVerified: \"The action requires verification\",\n\t\t\ttitleVerified: null,\n\t\t\tbuttonAccept: \"Accept\",\n\t\t\tbuttonClose: false,\n\t\t\tescapeKey: true,\n\t\t\tdialogClass: \"\",\n\t\t\tfocus: \"\"\n\t\t};\n\t\tstatic execute(el, options, onNextAction, onCancelActions) {\n\t\t\tlet settings = PowerButtons.getActionSettings(this, options);\n\t\t\tlet result = null;\n\t\t\tlet bindObject = searchForm(settings.form);\n\t\t\tif (bindObject === null) {\n\t\t\t\tbindObject = document;\n\t\t\t}\n\t\t\ttry {\n\t\t\t\tif (typeof settings.verify === \"function\") {\n\t\t\t\t\tresult = settings.verify.bind(bindObject)();\n\t\t\t\t} else if (typeof settings.verify === \"string\") {\n\t\t\t\t\tresult = function () {\n\t\t\t\t\t\treturn eval(settings.verify);\n\t\t\t\t\t}.bind(bindObject)();\n\t\t\t\t} else {\n\t\t\t\t\tresult = parseBoolean(settings.verify);\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\tconsole.error(\"Error executing verification function\", e);\n\t\t\t\tresult = false;\n\t\t\t}\n\t\t\tlet dialog = null;\n\t\t\tlet onVerificationSuccess = onNextAction;\n\t\t\tlet onVerificationFailure = onCancelActions;\n\t\t\tif (result) {\n\t\t\t\tif (settings.verified !== null || settings.customContentVerified !== null || settings.titleVerified !== null) {\n\t\t\t\t\tdialog = Dialog.create({\n\t\t\t\t\t\ttitle: settings.titleVerified,\n\t\t\t\t\t\tmessage: settings.verified,\n\t\t\t\t\t\tcustomContent: settings.customContentVerified,\n\t\t\t\t\t\tbuttons: [settings.buttonAccept],\n\t\t\t\t\t\tescapeKeyCancels: settings.escapeKey,\n\t\t\t\t\t\tclose: settings.buttonClose,\n\t\t\t\t\t\tdialogClass: settings.dialogClass,\n\t\t\t\t\t\tfocus: settings.focus\n\t\t\t\t\t}, null, function (result) {\n\t\t\t\t\t\tif (onVerificationSuccess !== null) {\n\t\t\t\t\t\t\tonVerificationSuccess();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (settings.notVerified !== null || settings.customContentNotVerified !== null || settings.titleNotVerified !== null) {\n\t\t\t\t\tdialog = Dialog.create({\n\t\t\t\t\t\ttitle: settings.titleNotVerified,\n\t\t\t\t\t\tmessage: settings.notVerified,\n\t\t\t\t\t\tcustomContent: settings.customContentNotVerified,\n\t\t\t\t\t\tbuttons: [settings.buttonAccept],\n\t\t\t\t\t\tescapeKeyCancels: settings.escapeKey,\n\t\t\t\t\t\tclose: settings.buttonClose,\n\t\t\t\t\t\tdialogClass: settings.dialogClass,\n\t\t\t\t\t\tfocus: settings.focus\n\t\t\t\t\t}, null, function (result) {\n\t\t\t\t\t\tif (onVerificationFailure !== null) {\n\t\t\t\t\t\t\tonVerificationFailure();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (dialog !== null) {\n\t\t\t\tdialog.show();\n\t\t\t} else {\n\t\t\t\tif (result) {\n\t\t\t\t\tif (onVerificationSuccess !== null) {\n\t\t\t\t\t\tonVerificationSuccess();\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif (onVerificationFailure !== null) {\n\t\t\t\t\t\tonVerificationFailure();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tActionVerify.register();\n\tclass ActionConfirm extends Action {\n\t\tstatic NAME = \"Confirm\";\n\t\tstatic DEFAULTS = {\n\t\t\tconfirm: \"Please confirm this action\",\n\t\t\tcustomContent: null,\n\t\t\ttitle: \"The action requires confirmation\",\n\t\t\tbuttonConfirm: \"Confirm\",\n\t\t\tbuttonCancel: \"Cancel\",\n\t\t\tbuttonClose: true,\n\t\t\tonConfirm: null,\n\t\t\tescapeKey: true,\n\t\t\tdialogClass: \"\",\n\t\t\tfocus: \"\"\n\t\t};\n\t\tstatic extractOptions(el, prefix = null, map = null) {\n\t\t\tlet options = super.extractOptions(el, prefix, map);\n\t\t\tif (options.confirm.trim() == \"\") {\n\t\t\t\tdelete options.confirm;\n\t\t\t}\n\t\t\treturn options;\n\t\t}\n\t\tstatic execute(el, options, onNextAction, onCancelActions) {\n\t\t\tlet settings = PowerButtons.getActionSettings(this, options);\n\t\t\tlet dialog = Dialog.create({\n\t\t\t\ttitle: settings.title,\n\t\t\t\tmessage: settings.confirm,\n\t\t\t\tcustomContent: settings.customContent,\n\t\t\t\tbuttons: [settings.buttonConfirm, settings.buttonCancel],\n\t\t\t\tescapeKeyCancels: settings.escapeKey,\n\t\t\t\tclose: settings.buttonClose,\n\t\t\t\tdialogClass: settings.dialogClass,\n\t\t\t\tfocus: settings.focus\n\t\t\t}, null, function (result) {\n\t\t\t\tif (result === 0) {\n\t\t\t\t\tif (settings.onConfirm !== null) {\n\t\t\t\t\t\tlet result = null;\n\t\t\t\t\t\tif (typeof settings.onConfirm === \"function\") {\n\t\t\t\t\t\t\tresult = settings.onConfirm.bind(document)();\n\t\t\t\t\t\t} else if (typeof settings.onConfirm === \"string\") {\n\t\t\t\t\t\t\tresult = function () {\n\t\t\t\t\t\t\t\treturn eval(settings.onConfirm);\n\t\t\t\t\t\t\t}.bind(document)();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (onNextAction !== null) {\n\t\t\t\t\t\tonNextAction();\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif (onCancelActions !== null) {\n\t\t\t\t\t\tonCancelActions();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t\tdialog.show();\n\t\t}\n\t}\n\tActionConfirm.register();\n\tclass ActionAsyncTask extends Action {\n\t\tstatic NAME = \"AsyncTask\";\n\t\tstatic DEFAULTS = {\n\t\t\ttask: null,\n\t\t\tmessage: \"Please wait...\",\n\t\t\tcustomContent: null,\n\t\t\ttitle: null,\n\t\t\tbuttonCancel: \"Cancel\",\n\t\t\tcancel: null,\n\t\t\theader: true,\n\t\t\tfooter: true,\n\t\t\tdialogClass: \"\",\n\t\t\tfocus: \"\"\n\t\t};\n\t\tstatic extractOptions(el, prefix = null, map = null) {\n\t\t\treturn super.extractOptions(el, prefix, {\n\t\t\t\ttask: \"asynctask\"\n\t\t\t});\n\t\t}\n\t\tstatic execute(el, options, onNextAction, onCancelActions) {\n\t\t\tlet settings = PowerButtons.getActionSettings(this, options);\n\t\t\tif (settings.task === null) {\n\t\t\t\tconsole.error(\"The task to execute cannot be null\");\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tlet task = null;\n\t\t\tif (typeof settings.task === \"string\") {\n\t\t\t\ttask = async function () {\n\t\t\t\t\treturn await eval(settings.task);\n\t\t\t\t};\n\t\t\t} else if (typeof settings.task === \"function\") {\n\t\t\t\ttask = settings.task;\n\t\t\t} else {\n\t\t\t\tconsole.error(\"The task to execute must be either a string or a function\");\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tlet buttons = [];\n\t\t\tlet cancelHandler = null;\n\t\t\tif (settings.cancel !== null) {\n\t\t\t\tbuttons = [settings.buttonCancel];\n\t\t\t\tif (typeof settings.cancel === \"string\") {\n\t\t\t\t\tcancelHandler = function () {\n\t\t\t\t\t\teval(settings.cancel);\n\t\t\t\t\t};\n\t\t\t\t} else if (typeof settings.cancel === \"function\") {\n\t\t\t\t\tcancelHandler = settings.cancel;\n\t\t\t\t} else {\n\t\t\t\t\tconsole.error(\"The cancel handler must be either a string or a function\");\n\t\t\t\t}\n\t\t\t}\n\t\t\tlet dialog = Dialog.create({\n\t\t\t\ttitle: settings.title,\n\t\t\t\tmessage: settings.message,\n\t\t\t\tcustomContent: settings.customContent,\n\t\t\t\tbuttons: buttons,\n\t\t\t\tescapeKeyCancels: false,\n\t\t\t\tclose: false,\n\t\t\t\theader: options.header !== undefined ? settings.header : settings.title !== null && settings.title != \"\",\n\t\t\t\tfooter: options.footer !== undefined ? settings.footer : cancelHandler !== null,\n\t\t\t\tdialogClass: settings.dialogClass,\n\t\t\t\tfocus: settings.focus\n\t\t\t}, function () {\n\t\t\t\tcancelHandler();\n\t\t\t\tonCancelActions();\n\t\t\t}, function (result) {\n\t\t\t\tif (onNextAction !== null) {\n\t\t\t\t\tonNextAction();\n\t\t\t\t}\n\t\t\t});\n\t\t\tdialog.show().then(function () {\n\t\t\t\ttask().finally(function () {\n\t\t\t\t\tdialog.hide();\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t}\n\tActionAsyncTask.register();\n\tclass ActionShowMessage extends Action {\n\t\tstatic NAME = \"ShowMessage\";\n\t\tstatic DEFAULTS = {\n\t\t\tshowmessage: \"This is a message\",\n\t\t\tcustomContent: null,\n\t\t\ttitle: null,\n\t\t\tbuttonAccept: \"Accept\",\n\t\t\tescapeKey: true,\n\t\t\tbuttonClose: true,\n\t\t\theader: true,\n\t\t\tfooter: true,\n\t\t\tdialogClass: \"\",\n\t\t\tfocus: \"\"\n\t\t};\n\t\tstatic execute(el, options, onNextAction, onCancelActions) {\n\t\t\tlet settings = PowerButtons.getActionSettings(this, options);\n\t\t\tlet dialog = Dialog.create({\n\t\t\t\ttitle: settings.title,\n\t\t\t\tmessage: settings.showmessage,\n\t\t\t\tcustomContent: settings.customContent,\n\t\t\t\tbuttons: [settings.buttonAccept],\n\t\t\t\tescapeKeyCancels: settings.escapeKey,\n\t\t\t\tclose: settings.buttonClose,\n\t\t\t\theader: options.header !== undefined ? settings.header : settings.title !== null && settings.title != \"\",\n\t\t\t\tfooter: options.footer !== undefined ? settings.footer : settings.buttonAccept !== null && settings.buttonAccept != \"\",\n\t\t\t\tdialogClass: settings.dialogClass,\n\t\t\t\tfocus: settings.focus\n\t\t\t}, null, function (result) {\n\t\t\t\tif (onNextAction !== null) {\n\t\t\t\t\tonNextAction();\n\t\t\t\t}\n\t\t\t});\n\t\t\tdialog.show();\n\t\t}\n\t}\n\tActionShowMessage.register();\n\tclass ActionFormset extends Action {\n\t\tstatic NAME = \"Formset\";\n\t\tstatic DEFAULTS = {\n\t\t\tform: null,\n\t\t\tfields: {}\n\t\t};\n\t\tstatic extractOptions(el, prefix = null, map = null) {\n\t\t\tlet options = super.extractOptions(el, prefix, {\n\t\t\t\tform: \"formset\"\n\t\t\t});\n\t\t\tlet fields = {};\n\t\t\tfor (let key in el.dataset) {\n\t\t\t\tif (key.startsWith(prefix)) {\n\t\t\t\t\tlet fieldname = key.substring(prefix.length);\n\t\t\t\t\tif (fieldname === \"\") {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tif (fieldname[0] !== fieldname[0].toUpperCase()) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tfieldname = fieldname.toLocaleLowerCase();\n\t\t\t\t\tfields[fieldname] = el.dataset[key];\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (options.fields === undefined) {\n\t\t\t\toptions.fields = {};\n\t\t\t}\n\t\t\tObject.assign(options.fields, fields);\n\t\t\treturn options;\n\t\t}\n\t\tstatic execute(el, options, onNextAction, onCancelActions) {\n\t\t\tlet settings = PowerButtons.getActionSettings(this, options);\n\t\t\tlet formToSet = null;\n\t\t\tlet inputFields = [];\n\t\t\tlet elements = [];\n\t\t\tif (settings.form == \"\") {\n\t\t\t\tif (el.form !== null) {\n\t\t\t\t\tformToSet = el.form;\n\t\t\t\t} else {\n\t\t\t\t\telements = Array.from(document.querySelectorAll(\"input\")).filter(input => input.form === null);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tformToSet = searchForm(settings.form);\n\t\t\t\tif (formToSet === null) {\n\t\t\t\t\tconsole.error(`Form not found ${settings.form}`);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (formToSet !== null) {\n\t\t\t\telements = Array.from(formToSet.elements);\n\t\t\t}\n\t\t\telements.forEach(element => {\n\t\t\t\tif (element.name !== \"\") {\n\t\t\t\t\tinputFields[element.name.toLocaleLowerCase()] = element;\n\t\t\t\t}\n\t\t\t\tif (element.id !== \"\") {\n\t\t\t\t\tinputFields[element.id.toLocaleLowerCase()] = element;\n\t\t\t\t}\n\t\t\t});\n\t\t\tfor (let field in settings.fields) {\n\t\t\t\tif (inputFields[field] !== undefined) {\n\t\t\t\t\tlet value = settings.fields[field];\n\t\t\t\t\tlet result = getValueWithJavascriptSupport(value, formToSet !== null ? formToSet : inputFields);\n\t\t\t\t\tif (typeof result === \"function\") {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tresult = result();\n\t\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\t\tconsole.error(`Error executing ${value}`, e);\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tinputFields[field].value = result;\n\t\t\t\t}\n\t\t\t}\n\t\t\tonNextAction();\n\t\t}\n\t}\n\tActionFormset.register();\n\tclass ActionFormButton extends Action {\n\t\tstatic NAME = \"FormButton\";\n\t\tstatic DEFAULTS = {\n\t\t\tformbutton: null,\n\t\t\tmethod: \"post\",\n\t\t\tformClass: \"formbutton\",\n\t\t\tconvertCase: \"none\",\n\t\t\tformId: null,\n\t\t\tfields: {}\n\t\t};\n\t\tstatic extractOptions(el, prefix = null, map = null) {\n\t\t\tlet options = super.extractOptions(el, prefix, map);\n\t\t\tlet fields = {};\n\t\t\tprefix = prefix + \"Field\";\n\t\t\tfor (let key in el.dataset) {\n\t\t\t\tif (key.startsWith(prefix)) {\n\t\t\t\t\tlet fieldname = key.substring(prefix.length);\n\t\t\t\t\tif (fieldname === \"\") {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tif (fieldname[0] !== fieldname[0].toUpperCase()) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tswitch (options.convertCase) {\n\t\t\t\t\tcase \"kebab\":\n\t\t\t\t\t\tfieldname = pascalToKebab(fieldname);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"snake\":\n\t\t\t\t\t\tfieldname = pascalToSnake(fieldname);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"camel\":\n\t\t\t\t\t\tfieldname = pascalToCamel(fieldname);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"pascal\":\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tfields[fieldname] = el.dataset[key];\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (options.fields === undefined) {\n\t\t\t\toptions.fields = {};\n\t\t\t}\n\t\t\tObject.assign(options.fields, fields);\n\t\t\treturn options;\n\t\t}\n\t\tstatic initialize(el, values = {}) {\n\t\t\tlet settings = PowerButtons.getActionSettings(this, values);\n\t\t\tlet form = document.createElement(\"form\");\n\t\t\tform.method = settings.method;\n\t\t\tif (!isEmpty(settings.formbutton)) {\n\t\t\t\tform.action = settings.formbutton;\n\t\t\t}\n\t\t\tif (settings.formId !== null) {\n\t\t\t\tform.id = settings.formId;\n\t\t\t}\n\t\t\tlet cssClasses = settings.formClass.split(\" \");\n\t\t\tfor (var i = 0; i < cssClasses.length; i++) {\n\t\t\t\tif (!isEmpty(cssClasses[i])) {\n\t\t\t\t\tform.classList.add(cssClasses[i]);\n\t\t\t\t}\n\t\t\t}\n\t\t\tel.type = \"submit\";\n\t\t\tlet fields = {};\n\t\t\tfor (let fieldName in settings.fields) {\n\t\t\t\tfields[fieldName] = getValueWithJavascriptSupport(settings.fields[fieldName], form);\n\t\t\t}\n\t\t\tlet pendingFields = {};\n\t\t\tfor (let fieldName in fields) {\n\t\t\t\tlet input = document.createElement(\"input\");\n\t\t\t\tinput.type = \"hidden\";\n\t\t\t\tinput.name = fieldName;\n\t\t\t\tif (typeof fields[fieldName] === \"function\") {\n\t\t\t\t\tinput.value = \"\";\n\t\t\t\t\tpendingFields[fieldName] = fields[fieldName];\n\t\t\t\t} else {\n\t\t\t\t\tinput.value = fields[fieldName];\n\t\t\t\t}\n\t\t\t\tform.appendChild(input);\n\t\t\t}\n\t\t\tel.parentNode.replaceChild(form, el);\n\t\t\tform.appendChild(el);\n\t\t\tif (Object.keys(pendingFields).length > 0) {\n\t\t\t\tsettings.fields = pendingFields;\n\t\t\t\tsettings._formObject = form;\n\t\t\t\tsuper.initialize(el, settings);\n\t\t\t}\n\t\t}\n\t\tstatic execute(el, options, onNextAction, onCancelActions) {\n\t\t\tlet settings = PowerButtons.getActionSettings(this, options);\n\t\t\tlet error = false;\n\t\t\tfor (let fieldName in settings.fields) {\n\t\t\t\ttry {\n\t\t\t\t\tlet value = settings.fields[fieldName]();\n\t\t\t\t\tsettings._formObject[fieldName].value = value;\n\t\t\t\t} catch (e) {\n\t\t\t\t\tconsole.error(`Error obtaining value for field ${fieldName}: ${e}`);\n\t\t\t\t\terror = true;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (error) {\n\t\t\t\tonCancelActions();\n\t\t\t} else {\n\t\t\t\tonNextAction();\n\t\t\t}\n\t\t}\n\t}\n\tActionFormButton.register();\n})(window);\n"],"names":["exports","pascalToSnake","str","replace","letter","toLowerCase","pascalToKebab","snakeCaseToCamel","g","toUpperCase","pascalToCamel","charAt","slice","CamelToCamel","isElement","el","Element","HTMLDocument","parseBoolean","value","createTag","tag","props","html","let","parts_id","split","id","prop","parts","length","join","innerHTML","className","filter","e","trim","document","createElement","undefined","setAttribute","appendToElement","args","filtered","append","searchForm","formName","formObject","forms","querySelector","console","warn","tagName","getValueWithJavascriptSupport","context","bind","internalValue","startsWith","f","substring","eval","error","promiseForEvent","event","resolveFunction","promise","Promise","resolve","addEventListener","handler","removeEventListener","isEmpty","obj","Array","Object","keys","window","powerButtons","param1","param2","param3","pluginName","els","options","actionName","PowerButtons","actionsRegistered","toLocaleLowerCase","querySelectorAll","arguments","valid","HTMLElement","plugin","initialize","discover","version","plugins","discoverAll","$","fn","this","DialogLegacy","DEFAULTS","message","buttonCount","constructor","onButton","onHidden","buttons","result","dispose","show","alert","confirm","button","text","Dialog","create","bootstrap","Modal","selector","dialogFunction","Error","title","customContent","buttonClasses","buttonPanelClasses","escapeKeyCancels","header","footer","body","close","dialogClass","focus","dialog","modal","parsedButtons","i","class","Math","min","push","_hiddenHandler","remove","_build_dialog","backdrop","keyboard","then","hide","_handleButton","index","buttonObject","closeButton","tabindex","type","aria-label","buttonClass","map","dialogClasses","role","aria-hidden","data-keyboard","confirmDialog","onConfirm","onCancel","cancellable","alertDialog","onAccept","loadingDialog","canCancel","utils","assign","registerAction","action","NAME","defaults","getActionSettings","defaultsWindow","addAction","addActionSupport","appendAction","_powerButtons","reset","current_action","actions","back_onclick","onclick","handlerClick","preventDefault","currentActionSettings","onNextAction","stopImmediatePropagation","override","click","dispatchEvent","Event","execute","entries","forEach","key","Action","register","extractOptions","prefix","targetKey","dataset","values","skipInitialized","currentOptions","_discover","indexOf","includes","onCancelActions","ActionOverride","form","overridden","buttonAccept","escapeKey","settings","bindObject","buttonClose","ActionVerify","verify","verified","notVerified","customContentVerified","customContentNotVerified","titleNotVerified","titleVerified","onVerificationSuccess","onVerificationFailure","ActionConfirm","buttonConfirm","buttonCancel","super","ActionAsyncTask","task","cancel","async","cancelHandler","finally","ActionShowMessage","showmessage","ActionFormset","fields","fieldname","field","formToSet","inputFields","elements","from","input","element","name","ActionFormButton","formbutton","method","formClass","convertCase","formId","cssClasses","classList","add","fieldName","pendingFields","appendChild","parentNode","replaceChild","_formObject"],"mappings":"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"}