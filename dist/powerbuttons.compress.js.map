{"version":3,"file":"powerbuttons.compress.js.map","sources":["powerbuttons.js"],"sourcesContent":["/**\n   Copyright 2023 Carlos A. (https://github.com/dealfonso)\n\n   Licensed under the Apache License, Version 2.0 (the \"License\");\n   you may not use this file except in compliance with the License.\n   You may obtain a copy of the License at\n\n       http://www.apache.org/licenses/LICENSE-2.0\n\n   Unless required by applicable law or agreed to in writing, software\n   distributed under the License is distributed on an \"AS IS\" BASIS,\n   WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n   See the License for the specific language governing permissions and\n   limitations under the License.\n*/\n\n(function (exports) {\n\t\"use strict\";\n\tif (typeof exports === \"undefined\") {\n\t\tvar exports = window;\n\t}\n\texports.powerButtons = function (param1, param2 = null, param3 = null) {\n\t\tlet pluginName = null;\n\t\tlet els = [];\n\t\tlet options = {};\n\n\t\tfunction registeredPlugin(pluginName) {\n\t\t\tfor (let actionName in PowerButtons.actionsRegistered) {\n\t\t\t\tif (pluginName.toLocaleLowerCase() === actionName.toLocaleLowerCase()) {\n\t\t\t\t\treturn actionName;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn null;\n\t\t}\n\t\tif (typeof param1 === \"string\") {\n\t\t\tpluginName = registeredPlugin(param1);\n\t\t\tif (pluginName === null) {\n\t\t\t\tels = document.querySelectorAll(param1);\n\t\t\t\tif (els.length === 0) {\n\t\t\t\t\tconsole.error(`Parameter ${param1} is neither the name of a registered plugin nor a valid selector`);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (arguments.length > 2) {\n\t\t\t\t\tconsole.warn(`Ignoring extra parameters`);\n\t\t\t\t}\n\t\t\t\toptions = param2;\n\t\t\t} else {\n\t\t\t\tlet valid = false;\n\t\t\t\tif (typeof param2 === \"string\") {\n\t\t\t\t\tels = document.querySelectorAll(param2);\n\t\t\t\t\tvalid = true;\n\t\t\t\t} else if (param2 instanceof HTMLElement) {\n\t\t\t\t\tels = [param2];\n\t\t\t\t\tvalid = true;\n\t\t\t\t} else if (param2.length !== undefined) {\n\t\t\t\t\tvalid = true;\n\t\t\t\t\tfor (let e in param2) {\n\t\t\t\t\t\tif (!(param2[e] instanceof HTMLElement)) {\n\t\t\t\t\t\t\tvalid = false;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (valid) {\n\t\t\t\t\t\tels = param2;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (!valid) {\n\t\t\t\t\tconsole.error(`Parameter ${param2} is neither a valid selector, a list of elements or an HTMLElement`);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\toptions = param3;\n\t\t\t}\n\t\t} else if (param1 instanceof HTMLElement) {\n\t\t\tels = [param1];\n\t\t} else if (param1.length !== undefined) {\n\t\t\tfor (let e in param1) {\n\t\t\t\tif (!(param1[e] instanceof HTMLElement)) {\n\t\t\t\t\tconsole.error(`Parameter ${param1} is neither a valid selector, a list of elements or an HTMLElement`);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\tels = param1;\n\t\t} else {\n\t\t\tconsole.error(`Parameter ${param1} is neither a valid selector, a list of elements or an HTMLElement`);\n\t\t\treturn;\n\t\t}\n\t\tif (options === null) {\n\t\t\toptions = {};\n\t\t}\n\t\tif (typeof options !== \"object\") {\n\t\t\tconsole.error(`Options parameter must be an object`);\n\t\t\treturn;\n\t\t}\n\t\tif (pluginName !== null) {\n\t\t\tlet plugin = PowerButtons.actionsRegistered[pluginName];\n\t\t\tfor (let el of els) {\n\t\t\t\tplugin.initialize(el, options);\n\t\t\t}\n\t\t} else {\n\t\t\tPowerButtons.discover(els, options);\n\t\t}\n\t};\n\texports.powerButtons.version = \"2.2.2\";\n\texports.powerButtons.plugins = function () {\n\t\treturn Object.keys(PowerButtons.actionsRegistered);\n\t};\n\texports.powerButtons.discoverAll = function () {\n\t\tPowerButtons.discoverAll();\n\t};\n\texports.powerButtons.discover = function (els, options) {\n\t\tPowerButtons.discover(els, options);\n\t};\n\tif (document.addEventListener !== undefined) {\n\t\tdocument.addEventListener(\"DOMContentLoaded\", function (e) {\n\t\t\tPowerButtons.discoverAll();\n\t\t});\n\t}\n\tif (exports.$ !== undefined) {\n\t\texports.$.fn.powerButtons = function (pluginName, options = {}) {\n\t\t\texports.powerButtons(pluginName, this, options);\n\t\t\treturn this;\n\t\t};\n\t\texports.$.fn.powerButtons.version = exports.powerButtons.version;\n\t\texports.$.fn.powerButtons.plugins = exports.powerButtons.plugins;\n\t}\n\n\tfunction pascalToSnake(str) {\n\t\treturn str.replace(/[A-Z]/g, letter => `_${letter.toLowerCase()}`).replace(/^_*/, \"\");\n\t}\n\n\tfunction pascalToKebab(str) {\n\t\treturn str.replace(/[A-Z]/g, letter => `-${letter.toLowerCase()}`).replace(/^-*/, \"\");\n\t}\n\n\tfunction snakeCaseToCamel(str) {\n\t\treturn str.replace(/-([a-z])/g, g => g[1].toUpperCase());\n\t}\n\n\tfunction pascalToCamel(str) {\n\t\treturn str.charAt(0).toLowerCase() + str.slice(1);\n\t}\n\n\tfunction CamelToCamel(str) {\n\t\treturn str.charAt(0).toUpperCase() + str.slice(1);\n\t}\n\n\tfunction isElement(el) {\n\t\treturn el instanceof Element || el instanceof HTMLDocument;\n\t}\n\n\tfunction parseBoolean(value) {\n\t\tif (typeof value === \"boolean\") {\n\t\t\treturn value;\n\t\t}\n\t\tif (typeof value === \"string\") {\n\t\t\tvalue = value.toLowerCase();\n\t\t\tif (value === \"true\" || value === \"yes\" || value === \"1\") {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\t\treturn !!value;\n\t}\n\n\tfunction createTag(tag, props = {}, html = null) {\n\t\tlet parts_id = tag.split(\"#\");\n\t\tlet id = null;\n\t\tif (parts_id.length == 1) {\n\t\t\ttag = parts_id[0];\n\t\t} else {\n\t\t\tparts_id[1] = parts_id[1].split(\".\");\n\t\t\tid = parts_id[1][0];\n\t\t\ttag = [parts_id[0], ...parts_id[1].slice(1)].join(\".\");\n\t\t}\n\t\tlet parts = tag.split(\".\");\n\t\ttag = parts[0];\n\t\tif (tag === \"\") {\n\t\t\ttag = \"div\";\n\t\t}\n\t\tif (typeof props === \"string\") {\n\t\t\thtml = props;\n\t\t\tprops = {};\n\t\t}\n\t\tif (html !== null) {\n\t\t\tprops.innerHTML = html;\n\t\t}\n\t\tif (id !== null) {\n\t\t\tprops.id = id;\n\t\t}\n\t\tprops.className = [props.className, ...parts.slice(1)].filter(function (e) {\n\t\t\treturn `${e}`.trim() !== \"\";\n\t\t}).join(\" \");\n\t\tlet el = document.createElement(tag);\n\t\tfor (let prop in props) {\n\t\t\tif (el[prop] !== undefined) {\n\t\t\t\tel[prop] = props[prop];\n\t\t\t} else {\n\t\t\t\tel.setAttribute(prop, props[prop]);\n\t\t\t}\n\t\t}\n\t\treturn el;\n\t}\n\n\tfunction appendToElement(el, ...args) {\n\t\tlet filtered = args.filter(e => e !== null && e !== undefined);\n\t\tel.append(...filtered);\n\t\treturn el;\n\t}\n\n\tfunction searchForm(formName) {\n\t\tlet formObject = null;\n\t\tif (formName !== null) {\n\t\t\tformObject = document.forms[formName];\n\t\t\tif (formObject === undefined) {\n\t\t\t\tformObject = document.querySelector(formName);\n\t\t\t\tif (formObject === null) {\n\t\t\t\t\tconsole.warn(`form ${formName} not found`);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (formObject !== null) {\n\t\t\tif (formObject.tagName.toLowerCase() !== \"form\") {\n\t\t\t\tconsole.warn(`form ${formName} is not a form`);\n\t\t\t}\n\t\t}\n\t\treturn formObject;\n\t}\n\n\tfunction getValueWithJavascriptSupport(value, context = null) {\n\t\tif (typeof value === \"function\") {\n\t\t\treturn value.bind(context);\n\t\t}\n\t\tif (typeof value === \"string\") {\n\t\t\tlet internalValue = value.trim();\n\t\t\tif (internalValue.startsWith(\"javascript:\")) {\n\t\t\t\ttry {\n\t\t\t\t\tlet f = internalValue.substring(11);\n\t\t\t\t\tvalue = function () {\n\t\t\t\t\t\treturn eval(f);\n\t\t\t\t\t}.bind(context);\n\t\t\t\t} catch (e) {\n\t\t\t\t\tconsole.error(`Error executing javascript code ${internalValue.substring(11)}, error: ${e}`);\n\t\t\t\t\tvalue = null;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn value;\n\t}\n\n\tfunction promiseForEvent(el, event) {\n\t\tif (el === null || el === undefined) {\n\t\t\treturn Promise.resolve();\n\t\t}\n\t\tlet resolveFunction = null;\n\t\tlet promise = new Promise(resolve => {\n\t\t\tresolveFunction = resolve;\n\t\t});\n\t\tlet handler = function () {\n\t\t\tel.removeEventListener(event, handler);\n\t\t\tresolveFunction();\n\t\t};\n\t\tel.addEventListener(event, handler);\n\t\treturn promise;\n\t}\n\n\tfunction isEmpty(obj) {\n\t\tif (obj === null || obj === undefined) {\n\t\t\treturn true;\n\t\t}\n\t\tif (obj instanceof Array) {\n\t\t\treturn obj.length === 0;\n\t\t}\n\t\tif (obj instanceof Object) {\n\t\t\treturn Object.keys(obj).length === 0;\n\t\t}\n\t\tif (typeof obj === \"string\") {\n\t\t\treturn obj.trim() === \"\";\n\t\t}\n\t\treturn false;\n\t}\n\tclass DialogLegacy {\n\t\tDEFAULTS = {\n\t\t\tmessage: \"Main message\",\n\t\t\tbuttonCount: 2\n\t\t};\n\t\tconstructor(options = {}, onButton = null, onHidden = null) {\n\t\t\tthis.options = {\n\t\t\t\t...this.DEFAULTS,\n\t\t\t\t...options\n\t\t\t};\n\t\t\tthis.buttonCount = this.options.buttons.length;\n\t\t\tthis.options.buttons = [\"Accept\", \"Cancel\"];\n\t\t\tthis.result = null;\n\t\t\tthis.onButton = onButton;\n\t\t\tthis.onHidden = onHidden;\n\t\t}\n\t\tdispose() {}\n\t\tshow(onButton = null, onHidden = null) {\n\t\t\tif (onButton !== null) {\n\t\t\t\tthis.onButton = onButton;\n\t\t\t}\n\t\t\tif (onHidden !== null) {\n\t\t\t\tthis.onHidden = onHidden;\n\t\t\t}\n\t\t\tswitch (this.buttonCount) {\n\t\t\tcase 0:\n\t\t\tcase 1:\n\t\t\t\talert(this.message);\n\t\t\t\tthis.result = 0;\n\t\t\t\tbreak;\n\t\t\tcase 2:\n\t\t\t\tthis.result = confirm(this.options.message) ? 0 : 1;\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tthrow `Unsupported button count ${this.buttonCount}`;\n\t\t\t}\n\t\t\tif (this.onButton !== null) {\n\t\t\t\tthis.onButton(this.result, {\n\t\t\t\t\tbutton: this.result,\n\t\t\t\t\ttext: this.options.buttons[this.result]\n\t\t\t\t}, null);\n\t\t\t}\n\t\t\tif (this.onHidden !== null) {\n\t\t\t\tthis.onHidden(this.result, {\n\t\t\t\t\tbutton: this.result,\n\t\t\t\t\ttext: this.options.buttons[this.result]\n\t\t\t\t}, null);\n\t\t\t}\n\t\t}\n\t}\n\tclass Dialog {\n\t\tstatic create(options = {}, onButton = null, onHidden = null) {\n\t\t\tif (exports.bootstrap === undefined || exports.bootstrap.Modal === undefined) {\n\t\t\t\treturn new DialogLegacy(options, onButton, onHidden);\n\t\t\t}\n\t\t\tif (options.selector !== undefined && options.selector !== null || options.dialogFunction !== undefined && options.dialogFunction !== null) {\n\t\t\t\tthrow new Error(\"not implemented, yet\");\n\t\t\t}\n\t\t\treturn new Dialog(options, onButton, onHidden);\n\t\t}\n\t\tDEFAULTS = {\n\t\t\ttitle: \"Title\",\n\t\t\tmessage: \"Main message\",\n\t\t\tcustomContent: null,\n\t\t\tbuttons: [\"Accept\"],\n\t\t\tbuttonClasses: [\"btn-primary\", \"btn-secondary\"],\n\t\t\tbuttonPanelClasses: [\"text-end\"],\n\t\t\tescapeKeyCancels: true,\n\t\t\theader: true,\n\t\t\tfooter: true,\n\t\t\tbody: true,\n\t\t\tclose: true,\n\t\t\tdialogClass: \"fade\",\n\t\t\tfocus: \"\",\n\t\t\tonDialogCreated: htmlElement => {}\n\t\t};\n\t\tdialog = null;\n\t\toptions = null;\n\t\tmodal = null;\n\t\tresult = null;\n\t\tonHidden = null;\n\t\tonButton = null;\n\t\tconstructor(options = {}, onButton = null, onHidden = null) {\n\t\t\tif (exports.bootstrap === undefined || exports.bootstrap.Modal === undefined) {\n\t\t\t\tthrow new Error(\"Bootstrap is required to use this class\");\n\t\t\t}\n\t\t\tthis.options = {\n\t\t\t\t...this.DEFAULTS,\n\t\t\t\t...options\n\t\t\t};\n\t\t\tlet parsedButtons = [];\n\t\t\tfor (let i = 0; i < this.options.buttons.length; i++) {\n\t\t\t\tlet button = this.options.buttons[i];\n\t\t\t\tif (typeof button === \"string\") {\n\t\t\t\t\tbutton = {\n\t\t\t\t\t\ttext: button\n\t\t\t\t\t};\n\t\t\t\t} else {\n\t\t\t\t\tif (button.text === undefined) {\n\t\t\t\t\t\tbutton.text = `Button ${i}`;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (button.class === undefined) {\n\t\t\t\t\tbutton.class = this.options.buttonClasses[Math.min(i, this.options.buttonClasses.length - 1)];\n\t\t\t\t}\n\t\t\t\tparsedButtons.push(button);\n\t\t\t}\n\t\t\tthis.options.buttons = parsedButtons;\n\t\t\tthis.dialog = null;\n\t\t\tthis.modal = null;\n\t\t\tthis.result = null;\n\t\t\tthis.onButton = onButton;\n\t\t\tthis.onHidden = onHidden;\n\t\t\tthis._hiddenHandler = this._hiddenHandler.bind(this);\n\t\t\tthis._hideHandler = this._hideHandler.bind(this);\n\t\t}\n\t\t_hiddenHandler() {\n\t\t\tthis.dialog.removeEventListener(\"hidden.bs.modal\", this._hiddenHandler);\n\t\t\tif (this.onHidden !== null) {\n\t\t\t\tif (this.result !== null && this.result >= 0) {\n\t\t\t\t\tthis.onHidden(this.result, {\n\t\t\t\t\t\tbutton: this.result,\n\t\t\t\t\t\ttext: this.options.buttons[this.result]\n\t\t\t\t\t});\n\t\t\t\t} else {\n\t\t\t\t\tthis.onHidden(this.result, null);\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.dispose();\n\t\t}\n\t\t_hideHandler() {\n\t\t\tthis.dialog.removeEventListener(\"hide.bs.modal\", this._hideHandler);\n\t\t\tif (document.activeElement) {\n\t\t\t\tdocument.activeElement.blur();\n\t\t\t}\n\t\t}\n\t\tdispose() {\n\t\t\tif (this.modal !== null) {\n\t\t\t\tthis.modal.dispose();\n\t\t\t\tthis.modal = null;\n\t\t\t}\n\t\t\tthis.dialog.remove();\n\t\t\tthis.dialog = null;\n\t\t}\n\t\tshow(onButton = null, onHidden = null) {\n\t\t\tif (this.dialog === null) {\n\t\t\t\tthis.dialog = this._build_dialog(this.options);\n\t\t\t\tdocument.body.append(this.dialog);\n\t\t\t\tif (this.options.onDialogCreated !== null) {\n\t\t\t\t\tif (typeof this.options.onDialogCreated === \"function\") {\n\t\t\t\t\t\tthis.options.onDialogCreated(this.dialog);\n\t\t\t\t\t} else if (typeof this.options.onDialogCreated === \"string\") {\n\t\t\t\t\t\teval(this.options.onDialogCreated);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (this.modal === null) {\n\t\t\t\tthis.modal = new bootstrap.Modal(this.dialog, {\n\t\t\t\t\tbackdrop: this.options.escapeKeyCancels ? true : \"static\",\n\t\t\t\t\tkeyboard: this.options.escapeKeyCancels\n\t\t\t\t});\n\t\t\t}\n\t\t\tthis.dialog.addEventListener(\"hidden.bs.modal\", this._hiddenHandler);\n\t\t\tthis.dialog.addEventListener(\"hide.bs.modal\", this._hideHandler);\n\t\t\tthis.result = null;\n\t\t\tif (onButton !== null) {\n\t\t\t\tthis.onButton = onButton;\n\t\t\t}\n\t\t\tif (onHidden !== null) {\n\t\t\t\tthis.onHidden = onHidden;\n\t\t\t}\n\t\t\tthis.modal.show();\n\t\t\treturn promiseForEvent(this.dialog, \"shown.bs.modal\").then(() => {\n\t\t\t\tif (this.options.focus !== \"\") {\n\t\t\t\t\tthis.dialog.querySelector(this.options.focus)?.focus();\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\thide() {\n\t\t\tthis.modal.hide();\n\t\t\treturn promiseForEvent(this.dialog, \"hidden.bs.modal\");\n\t\t}\n\t\t_handleButton(index, button, buttonObject) {\n\t\t\tthis.result = index;\n\t\t\tlet autoHide = true;\n\t\t\tif (this.onButton !== null) {\n\t\t\t\tautoHide = !(this.onButton(index, button, buttonObject) === false);\n\t\t\t}\n\t\t\tif (autoHide) {\n\t\t\t\tthis.hide();\n\t\t\t}\n\t\t}\n\t\t_build_dialog(options = {}) {\n\t\t\tlet header = null;\n\t\t\tlet closeButton = null;\n\t\t\tif (parseBoolean(options.close)) {\n\t\t\t\tcloseButton = createTag(\"button.close.btn-close\", {\n\t\t\t\t\ttabindex: \"-1\",\n\t\t\t\t\ttype: \"button\",\n\t\t\t\t\t\"aria-label\": \"Close\"\n\t\t\t\t});\n\t\t\t\tcloseButton.addEventListener(\"click\", () => this._handleButton(-1, null, closeButton));\n\t\t\t}\n\t\t\tif (parseBoolean(options.header)) {\n\t\t\t\theader = createTag(\".modal-header\");\n\t\t\t\tif (options.title !== null) {\n\t\t\t\t\theader.append(appendToElement(createTag(\".modal-title\"), appendToElement(createTag(\"h5\", options.title))));\n\t\t\t\t}\n\t\t\t\tif (parseBoolean(options.close)) {\n\t\t\t\t\theader.append(closeButton);\n\t\t\t\t}\n\t\t\t}\n\t\t\tlet buttons = [];\n\t\t\tif (options.buttons !== null) {\n\t\t\t\tfor (let i = 0; i < options.buttons.length; i++) {\n\t\t\t\t\tlet button = options.buttons[i];\n\t\t\t\t\tlet buttonClass = button.class.split(\" \").map(e => e.trim()).filter(e => e !== \"\").join(\".\");\n\t\t\t\t\tif (options.footer === false) {\n\t\t\t\t\t\tbuttonClass += \".mx-1\";\n\t\t\t\t\t}\n\t\t\t\t\tif (buttonClass !== \"\") {\n\t\t\t\t\t\tbuttonClass = \".\" + buttonClass;\n\t\t\t\t\t}\n\t\t\t\t\tlet buttonObject = createTag(\"button.btn\" + buttonClass + \".button\" + i, {\n\t\t\t\t\t\ttype: \"button\",\n\t\t\t\t\t\ttabindex: i + 1\n\t\t\t\t\t}, button.text);\n\t\t\t\t\tbuttonObject.addEventListener(\"click\", function () {\n\t\t\t\t\t\tthis._handleButton(i, button, buttonObject);\n\t\t\t\t\t\tif (button.handler !== undefined && button.handler !== null) {\n\t\t\t\t\t\t\tbutton.handler(i, button, buttonObject);\n\t\t\t\t\t\t}\n\t\t\t\t\t}.bind(this));\n\t\t\t\t\tbuttons.push(buttonObject);\n\t\t\t\t}\n\t\t\t}\n\t\t\tlet footer = null;\n\t\t\tif (parseBoolean(options.footer)) {\n\t\t\t\tfooter = appendToElement(createTag(\".modal-footer\"), ...buttons);\n\t\t\t}\n\t\t\tlet body = null;\n\t\t\tif (parseBoolean(options.body)) {\n\t\t\t\tbody = createTag(\".modal-body\");\n\t\t\t\tif (header === null) {\n\t\t\t\t\tif (parseBoolean(options.close)) {\n\t\t\t\t\t\tbody.append(appendToElement(createTag(\".text-end\"), closeButton));\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (options.message !== null) {\n\t\t\t\t\tbody.append(createTag(\"p.message.text-center\", options.message));\n\t\t\t\t}\n\t\t\t\tif (options.customContent !== null) {\n\t\t\t\t\tbody.append(createTag(\".custom-content.mx-auto\", options.customContent));\n\t\t\t\t}\n\t\t\t\tif (footer === null) {\n\t\t\t\t\tlet buttonPanelClasses = options.buttonPanelClasses.map(e => e.trim()).filter(e => e !== \"\").join(\".\");\n\t\t\t\t\tif (buttonPanelClasses !== \"\") {\n\t\t\t\t\t\tbuttonPanelClasses = \".\" + buttonPanelClasses;\n\t\t\t\t\t}\n\t\t\t\t\tappendToElement(body, appendToElement(createTag(\".buttons\" + buttonPanelClasses), ...buttons));\n\t\t\t\t}\n\t\t\t}\n\t\t\tlet dialogClasses = options.dialogClass.split(\" \").map(e => e.trim()).filter(e => e !== \"\").join(\".\");\n\t\t\tif (dialogClasses !== \"\") {\n\t\t\t\tdialogClasses = \".\" + dialogClasses;\n\t\t\t}\n\t\t\tlet dialog = appendToElement(createTag(dialogClasses + \".modal.draggable\", {\n\t\t\t\ttabindex: \"-1\",\n\t\t\t\trole: \"dialog\",\n\t\t\t\t\"aria-hidden\": \"true\",\n\t\t\t\t\"data-keyboard\": \"false\"\n\t\t\t}), appendToElement(createTag(\".modal-dialog.modal-dialog-centered\", {\n\t\t\t\trole: \"document\"\n\t\t\t}), appendToElement(createTag(\".modal-content\"), header, body, footer)));\n\t\t\treturn dialog;\n\t\t}\n\t}\n\n\tfunction confirmDialog(message, title = \"this action needs confirmation\", onConfirm = null, onCancel = null, cancellable = true) {\n\t\tlet dialog = new Dialog({\n\t\t\ttitle: title,\n\t\t\tmessage: message,\n\t\t\tbuttons: [{\n\t\t\t\ttext: \"Cancel\",\n\t\t\t\tclass: \"btn-secondary\",\n\t\t\t\thandler: onCancel\n\t\t\t}, {\n\t\t\t\ttext: \"Confirm\",\n\t\t\t\tclass: \"btn-primary\",\n\t\t\t\thandler: onConfirm\n\t\t\t}],\n\t\t\tescapeKeyCancels: cancellable\n\t\t});\n\t\tdialog.show();\n\t\treturn dialog;\n\t}\n\n\tfunction alertDialog(message, title = \"Alert\", onAccept = null) {\n\t\tlet dialog = new Dialog({\n\t\t\ttitle: title,\n\t\t\tmessage: message,\n\t\t\tbuttons: [{\n\t\t\t\ttext: \"Accept\",\n\t\t\t\tclass: \"btn-primary\",\n\t\t\t\thandler: onAccept\n\t\t\t}],\n\t\t\tescapeKeyCancels: true\n\t\t});\n\t\tdialog.show();\n\t\treturn dialog;\n\t}\n\n\tfunction loadingDialog(message, customContent = null, canCancel = null) {\n\t\tif (typeof customContent === \"function\") {\n\t\t\tcanCancel = customContent;\n\t\t\tcustomContent = null;\n\t\t}\n\t\tlet dialog = new Dialog({\n\t\t\ttitle: null,\n\t\t\tmessage: message,\n\t\t\tbuttons: [{\n\t\t\t\ttext: \"Cancel\",\n\t\t\t\tclass: \"btn-primary\"\n\t\t\t}],\n\t\t\tcustomContent: customContent,\n\t\t\tescapeKeyCancels: false,\n\t\t\tclose: false,\n\t\t\theader: false,\n\t\t\tfooter: false\n\t\t}, canCancel);\n\t\tdialog.show();\n\t\treturn dialog;\n\t}\n\tif (exports.powerButtons.utils === undefined) {\n\t\texports.powerButtons.utils = {};\n\t}\n\tObject.assign(exports.powerButtons.utils, {\n\t\tconfirmDialog: confirmDialog,\n\t\talertDialog: alertDialog,\n\t\tloadingDialog: loadingDialog\n\t});\n\tclass PowerButtons {\n\t\tstatic actionsRegistered = {};\n\t\tstatic registerAction(action) {\n\t\t\tthis.actionsRegistered[action.NAME.toLowerCase()] = action;\n\t\t\tif (exports.powerButtons === undefined) {\n\t\t\t\texports.powerButtons = {};\n\t\t\t}\n\t\t\tif (exports.powerButtons.defaults === undefined) {\n\t\t\t\texports.powerButtons.defaults = {};\n\t\t\t}\n\t\t\texports.powerButtons.defaults[action.NAME.toLowerCase()] = Object.assign({}, action.DEFAULTS);\n\t\t}\n\t\tstatic getActionSettings(action, options) {\n\t\t\tif (this.actionsRegistered[action.NAME.toLowerCase()] === undefined) {\n\t\t\t\tconsole.error(`The action ${action.NAME} is not registered`);\n\t\t\t\treturn {};\n\t\t\t}\n\t\t\tlet defaultsWindow = {};\n\t\t\tif (exports.powerButtons !== undefined && exports.powerButtons.defaults !== undefined && exports.powerButtons.defaults[action.NAME.toLowerCase()] !== undefined) {\n\t\t\t\tdefaultsWindow = exports.powerButtons.defaults[action.NAME.toLowerCase()];\n\t\t\t}\n\t\t\treturn Object.assign({}, action.DEFAULTS, defaultsWindow, options);\n\t\t}\n\t\tstatic addAction(el, options = {}) {\n\t\t\tlet powerButton = PowerButtons.addActionSupport(el);\n\t\t\tpowerButton.appendAction(options);\n\t\t}\n\t\tstatic addActionSupport(el) {\n\t\t\tif (el._powerButtons === undefined) {\n\t\t\t\tel._powerButtons = new PowerButtons(el);\n\t\t\t} else {\n\t\t\t\tel._powerButtons.reset();\n\t\t\t}\n\t\t\treturn el._powerButtons;\n\t\t}\n\t\tel = null;\n\t\tcurrent_action = 0;\n\t\tactions = [];\n\t\tback_onclick = null;\n\t\tconstructor(el) {\n\t\t\tel._powerButtons = this;\n\t\t\tthis.el = el;\n\t\t\tthis.current_action = 0;\n\t\t\tthis.actions = [];\n\t\t\tthis.back_onclick = null;\n\t\t\tif (el.onclick !== undefined && el.onclick !== null) {\n\t\t\t\tthis.back_onclick = el.onclick;\n\t\t\t\tel.onclick = null;\n\t\t\t}\n\t\t\tel.addEventListener(\"click\", this.handlerClick.bind(this));\n\t\t}\n\t\tappendAction(options = {}) {\n\t\t\tif (options.type === undefined) {\n\t\t\t\tthrow \"The type of the action is mandatory\";\n\t\t\t}\n\t\t\tthis.actions.push(options);\n\t\t}\n\t\thandlerClick(e) {\n\t\t\tif (this.current_action >= this.actions.length) {\n\t\t\t\tthis.current_action = 0;\n\t\t\t\tif (typeof this.back_onclick === \"function\") {\n\t\t\t\t\tif (!this.back_onclick()) {\n\t\t\t\t\t\te.preventDefault();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tlet currentActionSettings = this.actions[this.current_action];\n\t\t\te.preventDefault();\n\t\t\te.stopImmediatePropagation();\n\t\t\tlet onNextAction = function (override = false) {\n\t\t\t\tif (override) {\n\t\t\t\t\tthis.current_action = this.actions.length;\n\t\t\t\t} else {\n\t\t\t\t\tthis.current_action++;\n\t\t\t\t}\n\t\t\t\tif (this.current_action >= this.actions.length) {\n\t\t\t\t\tif (this.el.click !== undefined) {\n\t\t\t\t\t\tthis.el.click();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis.el.dispatchEvent(new Event(e.type, e));\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tthis.el.dispatchEvent(new Event(e.type, e));\n\t\t\t\t}\n\t\t\t}.bind(this);\n\t\t\tlet action = this.constructor.actionsRegistered[currentActionSettings.type];\n\t\t\tif (action === undefined) {\n\t\t\t\tthrow `The action ${currentActionSettings.type} is not registered`;\n\t\t\t}\n\t\t\taction.execute(this.el, currentActionSettings, onNextAction, () => this.reset());\n\t\t}\n\t\treset() {\n\t\t\tthis.current_action = 0;\n\t\t}\n\t\tstatic discoverAll() {\n\t\t\tObject.entries(this.actionsRegistered).forEach(([key, action]) => {\n\t\t\t\taction.discoverAll();\n\t\t\t});\n\t\t}\n\t\tstatic discover(els, options = {}) {\n\t\t\tObject.entries(this.actionsRegistered).forEach(([key, action]) => {\n\t\t\t\taction.discover(els, options);\n\t\t\t});\n\t\t}\n\t}\n\tclass Action {\n\t\tstatic NAME = null;\n\t\tstatic register() {\n\t\t\tPowerButtons.registerAction(this);\n\t\t}\n\t\tstatic DEFAULTS = {};\n\t\tstatic extractOptions(el, prefix = null, map = null) {\n\t\t\tif (prefix === null) {\n\t\t\t\tprefix = this.NAME.toLowerCase();\n\t\t\t}\n\t\t\tif (map === null) {\n\t\t\t\tmap = {};\n\t\t\t\tmap[prefix] = prefix;\n\t\t\t}\n\t\t\tlet options = {};\n\t\t\tfor (let key in this.DEFAULTS) {\n\t\t\t\tlet targetKey = key;\n\t\t\t\tif (map[targetKey] !== undefined) {\n\t\t\t\t\ttargetKey = map[targetKey];\n\t\t\t\t} else {\n\t\t\t\t\ttargetKey = prefix + CamelToCamel(targetKey);\n\t\t\t\t}\n\t\t\t\tif (el.dataset[targetKey] !== undefined) {\n\t\t\t\t\toptions[key] = el.dataset[targetKey];\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn options;\n\t\t}\n\t\tstatic initialize(el, values = {}) {\n\t\t\tPowerButtons.addAction(el, Object.assign({\n\t\t\t\ttype: this.NAME.toLowerCase()\n\t\t\t}, values));\n\t\t}\n\t\tstatic discoverAll() {\n\t\t\tlet prefix = this.NAME.toLowerCase();\n\t\t\tthis.discover(document.querySelectorAll(`[data-${prefix}]`));\n\t\t}\n\t\tstatic discover(els, options = {}, skipInitialized = true) {\n\t\t\tif (els.length === undefined) {\n\t\t\t\tels = [els];\n\t\t\t}\n\t\t\tlet prefix = this.NAME.toLowerCase();\n\t\t\tfor (let el of els) {\n\t\t\t\tif (skipInitialized && el._powerButtons !== undefined && el._powerButtons._discover !== undefined && el._powerButtons._discover.indexOf(prefix) !== -1) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tif (el.dataset[prefix] === undefined) {\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tlet currentOptions = Object.assign(this.extractOptions(el, prefix), options);\n\t\t\t\tthis.initialize(el, currentOptions);\n\t\t\t\tif (el._powerButtons !== undefined) {\n\t\t\t\t\tif (el._powerButtons._discover === undefined) {\n\t\t\t\t\t\tel._powerButtons._discover = [];\n\t\t\t\t\t}\n\t\t\t\t\tif (!el._powerButtons._discover.includes(prefix)) {\n\t\t\t\t\t\tel._powerButtons._discover.push(prefix);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tstatic execute(el, options, onNextAction, onCancelActions) {\n\t\t\tthrow new Error(\"The execute method must be implemented by the derived class\");\n\t\t}\n\t}\n\tclass ActionOverride extends Action {\n\t\tstatic NAME = \"Override\";\n\t\tstatic DEFAULTS = {\n\t\t\toverride: null,\n\t\t\tform: null,\n\t\t\toverridden: null,\n\t\t\tcustomContent: null,\n\t\t\ttitle: null,\n\t\t\tbuttonAccept: \"Accept\",\n\t\t\tescapeKey: true,\n\t\t\tdialogClass: \"fade\",\n\t\t\tfocus: \"\",\n\t\t\tonDialogCreated: htmlElement => {}\n\t\t};\n\t\tstatic execute(el, options, onNextAction, onCancelActions) {\n\t\t\tlet settings = PowerButtons.getActionSettings(this, options);\n\t\t\tlet result = null;\n\t\t\tlet bindObject = searchForm(settings.form);\n\t\t\tif (bindObject === null) {\n\t\t\t\tbindObject = document;\n\t\t\t}\n\t\t\ttry {\n\t\t\t\tif (typeof settings.override === \"function\") {\n\t\t\t\t\tresult = settings.override.bind(bindObject)();\n\t\t\t\t} else if (typeof settings.override === \"string\") {\n\t\t\t\t\tresult = function () {\n\t\t\t\t\t\treturn eval(settings.override);\n\t\t\t\t\t}.bind(bindObject)();\n\t\t\t\t} else {\n\t\t\t\t\tresult = parseBoolean(settings.override);\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\tconsole.error(\"Error executing override function\", e);\n\t\t\t\tresult = false;\n\t\t\t}\n\t\t\tif (result) {\n\t\t\t\tif (settings.overridden !== null || settings.customContent !== null || settings.title !== null) {\n\t\t\t\t\tlet dialog = null;\n\t\t\t\t\tdialog = Dialog.create({\n\t\t\t\t\t\ttitle: settings.title,\n\t\t\t\t\t\tmessage: settings.overridden,\n\t\t\t\t\t\tcustomContent: settings.customContent,\n\t\t\t\t\t\tbuttons: [settings.buttonAccept],\n\t\t\t\t\t\tescapeKeyCancels: settings.escapeKey,\n\t\t\t\t\t\tclose: settings.buttonClose,\n\t\t\t\t\t\tdialogClass: settings.dialogClass,\n\t\t\t\t\t\tfocus: settings.focus,\n\t\t\t\t\t\tonDialogCreated: settings.onDialogCreated\n\t\t\t\t\t}, null, function (result) {\n\t\t\t\t\t\tonNextAction(true);\n\t\t\t\t\t});\n\t\t\t\t\tdialog.show();\n\t\t\t\t} else {\n\t\t\t\t\tonNextAction(true);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tonNextAction();\n\t\t\t}\n\t\t}\n\t}\n\tActionOverride.register();\n\tclass ActionVerify extends Action {\n\t\tstatic NAME = \"Verify\";\n\t\tstatic DEFAULTS = {\n\t\t\tverify: null,\n\t\t\tform: null,\n\t\t\tverified: null,\n\t\t\tnotVerified: \"The condition for this action is not met\",\n\t\t\tcustomContentVerified: null,\n\t\t\tcustomContentNotVerified: null,\n\t\t\ttitleNotVerified: \"The action requires verification\",\n\t\t\ttitleVerified: null,\n\t\t\tbuttonAccept: \"Accept\",\n\t\t\tbuttonClose: false,\n\t\t\tescapeKey: true,\n\t\t\tdialogClass: \"fade\",\n\t\t\tfocus: \"\",\n\t\t\tonDialogCreated: htmlElement => {}\n\t\t};\n\t\tstatic execute(el, options, onNextAction, onCancelActions) {\n\t\t\tlet settings = PowerButtons.getActionSettings(this, options);\n\t\t\tlet result = null;\n\t\t\tlet bindObject = searchForm(settings.form);\n\t\t\tif (bindObject === null) {\n\t\t\t\tbindObject = document;\n\t\t\t}\n\t\t\ttry {\n\t\t\t\tif (typeof settings.verify === \"function\") {\n\t\t\t\t\tresult = settings.verify.bind(bindObject)();\n\t\t\t\t} else if (typeof settings.verify === \"string\") {\n\t\t\t\t\tresult = function () {\n\t\t\t\t\t\treturn eval(settings.verify);\n\t\t\t\t\t}.bind(bindObject)();\n\t\t\t\t} else {\n\t\t\t\t\tresult = parseBoolean(settings.verify);\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\tconsole.error(\"Error executing verification function\", e);\n\t\t\t\tresult = false;\n\t\t\t}\n\t\t\tlet dialog = null;\n\t\t\tlet onVerificationSuccess = onNextAction;\n\t\t\tlet onVerificationFailure = onCancelActions;\n\t\t\tif (result) {\n\t\t\t\tif (settings.verified !== null || settings.customContentVerified !== null || settings.titleVerified !== null) {\n\t\t\t\t\tdialog = Dialog.create({\n\t\t\t\t\t\ttitle: settings.titleVerified,\n\t\t\t\t\t\tmessage: settings.verified,\n\t\t\t\t\t\tcustomContent: settings.customContentVerified,\n\t\t\t\t\t\tbuttons: [settings.buttonAccept],\n\t\t\t\t\t\tescapeKeyCancels: settings.escapeKey,\n\t\t\t\t\t\tclose: settings.buttonClose,\n\t\t\t\t\t\tdialogClass: settings.dialogClass,\n\t\t\t\t\t\tfocus: settings.focus,\n\t\t\t\t\t\tonDialogCreated: settings.onDialogCreated\n\t\t\t\t\t}, null, function (result) {\n\t\t\t\t\t\tif (onVerificationSuccess !== null) {\n\t\t\t\t\t\t\tonVerificationSuccess();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tif (settings.notVerified !== null || settings.customContentNotVerified !== null || settings.titleNotVerified !== null) {\n\t\t\t\t\tdialog = Dialog.create({\n\t\t\t\t\t\ttitle: settings.titleNotVerified,\n\t\t\t\t\t\tmessage: settings.notVerified,\n\t\t\t\t\t\tcustomContent: settings.customContentNotVerified,\n\t\t\t\t\t\tbuttons: [settings.buttonAccept],\n\t\t\t\t\t\tescapeKeyCancels: settings.escapeKey,\n\t\t\t\t\t\tclose: settings.buttonClose,\n\t\t\t\t\t\tdialogClass: settings.dialogClass,\n\t\t\t\t\t\tfocus: settings.focus,\n\t\t\t\t\t\tonDialogCreated: settings.onDialogCreated\n\t\t\t\t\t}, null, function (result) {\n\t\t\t\t\t\tif (onVerificationFailure !== null) {\n\t\t\t\t\t\t\tonVerificationFailure();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (dialog !== null) {\n\t\t\t\tdialog.show();\n\t\t\t} else {\n\t\t\t\tif (result) {\n\t\t\t\t\tif (onVerificationSuccess !== null) {\n\t\t\t\t\t\tonVerificationSuccess();\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif (onVerificationFailure !== null) {\n\t\t\t\t\t\tonVerificationFailure();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tActionVerify.register();\n\tclass ActionConfirm extends Action {\n\t\tstatic NAME = \"Confirm\";\n\t\tstatic DEFAULTS = {\n\t\t\tconfirm: \"Please confirm this action\",\n\t\t\tcustomContent: null,\n\t\t\ttitle: \"The action requires confirmation\",\n\t\t\tbuttonConfirm: \"Confirm\",\n\t\t\tbuttonCancel: \"Cancel\",\n\t\t\tbuttonClose: true,\n\t\t\tonConfirm: null,\n\t\t\tescapeKey: true,\n\t\t\tdialogClass: \"fade\",\n\t\t\tfocus: \"\",\n\t\t\tonDialogCreated: htmlElement => {}\n\t\t};\n\t\tstatic extractOptions(el, prefix = null, map = null) {\n\t\t\tlet options = super.extractOptions(el, prefix, map);\n\t\t\tif (options.confirm.trim() == \"\") {\n\t\t\t\tdelete options.confirm;\n\t\t\t}\n\t\t\treturn options;\n\t\t}\n\t\tstatic execute(el, options, onNextAction, onCancelActions) {\n\t\t\tlet settings = PowerButtons.getActionSettings(this, options);\n\t\t\tlet dialog = Dialog.create({\n\t\t\t\ttitle: settings.title,\n\t\t\t\tmessage: settings.confirm,\n\t\t\t\tcustomContent: settings.customContent,\n\t\t\t\tbuttons: [settings.buttonConfirm, settings.buttonCancel],\n\t\t\t\tescapeKeyCancels: settings.escapeKey,\n\t\t\t\tclose: settings.buttonClose,\n\t\t\t\tdialogClass: settings.dialogClass,\n\t\t\t\tfocus: settings.focus,\n\t\t\t\tonDialogCreated: settings.onDialogCreated\n\t\t\t}, null, function (result) {\n\t\t\t\tif (result === 0) {\n\t\t\t\t\tif (settings.onConfirm !== null) {\n\t\t\t\t\t\tlet result = null;\n\t\t\t\t\t\tif (typeof settings.onConfirm === \"function\") {\n\t\t\t\t\t\t\tresult = settings.onConfirm.bind(document)();\n\t\t\t\t\t\t} else if (typeof settings.onConfirm === \"string\") {\n\t\t\t\t\t\t\tresult = function () {\n\t\t\t\t\t\t\t\treturn eval(settings.onConfirm);\n\t\t\t\t\t\t\t}.bind(document)();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tif (onNextAction !== null) {\n\t\t\t\t\t\tonNextAction();\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tif (onCancelActions !== null) {\n\t\t\t\t\t\tonCancelActions();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t\tdialog.show();\n\t\t}\n\t}\n\tActionConfirm.register();\n\tclass ActionAsyncTask extends Action {\n\t\tstatic NAME = \"AsyncTask\";\n\t\tstatic DEFAULTS = {\n\t\t\ttask: null,\n\t\t\tmessage: \"Please wait...\",\n\t\t\tcustomContent: null,\n\t\t\ttitle: null,\n\t\t\tbuttonCancel: \"Cancel\",\n\t\t\tcancel: null,\n\t\t\theader: true,\n\t\t\tfooter: true,\n\t\t\tdialogClass: \"fade\",\n\t\t\tfocus: \"\",\n\t\t\tonDialogCreated: htmlElement => {}\n\t\t};\n\t\tstatic extractOptions(el, prefix = null, map = null) {\n\t\t\treturn super.extractOptions(el, prefix, {\n\t\t\t\ttask: \"asynctask\"\n\t\t\t});\n\t\t}\n\t\tstatic execute(el, options, onNextAction, onCancelActions) {\n\t\t\tlet settings = PowerButtons.getActionSettings(this, options);\n\t\t\tif (settings.task === null) {\n\t\t\t\tconsole.error(\"The task to execute cannot be null\");\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tlet task = null;\n\t\t\tif (typeof settings.task === \"string\") {\n\t\t\t\ttask = async function () {\n\t\t\t\t\treturn await eval(settings.task);\n\t\t\t\t};\n\t\t\t} else if (typeof settings.task === \"function\") {\n\t\t\t\ttask = settings.task;\n\t\t\t} else {\n\t\t\t\tconsole.error(\"The task to execute must be either a string or a function\");\n\t\t\t\treturn;\n\t\t\t}\n\t\t\tlet buttons = [];\n\t\t\tlet cancelHandler = null;\n\t\t\tif (settings.cancel !== null) {\n\t\t\t\tbuttons = [settings.buttonCancel];\n\t\t\t\tif (typeof settings.cancel === \"string\") {\n\t\t\t\t\tcancelHandler = function () {\n\t\t\t\t\t\teval(settings.cancel);\n\t\t\t\t\t};\n\t\t\t\t} else if (typeof settings.cancel === \"function\") {\n\t\t\t\t\tcancelHandler = settings.cancel;\n\t\t\t\t} else {\n\t\t\t\t\tconsole.error(\"The cancel handler must be either a string or a function\");\n\t\t\t\t}\n\t\t\t}\n\t\t\tlet dialog = Dialog.create({\n\t\t\t\ttitle: settings.title,\n\t\t\t\tmessage: settings.message,\n\t\t\t\tcustomContent: settings.customContent,\n\t\t\t\tbuttons: buttons,\n\t\t\t\tescapeKeyCancels: false,\n\t\t\t\tclose: false,\n\t\t\t\theader: options.header !== undefined ? settings.header : settings.title !== null && settings.title != \"\",\n\t\t\t\tfooter: options.footer !== undefined ? settings.footer : cancelHandler !== null,\n\t\t\t\tdialogClass: settings.dialogClass,\n\t\t\t\tfocus: settings.focus,\n\t\t\t\tonDialogCreated: settings.onDialogCreated\n\t\t\t}, function () {\n\t\t\t\tcancelHandler();\n\t\t\t\tonCancelActions();\n\t\t\t}, function (result) {\n\t\t\t\tif (onNextAction !== null) {\n\t\t\t\t\tonNextAction();\n\t\t\t\t}\n\t\t\t});\n\t\t\tdialog.show().then(function () {\n\t\t\t\ttask().finally(function () {\n\t\t\t\t\tdialog.hide();\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t}\n\tActionAsyncTask.register();\n\tclass ActionShowMessage extends Action {\n\t\tstatic NAME = \"ShowMessage\";\n\t\tstatic DEFAULTS = {\n\t\t\tshowmessage: \"This is a message\",\n\t\t\tcustomContent: null,\n\t\t\ttitle: null,\n\t\t\tbuttonAccept: \"Accept\",\n\t\t\tescapeKey: true,\n\t\t\tbuttonClose: true,\n\t\t\theader: true,\n\t\t\tfooter: true,\n\t\t\tdialogClass: \"fade\",\n\t\t\tfocus: \"\",\n\t\t\tonDialogCreated: htmlElement => {}\n\t\t};\n\t\tstatic execute(el, options, onNextAction, onCancelActions) {\n\t\t\tlet settings = PowerButtons.getActionSettings(this, options);\n\t\t\tlet dialog = Dialog.create({\n\t\t\t\ttitle: settings.title,\n\t\t\t\tmessage: settings.showmessage,\n\t\t\t\tcustomContent: settings.customContent,\n\t\t\t\tbuttons: [settings.buttonAccept],\n\t\t\t\tescapeKeyCancels: settings.escapeKey,\n\t\t\t\tclose: settings.buttonClose,\n\t\t\t\theader: options.header !== undefined ? settings.header : settings.title !== null && settings.title != \"\",\n\t\t\t\tfooter: options.footer !== undefined ? settings.footer : settings.buttonAccept !== null && settings.buttonAccept != \"\",\n\t\t\t\tdialogClass: settings.dialogClass,\n\t\t\t\tfocus: settings.focus,\n\t\t\t\tonDialogCreated: settings.onDialogCreated\n\t\t\t}, null, function (result) {\n\t\t\t\tif (onNextAction !== null) {\n\t\t\t\t\tonNextAction();\n\t\t\t\t}\n\t\t\t});\n\t\t\tdialog.show();\n\t\t}\n\t}\n\tActionShowMessage.register();\n\tclass ActionFormset extends Action {\n\t\tstatic NAME = \"Formset\";\n\t\tstatic DEFAULTS = {\n\t\t\tform: null,\n\t\t\tfields: {}\n\t\t};\n\t\tstatic extractOptions(el, prefix = null, map = null) {\n\t\t\tlet options = super.extractOptions(el, prefix, {\n\t\t\t\tform: \"formset\"\n\t\t\t});\n\t\t\tlet fields = {};\n\t\t\tfor (let key in el.dataset) {\n\t\t\t\tif (key.startsWith(prefix)) {\n\t\t\t\t\tlet fieldname = key.substring(prefix.length);\n\t\t\t\t\tif (fieldname === \"\") {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tif (fieldname[0] !== fieldname[0].toUpperCase()) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tfieldname = fieldname.toLocaleLowerCase();\n\t\t\t\t\tfields[fieldname] = el.dataset[key];\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (options.fields === undefined) {\n\t\t\t\toptions.fields = {};\n\t\t\t}\n\t\t\tObject.assign(options.fields, fields);\n\t\t\treturn options;\n\t\t}\n\t\tstatic execute(el, options, onNextAction, onCancelActions) {\n\t\t\tlet settings = PowerButtons.getActionSettings(this, options);\n\t\t\tlet formToSet = null;\n\t\t\tlet inputFields = [];\n\t\t\tlet elements = [];\n\t\t\tif (settings.form == \"\") {\n\t\t\t\tif (el.form !== null) {\n\t\t\t\t\tformToSet = el.form;\n\t\t\t\t} else {\n\t\t\t\t\telements = Array.from(document.querySelectorAll(\"input\")).filter(input => input.form === null);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tformToSet = searchForm(settings.form);\n\t\t\t\tif (formToSet === null) {\n\t\t\t\t\tconsole.error(`Form not found ${settings.form}`);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (formToSet !== null) {\n\t\t\t\telements = Array.from(formToSet.elements);\n\t\t\t}\n\t\t\telements.forEach(element => {\n\t\t\t\tif (element.name !== \"\") {\n\t\t\t\t\tinputFields[element.name.toLocaleLowerCase()] = element;\n\t\t\t\t}\n\t\t\t\tif (element.id !== \"\") {\n\t\t\t\t\tinputFields[element.id.toLocaleLowerCase()] = element;\n\t\t\t\t}\n\t\t\t});\n\t\t\tfor (let field in settings.fields) {\n\t\t\t\tif (inputFields[field] !== undefined) {\n\t\t\t\t\tlet value = settings.fields[field];\n\t\t\t\t\tlet result = getValueWithJavascriptSupport(value, formToSet !== null ? formToSet : inputFields);\n\t\t\t\t\tif (typeof result === \"function\") {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\tresult = result();\n\t\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\t\tconsole.error(`Error executing ${value}`, e);\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tinputFields[field].value = result;\n\t\t\t\t}\n\t\t\t}\n\t\t\tonNextAction();\n\t\t}\n\t}\n\tActionFormset.register();\n\tclass ActionFormButton extends Action {\n\t\tstatic NAME = \"FormButton\";\n\t\tstatic DEFAULTS = {\n\t\t\tformbutton: null,\n\t\t\tmethod: \"post\",\n\t\t\tformClass: \"formbutton\",\n\t\t\tconvertCase: \"none\",\n\t\t\tformId: null,\n\t\t\tfields: {}\n\t\t};\n\t\tstatic extractOptions(el, prefix = null, map = null) {\n\t\t\tlet options = super.extractOptions(el, prefix, map);\n\t\t\tlet fields = {};\n\t\t\tprefix = prefix + \"Field\";\n\t\t\tfor (let key in el.dataset) {\n\t\t\t\tif (key.startsWith(prefix)) {\n\t\t\t\t\tlet fieldname = key.substring(prefix.length);\n\t\t\t\t\tif (fieldname === \"\") {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tif (fieldname[0] !== fieldname[0].toUpperCase()) {\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\tswitch (options.convertCase) {\n\t\t\t\t\tcase \"kebab\":\n\t\t\t\t\t\tfieldname = pascalToKebab(fieldname);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"snake\":\n\t\t\t\t\t\tfieldname = pascalToSnake(fieldname);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"camel\":\n\t\t\t\t\t\tfieldname = pascalToCamel(fieldname);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase \"pascal\":\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t\tfields[fieldname] = el.dataset[key];\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (options.fields === undefined) {\n\t\t\t\toptions.fields = {};\n\t\t\t}\n\t\t\tObject.assign(options.fields, fields);\n\t\t\treturn options;\n\t\t}\n\t\tstatic initialize(el, values = {}) {\n\t\t\tlet settings = PowerButtons.getActionSettings(this, values);\n\t\t\tlet form = document.createElement(\"form\");\n\t\t\tform.method = settings.method;\n\t\t\tif (!isEmpty(settings.formbutton)) {\n\t\t\t\tform.action = settings.formbutton;\n\t\t\t}\n\t\t\tif (settings.formId !== null) {\n\t\t\t\tform.id = settings.formId;\n\t\t\t}\n\t\t\tlet cssClasses = settings.formClass.split(\" \");\n\t\t\tfor (var i = 0; i < cssClasses.length; i++) {\n\t\t\t\tif (!isEmpty(cssClasses[i])) {\n\t\t\t\t\tform.classList.add(cssClasses[i]);\n\t\t\t\t}\n\t\t\t}\n\t\t\tel.type = \"submit\";\n\t\t\tlet fields = {};\n\t\t\tfor (let fieldName in settings.fields) {\n\t\t\t\tfields[fieldName] = getValueWithJavascriptSupport(settings.fields[fieldName], form);\n\t\t\t}\n\t\t\tlet pendingFields = {};\n\t\t\tfor (let fieldName in fields) {\n\t\t\t\tlet input = document.createElement(\"input\");\n\t\t\t\tinput.type = \"hidden\";\n\t\t\t\tinput.name = fieldName;\n\t\t\t\tif (typeof fields[fieldName] === \"function\") {\n\t\t\t\t\tinput.value = \"\";\n\t\t\t\t\tpendingFields[fieldName] = fields[fieldName];\n\t\t\t\t} else {\n\t\t\t\t\tinput.value = fields[fieldName];\n\t\t\t\t}\n\t\t\t\tform.appendChild(input);\n\t\t\t}\n\t\t\tel.parentNode.replaceChild(form, el);\n\t\t\tform.appendChild(el);\n\t\t\tif (Object.keys(pendingFields).length > 0) {\n\t\t\t\tsettings.fields = pendingFields;\n\t\t\t\tsettings._formObject = form;\n\t\t\t\tsuper.initialize(el, settings);\n\t\t\t}\n\t\t}\n\t\tstatic execute(el, options, onNextAction, onCancelActions) {\n\t\t\tlet settings = PowerButtons.getActionSettings(this, options);\n\t\t\tlet error = false;\n\t\t\tfor (let fieldName in settings.fields) {\n\t\t\t\ttry {\n\t\t\t\t\tlet value = settings.fields[fieldName]();\n\t\t\t\t\tsettings._formObject[fieldName].value = value;\n\t\t\t\t} catch (e) {\n\t\t\t\t\tconsole.error(`Error obtaining value for field ${fieldName}: ${e}`);\n\t\t\t\t\terror = true;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (error) {\n\t\t\t\tonCancelActions();\n\t\t\t} else {\n\t\t\t\tonNextAction();\n\t\t\t}\n\t\t}\n\t}\n\tActionFormButton.register();\n})(window);\n"],"names":["exports","pascalToSnake","str","replace","letter","toLowerCase","pascalToKebab","snakeCaseToCamel","g","toUpperCase","pascalToCamel","charAt","slice","CamelToCamel","isElement","el","Element","HTMLDocument","parseBoolean","value","createTag","tag","props","html","let","parts_id","split","id","prop","parts","length","join","innerHTML","className","filter","e","trim","document","createElement","undefined","setAttribute","appendToElement","args","filtered","append","searchForm","formName","formObject","forms","querySelector","console","warn","tagName","getValueWithJavascriptSupport","context","bind","internalValue","startsWith","f","substring","eval","error","promiseForEvent","event","Promise","resolve","resolveFunction","promise","addEventListener","handler","removeEventListener","isEmpty","obj","Array","Object","keys","window","powerButtons","param1","param2","param3","pluginName","els","options","actionName","PowerButtons","actionsRegistered","toLocaleLowerCase","querySelectorAll","arguments","valid","HTMLElement","plugin","initialize","discover","version","plugins","discoverAll","$","fn","this","DialogLegacy","DEFAULTS","message","buttonCount","constructor","onButton","onHidden","buttons","result","dispose","show","alert","confirm","button","text","Dialog","create","bootstrap","Modal","selector","dialogFunction","Error","title","customContent","buttonClasses","buttonPanelClasses","escapeKeyCancels","header","footer","body","close","dialogClass","focus","onDialogCreated","htmlElement","dialog","modal","parsedButtons","i","class","Math","min","push","_hiddenHandler","_hideHandler","activeElement","blur","remove","_build_dialog","backdrop","keyboard","then","hide","_handleButton","index","buttonObject","closeButton","tabindex","type","aria-label","buttonClass","map","dialogClasses","role","aria-hidden","data-keyboard","confirmDialog","onConfirm","onCancel","cancellable","alertDialog","onAccept","loadingDialog","canCancel","utils","assign","registerAction","action","NAME","defaults","getActionSettings","defaultsWindow","addAction","addActionSupport","appendAction","_powerButtons","reset","current_action","actions","back_onclick","onclick","handlerClick","preventDefault","currentActionSettings","onNextAction","stopImmediatePropagation","override","click","dispatchEvent","Event","execute","entries","forEach","key","Action","register","extractOptions","prefix","targetKey","dataset","values","skipInitialized","currentOptions","_discover","indexOf","includes","onCancelActions","ActionOverride","form","overridden","buttonAccept","escapeKey","settings","bindObject","buttonClose","ActionVerify","verify","verified","notVerified","customContentVerified","customContentNotVerified","titleNotVerified","titleVerified","onVerificationSuccess","onVerificationFailure","ActionConfirm","buttonConfirm","buttonCancel","super","ActionAsyncTask","task","cancel","async","cancelHandler","finally","ActionShowMessage","showmessage","ActionFormset","fields","fieldname","field","formToSet","inputFields","elements","from","input","element","name","ActionFormButton","formbutton","method","formClass","convertCase","formId","cssClasses","classList","add","fieldName","pendingFields","appendChild","parentNode","replaceChild","_formObject"],"mappings":"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"}